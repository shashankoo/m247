require.config({"config": {
        "jsbuild":{"fotorama/fotorama.min.js":"/*!\n * Fotorama 4.6.4 | http://fotorama.io/license/\n */\nfotoramaVersion='4.6.4';(function(window,document,location,$,undefined){\"use strict\";var _fotoramaClass='fotorama',_fullscreenClass='fotorama__fullscreen',wrapClass=_fotoramaClass+'__wrap',wrapCss2Class=wrapClass+'--css2',wrapCss3Class=wrapClass+'--css3',wrapVideoClass=wrapClass+'--video',wrapFadeClass=wrapClass+'--fade',wrapSlideClass=wrapClass+'--slide',wrapNoControlsClass=wrapClass+'--no-controls',wrapNoShadowsClass=wrapClass+'--no-shadows',wrapPanYClass=wrapClass+'--pan-y',wrapRtlClass=wrapClass+'--rtl',wrapOnlyActiveClass=wrapClass+'--only-active',wrapNoCaptionsClass=wrapClass+'--no-captions',wrapToggleArrowsClass=wrapClass+'--toggle-arrows',stageClass=_fotoramaClass+'__stage',stageFrameClass=stageClass+'__frame',stageFrameVideoClass=stageFrameClass+'--video',stageShaftClass=stageClass+'__shaft',grabClass=_fotoramaClass+'__grab',pointerClass=_fotoramaClass+'__pointer',arrClass=_fotoramaClass+'__arr',arrDisabledClass=arrClass+'--disabled',arrPrevClass=arrClass+'--prev',arrNextClass=arrClass+'--next',navClass=_fotoramaClass+'__nav',navWrapClass=navClass+'-wrap',navShaftClass=navClass+'__shaft',navShaftVerticalClass=navWrapClass+'--vertical',navShaftListClass=navWrapClass+'--list',navShafthorizontalClass=navWrapClass+'--horizontal',navDotsClass=navClass+'--dots',navThumbsClass=navClass+'--thumbs',navFrameClass=navClass+'__frame',fadeClass=_fotoramaClass+'__fade',fadeFrontClass=fadeClass+'-front',fadeRearClass=fadeClass+'-rear',shadowClass=_fotoramaClass+'__shadow',shadowsClass=shadowClass+'s',shadowsLeftClass=shadowsClass+'--left',shadowsRightClass=shadowsClass+'--right',shadowsTopClass=shadowsClass+'--top',shadowsBottomClass=shadowsClass+'--bottom',activeClass=_fotoramaClass+'__active',selectClass=_fotoramaClass+'__select',hiddenClass=_fotoramaClass+'--hidden',fullscreenClass=_fotoramaClass+'--fullscreen',fullscreenIconClass=_fotoramaClass+'__fullscreen-icon',errorClass=_fotoramaClass+'__error',loadingClass=_fotoramaClass+'__loading',loadedClass=_fotoramaClass+'__loaded',loadedFullClass=loadedClass+'--full',loadedImgClass=loadedClass+'--img',grabbingClass=_fotoramaClass+'__grabbing',imgClass=_fotoramaClass+'__img',imgFullClass=imgClass+'--full',thumbClass=_fotoramaClass+'__thumb',thumbArrLeft=thumbClass+'__arr--left',thumbArrRight=thumbClass+'__arr--right',thumbBorderClass=thumbClass+'-border',htmlClass=_fotoramaClass+'__html',videoContainerClass=_fotoramaClass+'-video-container',videoClass=_fotoramaClass+'__video',videoPlayClass=videoClass+'-play',videoCloseClass=videoClass+'-close',horizontalImageClass=_fotoramaClass+'_horizontal_ratio',verticalImageClass=_fotoramaClass+'_vertical_ratio',fotoramaSpinnerClass=_fotoramaClass+'__spinner',spinnerShowClass=fotoramaSpinnerClass+'--show';var JQUERY_VERSION=$&&$.fn.jquery.split('.');if(!JQUERY_VERSION||JQUERY_VERSION[0]<1||(JQUERY_VERSION[0]==1&&JQUERY_VERSION[1]<8)){throw'Fotorama requires jQuery 1.8 or later and will not run without it.';}\nvar _={};var Modernizr=(function(window,document,undefined){var version='2.8.3',Modernizr={},docElement=document.documentElement,mod='modernizr',modElem=document.createElement(mod),mStyle=modElem.style,inputElem,toString={}.toString,prefixes=' -webkit- -moz- -o- -ms- '.split(' '),omPrefixes='Webkit Moz O ms',cssomPrefixes=omPrefixes.split(' '),domPrefixes=omPrefixes.toLowerCase().split(' '),tests={},inputs={},attrs={},classes=[],slice=classes.slice,featureName,injectElementWithStyles=function(rule,callback,nodes,testnames){var style,ret,node,docOverflow,div=document.createElement('div'),body=document.body,fakeBody=body||document.createElement('body');if(parseInt(nodes,10)){while(nodes--){node=document.createElement('div');node.id=testnames?testnames[nodes]:mod+(nodes+1);div.appendChild(node);}}\nstyle=['&#173;','<style id=\"s',mod,'\">',rule,'</style>'].join('');div.id=mod;(body?div:fakeBody).innerHTML+=style;fakeBody.appendChild(div);if(!body){fakeBody.style.background='';fakeBody.style.overflow='hidden';docOverflow=docElement.style.overflow;docElement.style.overflow='hidden';docElement.appendChild(fakeBody);}\nret=callback(div,rule);if(!body){fakeBody.parentNode.removeChild(fakeBody);docElement.style.overflow=docOverflow;}else{div.parentNode.removeChild(div);}\nreturn!!ret;},_hasOwnProperty=({}).hasOwnProperty,hasOwnProp;if(!is(_hasOwnProperty,'undefined')&&!is(_hasOwnProperty.call,'undefined')){hasOwnProp=function(object,property){return _hasOwnProperty.call(object,property);};}\nelse{hasOwnProp=function(object,property){return((property in object)&&is(object.constructor.prototype[property],'undefined'));};}\nif(!Function.prototype.bind){Function.prototype.bind=function bind(that){var target=this;if(typeof target!=\"function\"){throw new TypeError();}\nvar args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var F=function(){};F.prototype=target.prototype;var self=new F();var result=target.apply(self,args.concat(slice.call(arguments)));if(Object(result)===result){return result;}\nreturn self;}else{return target.apply(that,args.concat(slice.call(arguments)));}};return bound;};}\nfunction setCss(str){mStyle.cssText=str;}\nfunction setCssAll(str1,str2){return setCss(prefixes.join(str1+';')+(str2||''));}\nfunction is(obj,type){return typeof obj===type;}\nfunction contains(str,substr){return!!~(''+str).indexOf(substr);}\nfunction testProps(props,prefixed){for(var i in props){var prop=props[i];if(!contains(prop,\"-\")&&mStyle[prop]!==undefined){return prefixed=='pfx'?prop:true;}}\nreturn false;}\nfunction testDOMProps(props,obj,elem){for(var i in props){var item=obj[props[i]];if(item!==undefined){if(elem===false)return props[i];if(is(item,'function')){return item.bind(elem||obj);}\nreturn item;}}\nreturn false;}\nfunction testPropsAll(prop,prefixed,elem){var ucProp=prop.charAt(0).toUpperCase()+prop.slice(1),props=(prop+' '+cssomPrefixes.join(ucProp+' ')+ucProp).split(' ');if(is(prefixed,\"string\")||is(prefixed,\"undefined\")){return testProps(props,prefixed);}else{props=(prop+' '+(domPrefixes).join(ucProp+' ')+ucProp).split(' ');return testDOMProps(props,prefixed,elem);}}\ntests['touch']=function(){var bool;if(('ontouchstart'in window)||window.DocumentTouch&&document instanceof DocumentTouch){bool=true;}else{injectElementWithStyles(['@media (',prefixes.join('touch-enabled),('),mod,')','{#modernizr{top:9px;position:absolute}}'].join(''),function(node){bool=node.offsetTop===9;});}\nreturn bool;};tests['csstransforms3d']=function(){var ret=!!testPropsAll('perspective');if(ret&&'webkitPerspective'in docElement.style){injectElementWithStyles('@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}',function(node,rule){ret=node.offsetLeft===9&&node.offsetHeight===3;});}\nreturn ret;};tests['csstransitions']=function(){return testPropsAll('transition');};for(var feature in tests){if(hasOwnProp(tests,feature)){featureName=feature.toLowerCase();Modernizr[featureName]=tests[feature]();classes.push((Modernizr[featureName]?'':'no-')+featureName);}}\nModernizr.addTest=function(feature,test){if(typeof feature=='object'){for(var key in feature){if(hasOwnProp(feature,key)){Modernizr.addTest(key,feature[key]);}}}else{feature=feature.toLowerCase();if(Modernizr[feature]!==undefined){return Modernizr;}\ntest=typeof test=='function'?test():test;if(typeof enableClasses!==\"undefined\"&&enableClasses){docElement.className+=' '+(test?'':'no-')+feature;}\nModernizr[feature]=test;}\nreturn Modernizr;};setCss('');modElem=inputElem=null;Modernizr._version=version;Modernizr._prefixes=prefixes;Modernizr._domPrefixes=domPrefixes;Modernizr._cssomPrefixes=cssomPrefixes;Modernizr.testProp=function(prop){return testProps([prop]);};Modernizr.testAllProps=testPropsAll;Modernizr.testStyles=injectElementWithStyles;Modernizr.prefixed=function(prop,obj,elem){if(!obj){return testPropsAll(prop,'pfx');}else{return testPropsAll(prop,obj,elem);}};return Modernizr;})(window,document);var fullScreenApi={ok:false,is:function(){return false;},request:function(){},cancel:function(){},event:'',prefix:''},browserPrefixes='webkit moz o ms khtml'.split(' ');if(typeof document.cancelFullScreen!='undefined'){fullScreenApi.ok=true;}else{for(var i=0,il=browserPrefixes.length;i<il;i++){fullScreenApi.prefix=browserPrefixes[i];if(typeof document[fullScreenApi.prefix+'CancelFullScreen']!='undefined'){fullScreenApi.ok=true;break;}}}\nif(fullScreenApi.ok){fullScreenApi.event=fullScreenApi.prefix+'fullscreenchange';fullScreenApi.is=function(){switch(this.prefix){case'':return document.fullScreen;case'webkit':return document.webkitIsFullScreen;default:return document[this.prefix+'FullScreen'];}};fullScreenApi.request=function(el){return(this.prefix==='')?el.requestFullScreen():el[this.prefix+'RequestFullScreen']();};fullScreenApi.cancel=function(el){if(!this.is()){return false;}\nreturn(this.prefix==='')?document.cancelFullScreen():document[this.prefix+'CancelFullScreen']();};}\nfunction bez(coOrdArray){var encodedFuncName=\"bez_\"+$.makeArray(arguments).join(\"_\").replace(\".\",\"p\");if(typeof $['easing'][encodedFuncName]!==\"function\"){var polyBez=function(p1,p2){var A=[null,null],B=[null,null],C=[null,null],bezCoOrd=function(t,ax){C[ax]=3*p1[ax];B[ax]=3*(p2[ax]-p1[ax])-C[ax];A[ax]=1-C[ax]-B[ax];return t*(C[ax]+t*(B[ax]+t*A[ax]));},xDeriv=function(t){return C[0]+t*(2*B[0]+3*A[0]*t);},xForT=function(t){var x=t,i=0,z;while(++i<14){z=bezCoOrd(x,0)-t;if(Math.abs(z)<1e-3)break;x-=z / xDeriv(x);}\nreturn x;};return function(t){return bezCoOrd(xForT(t),1);}};$['easing'][encodedFuncName]=function(x,t,b,c,d){return c*polyBez([coOrdArray[0],coOrdArray[1]],[coOrdArray[2],coOrdArray[3]])(t / d)+b;}}\nreturn encodedFuncName;}\nvar $WINDOW=$(window),$DOCUMENT=$(document),$HTML,$BODY,QUIRKS_FORCE=location.hash.replace('#','')==='quirks',TRANSFORMS3D=Modernizr.csstransforms3d,CSS3=TRANSFORMS3D&&!QUIRKS_FORCE,COMPAT=TRANSFORMS3D||document.compatMode==='CSS1Compat',FULLSCREEN=fullScreenApi.ok,MOBILE=navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i),SLOW=!CSS3||MOBILE,MS_POINTER=navigator.msPointerEnabled,WHEEL=\"onwheel\"in document.createElement(\"div\")?\"wheel\":document.onmousewheel!==undefined?\"mousewheel\":\"DOMMouseScroll\",TOUCH_TIMEOUT=250,TRANSITION_DURATION=300,SCROLL_LOCK_TIMEOUT=1400,AUTOPLAY_INTERVAL=5000,MARGIN=2,THUMB_SIZE=64,WIDTH=500,HEIGHT=333,STAGE_FRAME_KEY='$stageFrame',NAV_DOT_FRAME_KEY='$navDotFrame',NAV_THUMB_FRAME_KEY='$navThumbFrame',AUTO='auto',BEZIER=bez([.1,0,.25,1]),MAX_WIDTH=1200,thumbsPerSlide=1,OPTIONS={width:null,minwidth:null,maxwidth:'100%',height:null,minheight:null,maxheight:null,ratio:null,margin:MARGIN,nav:'dots',navposition:'bottom',navwidth:null,thumbwidth:THUMB_SIZE,thumbheight:THUMB_SIZE,thumbmargin:MARGIN,thumbborderwidth:MARGIN,allowfullscreen:false,transition:'slide',clicktransition:null,transitionduration:TRANSITION_DURATION,captions:true,startindex:0,loop:false,autoplay:false,stopautoplayontouch:true,keyboard:false,arrows:true,click:true,swipe:false,trackpad:false,shuffle:false,direction:'ltr',shadows:true,showcaption:true,navdir:'horizontal',navarrows:true,navtype:'thumbs'},KEYBOARD_OPTIONS={left:true,right:true,down:true,up:true,space:false,home:false,end:false};function noop(){}\nfunction minMaxLimit(value,min,max){return Math.max(isNaN(min)?-Infinity:min,Math.min(isNaN(max)?Infinity:max,value));}\nfunction readTransform(css,dir){return css.match(/ma/)&&css.match(/-?\\d+(?!d)/g)[css.match(/3d/)?(dir==='vertical'?13:12):(dir==='vertical'?5:4)]}\nfunction readPosition($el,dir){if(CSS3){return+readTransform($el.css('transform'),dir);}else{return+$el.css(dir==='vertical'?'top':'left').replace('px','');}}\nfunction getTranslate(pos,direction){var obj={};if(CSS3){switch(direction){case'vertical':obj.transform='translate3d(0, '+(pos)+'px,0)';break;case'list':break;default:obj.transform='translate3d('+(pos)+'px,0,0)';break;}}else{direction==='vertical'?obj.top=pos:obj.left=pos;}\nreturn obj;}\nfunction getDuration(time){return{'transition-duration':time+'ms'};}\nfunction unlessNaN(value,alternative){return isNaN(value)?alternative:value;}\nfunction numberFromMeasure(value,measure){return unlessNaN(+String(value).replace(measure||'px',''));}\nfunction numberFromPercent(value){return/%$/.test(value)?numberFromMeasure(value,'%'):undefined;}\nfunction numberFromWhatever(value,whole){return unlessNaN(numberFromPercent(value)/ 100*whole,numberFromMeasure(value));}\nfunction measureIsValid(value){return(!isNaN(numberFromMeasure(value))||!isNaN(numberFromMeasure(value,'%')))&&value;}\nfunction getPosByIndex(index,side,margin,baseIndex){return(index-(baseIndex||0))*(side+(margin||0));}\nfunction getIndexByPos(pos,side,margin,baseIndex){return-Math.round(pos /(side+(margin||0))-(baseIndex||0));}\nfunction bindTransitionEnd($el){var elData=$el.data();if(elData.tEnd)return;var el=$el[0],transitionEndEvent={WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',OTransition:'oTransitionEnd otransitionend',msTransition:'MSTransitionEnd',transition:'transitionend'};addEvent(el,transitionEndEvent[Modernizr.prefixed('transition')],function(e){elData.tProp&&e.propertyName.match(elData.tProp)&&elData.onEndFn();});elData.tEnd=true;}\nfunction afterTransition($el,property,fn,time){var ok,elData=$el.data();if(elData){elData.onEndFn=function(){if(ok)return;ok=true;clearTimeout(elData.tT);fn();};elData.tProp=property;clearTimeout(elData.tT);elData.tT=setTimeout(function(){elData.onEndFn();},time*1.5);bindTransitionEnd($el);}}\nfunction stop($el,pos){var dir=$el.navdir||'horizontal';if($el.length){var elData=$el.data();if(CSS3){$el.css(getDuration(0));elData.onEndFn=noop;clearTimeout(elData.tT);}else{$el.stop();}\nvar lockedPos=getNumber(pos,function(){return readPosition($el,dir);});$el.css(getTranslate(lockedPos,dir));return lockedPos;}}\nfunction getNumber(){var number;for(var _i=0,_l=arguments.length;_i<_l;_i++){number=_i?arguments[_i]():arguments[_i];if(typeof number==='number'){break;}}\nreturn number;}\nfunction edgeResistance(pos,edge){return Math.round(pos+((edge-pos)/ 1.5));}\nfunction getProtocol(){getProtocol.p=getProtocol.p||(location.protocol==='https:'?'https://':'http://');return getProtocol.p;}\nfunction parseHref(href){var a=document.createElement('a');a.href=href;return a;}\nfunction findVideoId(href,forceVideo){if(typeof href!=='string')return href;href=parseHref(href);var id,type;if(href.host.match(/youtube\\.com/)&&href.search){id=href.search.split('v=')[1];if(id){var ampersandPosition=id.indexOf('&');if(ampersandPosition!==-1){id=id.substring(0,ampersandPosition);}\ntype='youtube';}}else if(href.host.match(/youtube\\.com|youtu\\.be|youtube-nocookie.com/)){id=href.pathname.replace(/^\\/(embed\\/|v\\/)?/,'').replace(/\\/.*/,'');type='youtube';}else if(href.host.match(/vimeo\\.com/)){type='vimeo';id=href.pathname.replace(/^\\/(video\\/)?/,'').replace(/\\/.*/,'');}\nif((!id||!type)&&forceVideo){id=href.href;type='custom';}\nreturn id?{id:id,type:type,s:href.search.replace(/^\\?/,''),p:getProtocol()}:false;}\nfunction getVideoThumbs(dataFrame,data,fotorama){var img,thumb,video=dataFrame.video;if(video.type==='youtube'){thumb=getProtocol()+'img.youtube.com/vi/'+video.id+'/default.jpg';img=thumb.replace(/\\/default.jpg$/,'/hqdefault.jpg');dataFrame.thumbsReady=true;}else if(video.type==='vimeo'){$.ajax({url:getProtocol()+'vimeo.com/api/oembed.json',data:{url:'https://vimeo.com/'+video.id},dataType:'jsonp',success:function(json){dataFrame.thumbsReady=true;updateData(data,{img:json[0].thumbnail_url,thumb:json[0].thumbnail_url},dataFrame.i,fotorama);}});}else{dataFrame.thumbsReady=true;}\nreturn{img:img,thumb:thumb}}\nfunction updateData(data,_dataFrame,i,fotorama){for(var _i=0,_l=data.length;_i<_l;_i++){var dataFrame=data[_i];if(dataFrame.i===i&&dataFrame.thumbsReady){var clear={videoReady:true};clear[STAGE_FRAME_KEY]=clear[NAV_THUMB_FRAME_KEY]=clear[NAV_DOT_FRAME_KEY]=false;fotorama.splice(_i,1,$.extend({},dataFrame,clear,_dataFrame));break;}}}\nfunction getDataFromHtml($el){var data=[];function getDataFromImg($img,imgData,checkVideo){var $child=$img.children('img').eq(0),_imgHref=$img.attr('href'),_imgSrc=$img.attr('src'),_thumbSrc=$child.attr('src'),_video=imgData.video,video=checkVideo?findVideoId(_imgHref,_video===true):false;if(video){_imgHref=false;}else{video=_video;}\ngetDimensions($img,$child,$.extend(imgData,{video:video,img:imgData.img||_imgHref||_imgSrc||_thumbSrc,thumb:imgData.thumb||_thumbSrc||_imgSrc||_imgHref}));}\nfunction getDimensions($img,$child,imgData){var separateThumbFLAG=imgData.thumb&&imgData.img!==imgData.thumb,width=numberFromMeasure(imgData.width||$img.attr('width')),height=numberFromMeasure(imgData.height||$img.attr('height'));$.extend(imgData,{width:width,height:height,thumbratio:getRatio(imgData.thumbratio||(numberFromMeasure(imgData.thumbwidth||($child&&$child.attr('width'))||separateThumbFLAG||width)/ numberFromMeasure(imgData.thumbheight||($child&&$child.attr('height'))||separateThumbFLAG||height)))});}\n$el.children().each(function(){var $this=$(this),dataFrame=optionsToLowerCase($.extend($this.data(),{id:$this.attr('id')}));if($this.is('a, img')){getDataFromImg($this,dataFrame,true);}else if(!$this.is(':empty')){getDimensions($this,null,$.extend(dataFrame,{html:this,_html:$this.html()}));}else return;data.push(dataFrame);});return data;}\nfunction isHidden(el){return el.offsetWidth===0&&el.offsetHeight===0;}\nfunction isDetached(el){return!$.contains(document.documentElement,el);}\nfunction waitFor(test,fn,timeout,i){if(!waitFor.i){waitFor.i=1;waitFor.ii=[true];}\ni=i||waitFor.i;if(typeof waitFor.ii[i]==='undefined'){waitFor.ii[i]=true;}\nif(test()){fn();}else{waitFor.ii[i]&&setTimeout(function(){waitFor.ii[i]&&waitFor(test,fn,timeout,i);},timeout||100);}\nreturn waitFor.i++;}\nwaitFor.stop=function(i){waitFor.ii[i]=false;};function fit($el,measuresToFit){var elData=$el.data(),measures=elData.measures;if(measures&&(!elData.l||elData.l.W!==measures.width||elData.l.H!==measures.height||elData.l.r!==measures.ratio||elData.l.w!==measuresToFit.w||elData.l.h!==measuresToFit.h)){var height=minMaxLimit(measuresToFit.h,0,measures.height),width=height*measures.ratio;UTIL.setRatio($el,width,height);elData.l={W:measures.width,H:measures.height,r:measures.ratio,w:measuresToFit.w,h:measuresToFit.h};}\nreturn true;}\nfunction setStyle($el,style){var el=$el[0];if(el.styleSheet){el.styleSheet.cssText=style;}else{$el.html(style);}}\nfunction findShadowEdge(pos,min,max,dir){return min===max?false:dir==='vertical'?(pos<=min?'top':pos>=max?'bottom':'top bottom'):(pos<=min?'left':pos>=max?'right':'left right');}\nfunction smartClick($el,fn,_options){_options=_options||{};$el.each(function(){var $this=$(this),thisData=$this.data(),startEvent;if(thisData.clickOn)return;thisData.clickOn=true;$.extend(touch($this,{onStart:function(e){startEvent=e;(_options.onStart||noop).call(this,e);},onMove:_options.onMove||noop,onTouchEnd:_options.onTouchEnd||noop,onEnd:function(result){if(result.moved)return;fn.call(this,startEvent);}}),{noMove:true});});}\nfunction div(classes,child){return'<div class=\"'+classes+'\">'+(child||'')+'</div>';}\nfunction cls(className){return\".\"+className;}\nfunction createVideoFrame(videoItem){var frame='<iframe src=\"'+videoItem.p+videoItem.type+'.com/embed/'+videoItem.id+'\" frameborder=\"0\" allowfullscreen></iframe>';return frame;}\nfunction shuffle(array){var l=array.length;while(l){var i=Math.floor(Math.random()*l--);var t=array[l];array[l]=array[i];array[i]=t;}\nreturn array;}\nfunction clone(array){return Object.prototype.toString.call(array)=='[object Array]'&&$.map(array,function(frame){return $.extend({},frame);});}\nfunction lockScroll($el,left,top){$el.scrollLeft(left||0).scrollTop(top||0);}\nfunction optionsToLowerCase(options){if(options){var opts={};$.each(options,function(key,value){opts[key.toLowerCase()]=value;});return opts;}}\nfunction getRatio(_ratio){if(!_ratio)return;var ratio=+_ratio;if(!isNaN(ratio)){return ratio;}else{ratio=_ratio.split('/');return+ratio[0]/+ratio[1]||undefined;}}\nfunction addEvent(el,e,fn,bool){if(!e)return;el.addEventListener?el.addEventListener(e,fn,!!bool):el.attachEvent('on'+e,fn);}\nfunction validateRestrictions(position,restriction){if(position>restriction.max){position=restriction.max;}else{if(position<restriction.min){position=restriction.min;}}\nreturn position;}\nfunction validateSlidePos(opt,navShaftTouchTail,guessIndex,offsetNav,$guessNavFrame,$navWrap,dir){var position,size,wrapSize;if(dir==='horizontal'){size=opt.thumbwidth;wrapSize=$navWrap.width();}else{size=opt.thumbheight;wrapSize=$navWrap.height();}\nif((size+opt.margin)*(guessIndex+1)>=(wrapSize-offsetNav)){if(dir==='horizontal'){position=-$guessNavFrame.position().left;}else{position=-$guessNavFrame.position().top;}}else{if((size+opt.margin)*(guessIndex)<=Math.abs(offsetNav)){if(dir==='horizontal'){position=-$guessNavFrame.position().left+wrapSize-(size+opt.margin);}else{position=-$guessNavFrame.position().top+wrapSize-(size+opt.margin);}}else{position=offsetNav;}}\nposition=validateRestrictions(position,navShaftTouchTail);return position||0;}\nfunction elIsDisabled(el){return!!el.getAttribute('disabled');}\nfunction disableAttr(FLAG,disable){if(disable){return{disabled:FLAG};}else{return{tabindex:FLAG*-1+'',disabled:FLAG};}}\nfunction addEnterUp(el,fn){addEvent(el,'keyup',function(e){elIsDisabled(el)||e.keyCode==13&&fn.call(el,e);});}\nfunction addFocus(el,fn){addEvent(el,'focus',el.onfocusin=function(e){fn.call(el,e);},true);}\nfunction stopEvent(e,stopPropagation){e.preventDefault?e.preventDefault():(e.returnValue=false);stopPropagation&&e.stopPropagation&&e.stopPropagation();}\nfunction getDirectionSign(forward){return forward?'>':'<';}\nvar UTIL=(function(){function setRatioClass($el,wh,ht){var rateImg=wh / ht;if(rateImg<=1){$el.parent().removeClass(horizontalImageClass);$el.parent().addClass(verticalImageClass);}else{$el.parent().removeClass(verticalImageClass);$el.parent().addClass(horizontalImageClass);}}\nfunction setThumbAttr($frame,value,searchAttr){var attr=searchAttr;if(!$frame.attr(attr)&&$frame.attr(attr)!==undefined){$frame.attr(attr,value);}\nif($frame.find(\"[\"+attr+\"]\").length){$frame.find(\"[\"+attr+\"]\").each(function(){$(this).attr(attr,value);});}}\nfunction isExpectedCaption(frameItem,isExpected,undefined){var expected=false,frameExpected;frameItem.showCaption===undefined||frameItem.showCaption===true?frameExpected=true:frameExpected=false;if(!isExpected){return false;}\nif(frameItem.caption&&frameExpected){expected=true;}\nreturn expected;}\nreturn{setRatio:setRatioClass,setThumbAttr:setThumbAttr,isExpectedCaption:isExpectedCaption};}(UTIL||{},jQuery));function slide($el,options){var elData=$el.data(),elPos=Math.round(options.pos),onEndFn=function(){if(elData&&elData.sliding){elData.sliding=false;}\n(options.onEnd||noop)();};if(typeof options.overPos!=='undefined'&&options.overPos!==options.pos){elPos=options.overPos;}\nvar translate=$.extend(getTranslate(elPos,options.direction),options.width&&{width:options.width},options.height&&{height:options.height});if(elData&&elData.sliding){elData.sliding=true;}\nif(CSS3){$el.css($.extend(getDuration(options.time),translate));if(options.time>10){afterTransition($el,'transform',onEndFn,options.time);}else{onEndFn();}}else{$el.stop().animate(translate,options.time,BEZIER,onEndFn);}}\nfunction fade($el1,$el2,$frames,options,fadeStack,chain){var chainedFLAG=typeof chain!=='undefined';if(!chainedFLAG){fadeStack.push(arguments);Array.prototype.push.call(arguments,fadeStack.length);if(fadeStack.length>1)return;}\n$el1=$el1||$($el1);$el2=$el2||$($el2);var _$el1=$el1[0],_$el2=$el2[0],crossfadeFLAG=options.method==='crossfade',onEndFn=function(){if(!onEndFn.done){onEndFn.done=true;var args=(chainedFLAG||fadeStack.shift())&&fadeStack.shift();args&&fade.apply(this,args);(options.onEnd||noop)(!!args);}},time=options.time /(chain||1);$frames.removeClass(fadeRearClass+' '+fadeFrontClass);$el1.stop().addClass(fadeRearClass);$el2.stop().addClass(fadeFrontClass);crossfadeFLAG&&_$el2&&$el1.fadeTo(0,0);$el1.fadeTo(crossfadeFLAG?time:0,1,crossfadeFLAG&&onEndFn);$el2.fadeTo(time,0,onEndFn);(_$el1&&crossfadeFLAG)||_$el2||onEndFn();}\nvar lastEvent,moveEventType,preventEvent,preventEventTimeout,dragDomEl;function extendEvent(e){var touch=(e.touches||[])[0]||e;e._x=touch.pageX||touch.originalEvent.pageX;e._y=touch.clientY||touch.originalEvent.clientY;e._now=$.now();}\nfunction touch($el,options){var el=$el[0],tail={},touchEnabledFLAG,startEvent,$target,controlTouch,touchFLAG,targetIsSelectFLAG,targetIsLinkFlag,isDisabledSwipe,tolerance,moved;function onStart(e){$target=$(e.target);tail.checked=targetIsSelectFLAG=targetIsLinkFlag=isDisabledSwipe=moved=false;if(touchEnabledFLAG||tail.flow||(e.touches&&e.touches.length>1)||e.which>1||(lastEvent&&lastEvent.type!==e.type&&preventEvent)||(targetIsSelectFLAG=options.select&&$target.is(options.select,el)))return targetIsSelectFLAG;touchFLAG=e.type==='touchstart';targetIsLinkFlag=$target.is('a, a *',el);isDisabledSwipe=$target.hasClass('disableSwipe');controlTouch=tail.control;tolerance=(tail.noMove||tail.noSwipe||controlTouch)?16:!tail.snap?4:0;extendEvent(e);startEvent=lastEvent=e;moveEventType=e.type.replace(/down|start/,'move').replace(/Down/,'Move');(options.onStart||noop).call(el,e,{control:controlTouch,$target:$target});touchEnabledFLAG=tail.flow=true;if(!isDisabledSwipe&&(!touchFLAG||tail.go))stopEvent(e);}\nfunction onMove(e){if((e.touches&&e.touches.length>1)||(MS_POINTER&&!e.isPrimary)||moveEventType!==e.type||!touchEnabledFLAG){touchEnabledFLAG&&onEnd();(options.onTouchEnd||noop)();return;}\nisDisabledSwipe=$(e.target).hasClass('disableSwipe');if(isDisabledSwipe){return;}\nextendEvent(e);var xDiff=Math.abs(e._x-startEvent._x),yDiff=Math.abs(e._y-startEvent._y),xyDiff=xDiff-yDiff,xWin=(tail.go||tail.x||xyDiff>=0)&&!tail.noSwipe,yWin=xyDiff<0;if(touchFLAG&&!tail.checked){if(touchEnabledFLAG=xWin){stopEvent(e);}}else{stopEvent(e);if(movedEnough(xDiff,yDiff)){(options.onMove||noop).call(el,e,{touch:touchFLAG});}}\nif(!moved&&movedEnough(xDiff,yDiff)&&Math.sqrt(Math.pow(xDiff,2)+Math.pow(yDiff,2))>tolerance){moved=true;}\ntail.checked=tail.checked||xWin||yWin;}\nfunction movedEnough(xDiff,yDiff){return xDiff>yDiff&&xDiff>1.5;}\nfunction onEnd(e){(options.onTouchEnd||noop)();var _touchEnabledFLAG=touchEnabledFLAG;tail.control=touchEnabledFLAG=false;if(_touchEnabledFLAG){tail.flow=false;}\nif(!_touchEnabledFLAG||(targetIsLinkFlag&&!tail.checked))return;e&&stopEvent(e);preventEvent=true;clearTimeout(preventEventTimeout);preventEventTimeout=setTimeout(function(){preventEvent=false;},1000);(options.onEnd||noop).call(el,{moved:moved,$target:$target,control:controlTouch,touch:touchFLAG,startEvent:startEvent,aborted:!e||e.type==='MSPointerCancel'});}\nfunction onOtherStart(){if(tail.flow)return;tail.flow=true;}\nfunction onOtherEnd(){if(!tail.flow)return;tail.flow=false;}\nif(MS_POINTER){addEvent(el,'MSPointerDown',onStart);addEvent(document,'MSPointerMove',onMove);addEvent(document,'MSPointerCancel',onEnd);addEvent(document,'MSPointerUp',onEnd);}else{addEvent(el,'touchstart',onStart);addEvent(el,'touchmove',onMove);addEvent(el,'touchend',onEnd);addEvent(document,'touchstart',onOtherStart,true);addEvent(document,'touchend',onOtherEnd);addEvent(document,'touchcancel',onOtherEnd);$WINDOW.on('scroll',onOtherEnd);$el.on('mousedown',onStart);$DOCUMENT.on('mousemove',onMove).on('mouseup',onEnd);}\nif(Modernizr.touch){dragDomEl='a';}else{dragDomEl='div';}\n$el.on('click',dragDomEl,function(e){tail.checked&&stopEvent(e);});return tail;}\nfunction moveOnTouch($el,options){var el=$el[0],elData=$el.data(),tail={},startCoo,coo,startElPos,moveElPos,edge,moveTrack,startTime,endTime,min,max,snap,dir,slowFLAG,controlFLAG,moved,tracked;function startTracking(e,noStop){tracked=true;startCoo=coo=(dir==='vertical')?e._y:e._x;startTime=e._now;moveTrack=[[startTime,startCoo]];startElPos=moveElPos=tail.noMove||noStop?0:stop($el,(options.getPos||noop)());(options.onStart||noop).call(el,e);}\nfunction onStart(e,result){min=tail.min;max=tail.max;snap=tail.snap,dir=tail.direction||'horizontal',$el.navdir=dir;slowFLAG=e.altKey;tracked=moved=false;controlFLAG=result.control;if(!controlFLAG&&!elData.sliding){startTracking(e);}}\nfunction onMove(e,result){if(!tail.noSwipe){if(!tracked){startTracking(e);}\ncoo=(dir==='vertical')?e._y:e._x;moveTrack.push([e._now,coo]);moveElPos=startElPos-(startCoo-coo);edge=findShadowEdge(moveElPos,min,max,dir);if(moveElPos<=min){moveElPos=edgeResistance(moveElPos,min);}else if(moveElPos>=max){moveElPos=edgeResistance(moveElPos,max);}\nif(!tail.noMove){$el.css(getTranslate(moveElPos,dir));if(!moved){moved=true;result.touch||MS_POINTER||$el.addClass(grabbingClass);}\n(options.onMove||noop).call(el,e,{pos:moveElPos,edge:edge});}}}\nfunction onEnd(result){if(tail.noSwipe&&result.moved)return;if(!tracked){startTracking(result.startEvent,true);}\nresult.touch||MS_POINTER||$el.removeClass(grabbingClass);endTime=$.now();var _backTimeIdeal=endTime-TOUCH_TIMEOUT,_backTime,_timeDiff,_timeDiffLast,backTime=null,backCoo,virtualPos,limitPos,newPos,overPos,time=TRANSITION_DURATION,speed,friction=options.friction;for(var _i=moveTrack.length-1;_i>=0;_i--){_backTime=moveTrack[_i][0];_timeDiff=Math.abs(_backTime-_backTimeIdeal);if(backTime===null||_timeDiff<_timeDiffLast){backTime=_backTime;backCoo=moveTrack[_i][1];}else if(backTime===_backTimeIdeal||_timeDiff>_timeDiffLast){break;}\n_timeDiffLast=_timeDiff;}\nnewPos=minMaxLimit(moveElPos,min,max);var cooDiff=backCoo-coo,forwardFLAG=cooDiff>=0,timeDiff=endTime-backTime,longTouchFLAG=timeDiff>TOUCH_TIMEOUT,swipeFLAG=!longTouchFLAG&&moveElPos!==startElPos&&newPos===moveElPos;if(snap){newPos=minMaxLimit(Math[swipeFLAG?(forwardFLAG?'floor':'ceil'):'round'](moveElPos / snap)*snap,min,max);min=max=newPos;}\nif(swipeFLAG&&(snap||newPos===moveElPos)){speed=-(cooDiff / timeDiff);time*=minMaxLimit(Math.abs(speed),options.timeLow,options.timeHigh);virtualPos=Math.round(moveElPos+speed*time / friction);if(!snap){newPos=virtualPos;}\nif(!forwardFLAG&&virtualPos>max||forwardFLAG&&virtualPos<min){limitPos=forwardFLAG?min:max;overPos=virtualPos-limitPos;if(!snap){newPos=limitPos;}\noverPos=minMaxLimit(newPos+overPos*.03,limitPos-50,limitPos+50);time=Math.abs((moveElPos-overPos)/(speed / friction));}}\ntime*=slowFLAG?10:1;(options.onEnd||noop).call(el,$.extend(result,{moved:result.moved||longTouchFLAG&&snap,pos:moveElPos,newPos:newPos,overPos:overPos,time:time,dir:dir}));}\ntail=$.extend(touch(options.$wrap,$.extend({},options,{onStart:onStart,onMove:onMove,onEnd:onEnd})),tail);return tail;}\nfunction wheel($el,options){var el=$el[0],lockFLAG,lastDirection,lastNow,tail={prevent:{}};addEvent(el,WHEEL,function(e){var yDelta=e.wheelDeltaY||-1*e.deltaY||0,xDelta=e.wheelDeltaX||-1*e.deltaX||0,xWin=Math.abs(xDelta)&&!Math.abs(yDelta),direction=getDirectionSign(xDelta<0),sameDirection=lastDirection===direction,now=$.now(),tooFast=now-lastNow<TOUCH_TIMEOUT;lastDirection=direction;lastNow=now;if(!xWin||!tail.ok||tail.prevent[direction]&&!lockFLAG){return;}else{stopEvent(e,true);if(lockFLAG&&sameDirection&&tooFast){return;}}\nif(options.shift){lockFLAG=true;clearTimeout(tail.t);tail.t=setTimeout(function(){lockFLAG=false;},SCROLL_LOCK_TIMEOUT);}\n(options.onEnd||noop)(e,options.shift?direction:xDelta);});return tail;}\njQuery.Fotorama=function($fotorama,opts){$HTML=$('html');$BODY=$('body');var that=this,stamp=$.now(),stampClass=_fotoramaClass+stamp,fotorama=$fotorama[0],data,dataFrameCount=1,fotoramaData=$fotorama.data(),size,$style=$('<style></style>'),$anchor=$(div(hiddenClass)),$wrap=$fotorama.find(cls(wrapClass)),$stage=$wrap.find(cls(stageClass)),stage=$stage[0],$stageShaft=$fotorama.find(cls(stageShaftClass)),$stageFrame=$(),$arrPrev=$fotorama.find(cls(arrPrevClass)),$arrNext=$fotorama.find(cls(arrNextClass)),$arrs=$fotorama.find(cls(arrClass)),$navWrap=$fotorama.find(cls(navWrapClass)),$nav=$navWrap.find(cls(navClass)),$navShaft=$nav.find(cls(navShaftClass)),$navFrame,$navDotFrame=$(),$navThumbFrame=$(),stageShaftData=$stageShaft.data(),navShaftData=$navShaft.data(),$thumbBorder=$fotorama.find(cls(thumbBorderClass)),$thumbArrLeft=$fotorama.find(cls(thumbArrLeft)),$thumbArrRight=$fotorama.find(cls(thumbArrRight)),$fullscreenIcon=$fotorama.find(cls(fullscreenIconClass)),fullscreenIcon=$fullscreenIcon[0],$videoPlay=$(div(videoPlayClass)),$videoClose=$fotorama.find(cls(videoCloseClass)),videoClose=$videoClose[0],$spinner=$fotorama.find(cls(fotoramaSpinnerClass)),$videoPlaying,activeIndex=false,activeFrame,activeIndexes,repositionIndex,dirtyIndex,lastActiveIndex,prevIndex,nextIndex,nextAutoplayIndex,startIndex,o_loop,o_nav,o_navThumbs,o_navTop,o_allowFullScreen,o_nativeFullScreen,o_fade,o_thumbSide,o_thumbSide2,o_transitionDuration,o_transition,o_shadows,o_rtl,o_keyboard,lastOptions={},measures={},measuresSetFLAG,stageShaftTouchTail={},stageWheelTail={},navShaftTouchTail={},navWheelTail={},scrollTop,scrollLeft,showedFLAG,pausedAutoplayFLAG,stoppedAutoplayFLAG,toDeactivate={},toDetach={},measuresStash,touchedFLAG,hoverFLAG,navFrameKey,stageLeft=0,fadeStack=[];$wrap[STAGE_FRAME_KEY]=$('<div class=\"'+stageFrameClass+'\"></div>');$wrap[NAV_THUMB_FRAME_KEY]=$($.Fotorama.jst.thumb());$wrap[NAV_DOT_FRAME_KEY]=$($.Fotorama.jst.dots());toDeactivate[STAGE_FRAME_KEY]=[];toDeactivate[NAV_THUMB_FRAME_KEY]=[];toDeactivate[NAV_DOT_FRAME_KEY]=[];toDetach[STAGE_FRAME_KEY]={};$wrap.addClass(CSS3?wrapCss3Class:wrapCss2Class);fotoramaData.fotorama=this;function checkForVideo(){$.each(data,function(i,dataFrame){if(!dataFrame.i){dataFrame.i=dataFrameCount++;var video=findVideoId(dataFrame.video,true);if(video){var thumbs={};dataFrame.video=video;if(!dataFrame.img&&!dataFrame.thumb){thumbs=getVideoThumbs(dataFrame,data,that);}else{dataFrame.thumbsReady=true;}\nupdateData(data,{img:thumbs.img,thumb:thumbs.thumb},dataFrame.i,that);}}});}\nfunction isVideo(){return $((that.activeFrame||{}).$stageFrame||{}).hasClass('fotorama-video-container');}\nfunction allowKey(key){return o_keyboard[key];}\nfunction setStagePosition(){if($stage!==undefined){if(opts.navdir=='vertical'){var padding=opts.thumbwidth+opts.thumbmargin;$stage.css('left',padding);$arrNext.css('right',padding);$fullscreenIcon.css('right',padding);$wrap.css('width',$wrap.css('width')+padding);$stageShaft.css('max-width',$wrap.width()-padding);}else{$stage.css('left','');$arrNext.css('right','');$fullscreenIcon.css('right','');$wrap.css('width',$wrap.css('width')+padding);$stageShaft.css('max-width','');}}}\nfunction bindGlobalEvents(FLAG){var keydownCommon='keydown.'+_fotoramaClass,localStamp=_fotoramaClass+stamp,keydownLocal='keydown.'+localStamp,keyupLocal='keyup.'+localStamp,resizeLocal='resize.'+localStamp+' '+'orientationchange.'+localStamp,showParams;if(FLAG){$DOCUMENT.on(keydownLocal,function(e){var catched,index;if($videoPlaying&&e.keyCode===27){catched=true;unloadVideo($videoPlaying,true,true);}else if(that.fullScreen||(opts.keyboard&&!that.index)){if(e.keyCode===27){catched=true;that.cancelFullScreen();}else if((e.shiftKey&&e.keyCode===32&&allowKey('space'))||(!e.altKey&&!e.metaKey&&e.keyCode===37&&allowKey('left'))||(e.keyCode===38&&allowKey('up')&&$(':focus').attr('data-gallery-role'))){that.longPress.progress();index='<';}else if((e.keyCode===32&&allowKey('space'))||(!e.altKey&&!e.metaKey&&e.keyCode===39&&allowKey('right'))||(e.keyCode===40&&allowKey('down')&&$(':focus').attr('data-gallery-role'))){that.longPress.progress();index='>';}else if(e.keyCode===36&&allowKey('home')){that.longPress.progress();index='<<';}else if(e.keyCode===35&&allowKey('end')){that.longPress.progress();index='>>';}}\n(catched||index)&&stopEvent(e);showParams={index:index,slow:e.altKey,user:true};index&&(that.longPress.inProgress?that.showWhileLongPress(showParams):that.show(showParams));});if(FLAG){$DOCUMENT.on(keyupLocal,function(e){if(that.longPress.inProgress){that.showEndLongPress({user:true});}\nthat.longPress.reset();});}\nif(!that.index){$DOCUMENT.off(keydownCommon).on(keydownCommon,'textarea, input, select',function(e){!$BODY.hasClass(_fullscreenClass)&&e.stopPropagation();});}\n$WINDOW.on(resizeLocal,that.resize);}else{$DOCUMENT.off(keydownLocal);$WINDOW.off(resizeLocal);}}\nfunction appendElements(FLAG){if(FLAG===appendElements.f)return;if(FLAG){$fotorama.addClass(_fotoramaClass+' '+stampClass).before($anchor).before($style);addInstance(that);}else{$anchor.detach();$style.detach();$fotorama.html(fotoramaData.urtext).removeClass(stampClass);hideInstance(that);}\nbindGlobalEvents(FLAG);appendElements.f=FLAG;}\nfunction setData(){data=that.data=data||clone(opts.data)||getDataFromHtml($fotorama);size=that.size=data.length;ready.ok&&opts.shuffle&&shuffle(data);checkForVideo();activeIndex=limitIndex(activeIndex);size&&appendElements(true);}\nfunction stageNoMove(){var _noMove=size<2||$videoPlaying;stageShaftTouchTail.noMove=_noMove||o_fade;stageShaftTouchTail.noSwipe=_noMove||!opts.swipe;!o_transition&&$stageShaft.toggleClass(grabClass,!opts.click&&!stageShaftTouchTail.noMove&&!stageShaftTouchTail.noSwipe);MS_POINTER&&$wrap.toggleClass(wrapPanYClass,!stageShaftTouchTail.noSwipe);}\nfunction setAutoplayInterval(interval){if(interval===true)interval='';opts.autoplay=Math.max(+interval||AUTOPLAY_INTERVAL,o_transitionDuration*1.5);}\nfunction updateThumbArrow(opt){if(opt.navarrows&&opt.nav==='thumbs'){$thumbArrLeft.show();$thumbArrRight.show();}else{$thumbArrLeft.hide();$thumbArrRight.hide();}}\nfunction getThumbsInSlide($el,opts){return Math.floor($wrap.width()/(opts.thumbwidth+opts.thumbmargin));}\nfunction setOptions(){if(!opts.nav||opts.nav==='dots'){opts.navdir='horizontal'}\nthat.options=opts=optionsToLowerCase(opts);thumbsPerSlide=getThumbsInSlide($wrap,opts);o_fade=(opts.transition==='crossfade'||opts.transition==='dissolve');o_loop=opts.loop&&(size>2||(o_fade&&(!o_transition||o_transition!=='slide')));o_transitionDuration=+opts.transitionduration||TRANSITION_DURATION;o_rtl=opts.direction==='rtl';o_keyboard=$.extend({},opts.keyboard&&KEYBOARD_OPTIONS,opts.keyboard);updateThumbArrow(opts);var classes={add:[],remove:[]};function addOrRemoveClass(FLAG,value){classes[FLAG?'add':'remove'].push(value);}\nif(size>1){o_nav=opts.nav;o_navTop=opts.navposition==='top';classes.remove.push(selectClass);$arrs.toggle(!!opts.arrows);}else{o_nav=false;$arrs.hide();}\narrsUpdate();stageWheelUpdate();thumbArrUpdate();if(opts.autoplay)setAutoplayInterval(opts.autoplay);o_thumbSide=numberFromMeasure(opts.thumbwidth)||THUMB_SIZE;o_thumbSide2=numberFromMeasure(opts.thumbheight)||THUMB_SIZE;stageWheelTail.ok=navWheelTail.ok=opts.trackpad&&!SLOW;stageNoMove();extendMeasures(opts,[measures]);o_navThumbs=o_nav==='thumbs';if($navWrap.filter(':hidden')&&!!o_nav){$navWrap.show();}\nif(o_navThumbs){frameDraw(size,'navThumb');$navFrame=$navThumbFrame;navFrameKey=NAV_THUMB_FRAME_KEY;setStyle($style,$.Fotorama.jst.style({w:o_thumbSide,h:o_thumbSide2,b:opts.thumbborderwidth,m:opts.thumbmargin,s:stamp,q:!COMPAT}));$nav.addClass(navThumbsClass).removeClass(navDotsClass);}else if(o_nav==='dots'){frameDraw(size,'navDot');$navFrame=$navDotFrame;navFrameKey=NAV_DOT_FRAME_KEY;$nav.addClass(navDotsClass).removeClass(navThumbsClass);}else{$navWrap.hide();o_nav=false;$nav.removeClass(navThumbsClass+' '+navDotsClass);}\nif(o_nav){if(o_navTop){$navWrap.insertBefore($stage);}else{$navWrap.insertAfter($stage);}\nframeAppend.nav=false;frameAppend($navFrame,$navShaft,'nav');}\no_allowFullScreen=opts.allowfullscreen;if(o_allowFullScreen){$fullscreenIcon.prependTo($stage);o_nativeFullScreen=FULLSCREEN&&o_allowFullScreen==='native';}else{$fullscreenIcon.detach();o_nativeFullScreen=false;}\naddOrRemoveClass(o_fade,wrapFadeClass);addOrRemoveClass(!o_fade,wrapSlideClass);addOrRemoveClass(!opts.captions,wrapNoCaptionsClass);addOrRemoveClass(o_rtl,wrapRtlClass);addOrRemoveClass(opts.arrows,wrapToggleArrowsClass);o_shadows=opts.shadows&&!SLOW;addOrRemoveClass(!o_shadows,wrapNoShadowsClass);$wrap.addClass(classes.add.join(' ')).removeClass(classes.remove.join(' '));lastOptions=$.extend({},opts);setStagePosition();}\nfunction normalizeIndex(index){return index<0?(size+(index%size))%size:index>=size?index%size:index;}\nfunction limitIndex(index){return minMaxLimit(index,0,size-1);}\nfunction edgeIndex(index){return o_loop?normalizeIndex(index):limitIndex(index);}\nfunction getPrevIndex(index){return index>0||o_loop?index-1:false;}\nfunction getNextIndex(index){return index<size-1||o_loop?index+1:false;}\nfunction setStageShaftMinmaxAndSnap(){stageShaftTouchTail.min=o_loop?-Infinity:-getPosByIndex(size-1,measures.w,opts.margin,repositionIndex);stageShaftTouchTail.max=o_loop?Infinity:-getPosByIndex(0,measures.w,opts.margin,repositionIndex);stageShaftTouchTail.snap=measures.w+opts.margin;}\nfunction setNavShaftMinMax(){var isVerticalDir=(opts.navdir==='vertical');var param=isVerticalDir?$navShaft.height():$navShaft.width();var mainParam=isVerticalDir?measures.h:measures.nw;navShaftTouchTail.min=Math.min(0,mainParam-param);navShaftTouchTail.max=0;navShaftTouchTail.direction=opts.navdir;$navShaft.toggleClass(grabClass,!(navShaftTouchTail.noMove=navShaftTouchTail.min===navShaftTouchTail.max));}\nfunction eachIndex(indexes,type,fn){if(typeof indexes==='number'){indexes=new Array(indexes);var rangeFLAG=true;}\nreturn $.each(indexes,function(i,index){if(rangeFLAG)index=i;if(typeof index==='number'){var dataFrame=data[normalizeIndex(index)];if(dataFrame){var key='$'+type+'Frame',$frame=dataFrame[key];fn.call(this,i,index,dataFrame,$frame,key,$frame&&$frame.data());}}});}\nfunction setMeasures(width,height,ratio,index){if(!measuresSetFLAG||(measuresSetFLAG==='*'&&index===startIndex)){width=measureIsValid(opts.width)||measureIsValid(width)||WIDTH;height=measureIsValid(opts.height)||measureIsValid(height)||HEIGHT;that.resize({width:width,ratio:opts.ratio||ratio||width / height},0,index!==startIndex&&'*');}}\nfunction loadImg(indexes,type,specialMeasures,again){eachIndex(indexes,type,function(i,index,dataFrame,$frame,key,frameData){if(!$frame)return;var fullFLAG=that.fullScreen&&!frameData.$full&&type==='stage';if(frameData.$img&&!again&&!fullFLAG)return;var img=new Image(),$img=$(img),imgData=$img.data();frameData[fullFLAG?'$full':'$img']=$img;var srcKey=type==='stage'?(fullFLAG?'full':'img'):'thumb',src=dataFrame[srcKey],dummy=fullFLAG?dataFrame['img']:dataFrame[type==='stage'?'thumb':'img'];if(type==='navThumb')$frame=frameData.$wrap;function triggerTriggerEvent(event){var _index=normalizeIndex(index);triggerEvent(event,{index:_index,src:src,frame:data[_index]});}\nfunction error(){$img.remove();$.Fotorama.cache[src]='error';if((!dataFrame.html||type!=='stage')&&dummy&&dummy!==src){dataFrame[srcKey]=src=dummy;frameData.$full=null;loadImg([index],type,specialMeasures,true);}else{if(src&&!dataFrame.html&&!fullFLAG){$frame.trigger('f:error').removeClass(loadingClass).addClass(errorClass);triggerTriggerEvent('error');}else if(type==='stage'){$frame.trigger('f:load').removeClass(loadingClass+' '+errorClass).addClass(loadedClass);triggerTriggerEvent('load');setMeasures();}\nframeData.state='error';if(size>1&&data[index]===dataFrame&&!dataFrame.html&&!dataFrame.deleted&&!dataFrame.video&&!fullFLAG){dataFrame.deleted=true;that.splice(index,1);}}}\nfunction loaded(){$.Fotorama.measures[src]=imgData.measures=$.Fotorama.measures[src]||{width:img.width,height:img.height,ratio:img.width / img.height};setMeasures(imgData.measures.width,imgData.measures.height,imgData.measures.ratio,index);$img.off('load error').addClass(''+(fullFLAG?imgFullClass:imgClass)).attr('aria-hidden','false').prependTo($frame);if($frame.hasClass(stageFrameClass)&&!$frame.hasClass(videoContainerClass)){$frame.attr(\"href\",$img.attr(\"src\"));}\nfit($img,($.isFunction(specialMeasures)?specialMeasures():specialMeasures)||measures);$.Fotorama.cache[src]=frameData.state='loaded';setTimeout(function(){$frame.trigger('f:load').removeClass(loadingClass+' '+errorClass).addClass(loadedClass+' '+(fullFLAG?loadedFullClass:loadedImgClass));if(type==='stage'){triggerTriggerEvent('load');}else if(dataFrame.thumbratio===AUTO||!dataFrame.thumbratio&&opts.thumbratio===AUTO){dataFrame.thumbratio=imgData.measures.ratio;reset();}},0);}\nif(!src){error();return;}\nfunction waitAndLoad(){var _i=10;waitFor(function(){return!touchedFLAG||!_i--&&!SLOW;},function(){loaded();});}\nif(!$.Fotorama.cache[src]){$.Fotorama.cache[src]='*';$img.on('load',waitAndLoad).on('error',error);}else{(function justWait(){if($.Fotorama.cache[src]==='error'){error();}else if($.Fotorama.cache[src]==='loaded'){setTimeout(waitAndLoad,0);}else{setTimeout(justWait,100);}})();}\nframeData.state='';img.src=src;if(frameData.data.caption){img.alt=frameData.data.caption||\"\";}\nif(frameData.data.full){$(img).data('original',frameData.data.full);}\nif(UTIL.isExpectedCaption(dataFrame,opts.showcaption)){$(img).attr('aria-labelledby',dataFrame.labelledby);}});}\nfunction updateFotoramaState(){var $frame=activeFrame[STAGE_FRAME_KEY];if($frame&&!$frame.data().state){$spinner.addClass(spinnerShowClass);$frame.on('f:load f:error',function(){$frame.off('f:load f:error');$spinner.removeClass(spinnerShowClass);});}}\nfunction addNavFrameEvents(frame){addEnterUp(frame,onNavFrameClick);addFocus(frame,function(){setTimeout(function(){lockScroll($nav);},0);slideNavShaft({time:o_transitionDuration,guessIndex:$(this).data().eq,minMax:navShaftTouchTail});});}\nfunction frameDraw(indexes,type){eachIndex(indexes,type,function(i,index,dataFrame,$frame,key,frameData){if($frame)return;$frame=dataFrame[key]=$wrap[key].clone();frameData=$frame.data();frameData.data=dataFrame;var frame=$frame[0],labelledbyValue=\"labelledby\"+$.now();if(type==='stage'){if(dataFrame.html){$('<div class=\"'+htmlClass+'\"></div>').append(dataFrame._html?$(dataFrame.html).removeAttr('id').html(dataFrame._html):dataFrame.html).appendTo($frame);}\nif(dataFrame.id){labelledbyValue=dataFrame.id||labelledbyValue;}\ndataFrame.labelledby=labelledbyValue;if(UTIL.isExpectedCaption(dataFrame,opts.showcaption)){$($.Fotorama.jst.frameCaption({caption:dataFrame.caption,labelledby:labelledbyValue})).appendTo($frame);}\ndataFrame.video&&$frame.addClass(stageFrameVideoClass).append($videoPlay.clone());addFocus(frame,function(e){setTimeout(function(){lockScroll($stage);},0);clickToShow({index:frameData.eq,user:true},e);});$stageFrame=$stageFrame.add($frame);}else if(type==='navDot'){addNavFrameEvents(frame);$navDotFrame=$navDotFrame.add($frame);}else if(type==='navThumb'){addNavFrameEvents(frame);frameData.$wrap=$frame.children(':first');$navThumbFrame=$navThumbFrame.add($frame);if(dataFrame.video){frameData.$wrap.append($videoPlay.clone());}}});}\nfunction callFit($img,measuresToFit){return $img&&$img.length&&fit($img,measuresToFit);}\nfunction stageFramePosition(indexes){eachIndex(indexes,'stage',function(i,index,dataFrame,$frame,key,frameData){if(!$frame)return;var normalizedIndex=normalizeIndex(index);frameData.eq=normalizedIndex;toDetach[STAGE_FRAME_KEY][normalizedIndex]=$frame.css($.extend({left:o_fade?0:getPosByIndex(index,measures.w,opts.margin,repositionIndex)},o_fade&&getDuration(0)));if(isDetached($frame[0])){$frame.appendTo($stageShaft);unloadVideo(dataFrame.$video);}\ncallFit(frameData.$img,measures);callFit(frameData.$full,measures);if($frame.hasClass(stageFrameClass)&&!($frame.attr('aria-hidden')===\"false\"&&$frame.hasClass(activeClass))){$frame.attr('aria-hidden','true');}});}\nfunction thumbsDraw(pos,loadFLAG){var leftLimit,rightLimit,exceedLimit;if(o_nav!=='thumbs'||isNaN(pos))return;leftLimit=-pos;rightLimit=-pos+measures.nw;if(opts.navdir==='vertical'){pos=pos-opts.thumbheight;rightLimit=-pos+measures.h;}\n$navThumbFrame.each(function(){var $this=$(this),thisData=$this.data(),eq=thisData.eq,getSpecialMeasures=function(){return{h:o_thumbSide2,w:thisData.w}},specialMeasures=getSpecialMeasures(),exceedLimit=opts.navdir==='vertical'?thisData.t>rightLimit:thisData.l>rightLimit;specialMeasures.w=thisData.w;if((opts.navdir!=='vertical'&&thisData.l+thisData.w<leftLimit)||exceedLimit||callFit(thisData.$img,specialMeasures))return;loadFLAG&&loadImg([eq],'navThumb',getSpecialMeasures);});}\nfunction frameAppend($frames,$shaft,type){if(!frameAppend[type]){var thumbsFLAG=type==='nav'&&o_navThumbs,left=0,top=0;$shaft.append($frames.filter(function(){var actual,$this=$(this),frameData=$this.data();for(var _i=0,_l=data.length;_i<_l;_i++){if(frameData.data===data[_i]){actual=true;frameData.eq=_i;break;}}\nreturn actual||$this.remove()&&false;}).sort(function(a,b){return $(a).data().eq-$(b).data().eq;}).each(function(){var $this=$(this),frameData=$this.data();UTIL.setThumbAttr($this,frameData.data.caption,\"aria-label\");}).each(function(){if(!thumbsFLAG)return;var $this=$(this),frameData=$this.data(),thumbwidth=Math.round(o_thumbSide2*frameData.data.thumbratio)||o_thumbSide,thumbheight=Math.round(o_thumbSide / frameData.data.thumbratio)||o_thumbSide2;frameData.t=top;frameData.h=thumbheight;frameData.l=left;frameData.w=thumbwidth;$this.css({width:thumbwidth});top+=thumbheight+opts.thumbmargin;left+=thumbwidth+opts.thumbmargin;}));frameAppend[type]=true;}}\nfunction getDirection(x){return x-stageLeft>measures.w / 3;}\nfunction disableDirrection(i){return!o_loop&&(!(activeIndex+i)||!(activeIndex-size+i))&&!$videoPlaying;}\nfunction arrsUpdate(){var disablePrev=disableDirrection(0),disableNext=disableDirrection(1);$arrPrev.toggleClass(arrDisabledClass,disablePrev).attr(disableAttr(disablePrev,false));$arrNext.toggleClass(arrDisabledClass,disableNext).attr(disableAttr(disableNext,false));}\nfunction thumbArrUpdate(){var isLeftDisable=false,isRightDisable=false;if(opts.navtype==='thumbs'&&!opts.loop){(activeIndex==0)?isLeftDisable=true:isLeftDisable=false;(activeIndex==opts.data.length-1)?isRightDisable=true:isRightDisable=false;}\nif(opts.navtype==='slides'){var pos=readPosition($navShaft,opts.navdir);pos>=navShaftTouchTail.max?isLeftDisable=true:isLeftDisable=false;pos<=Math.round(navShaftTouchTail.min)?isRightDisable=true:isRightDisable=false;}\n$thumbArrLeft.toggleClass(arrDisabledClass,isLeftDisable).attr(disableAttr(isLeftDisable,true));$thumbArrRight.toggleClass(arrDisabledClass,isRightDisable).attr(disableAttr(isRightDisable,true));}\nfunction stageWheelUpdate(){if(stageWheelTail.ok){stageWheelTail.prevent={'<':disableDirrection(0),'>':disableDirrection(1)};}}\nfunction getNavFrameBounds($navFrame){var navFrameData=$navFrame.data(),left,top,width,height;if(o_navThumbs){left=navFrameData.l;top=navFrameData.t;width=navFrameData.w;height=navFrameData.h;}else{left=$navFrame.position().left;width=$navFrame.width();}\nvar horizontalBounds={c:left+width / 2,min:-left+opts.thumbmargin*10,max:-left+measures.w-width-opts.thumbmargin*10};var verticalBounds={c:top+height / 2,min:-top+opts.thumbmargin*10,max:-top+measures.h-height-opts.thumbmargin*10};return opts.navdir==='vertical'?verticalBounds:horizontalBounds;}\nfunction slideThumbBorder(time){var navFrameData=activeFrame[navFrameKey].data();slide($thumbBorder,{time:time*1.2,pos:(opts.navdir==='vertical'?navFrameData.t:navFrameData.l),width:navFrameData.w,height:navFrameData.h,direction:opts.navdir});}\nfunction slideNavShaft(options){var $guessNavFrame=data[options.guessIndex][navFrameKey],typeOfAnimation=opts.navtype;var overflowFLAG,time,minMax,boundTop,boundLeft,l,pos,x;if($guessNavFrame){if(typeOfAnimation==='thumbs'){overflowFLAG=navShaftTouchTail.min!==navShaftTouchTail.max;minMax=options.minMax||overflowFLAG&&getNavFrameBounds(activeFrame[navFrameKey]);boundTop=overflowFLAG&&(options.keep&&slideNavShaft.t?slideNavShaft.l:minMaxLimit((options.coo||measures.nw / 2)-getNavFrameBounds($guessNavFrame).c,minMax.min,minMax.max));boundLeft=overflowFLAG&&(options.keep&&slideNavShaft.l?slideNavShaft.l:minMaxLimit((options.coo||measures.nw / 2)-getNavFrameBounds($guessNavFrame).c,minMax.min,minMax.max));l=(opts.navdir==='vertical'?boundTop:boundLeft);pos=overflowFLAG&&minMaxLimit(l,navShaftTouchTail.min,navShaftTouchTail.max)||0;time=options.time*1.1;slide($navShaft,{time:time,pos:pos,direction:opts.navdir,onEnd:function(){thumbsDraw(pos,true);thumbArrUpdate();}});setShadow($nav,findShadowEdge(pos,navShaftTouchTail.min,navShaftTouchTail.max,opts.navdir));slideNavShaft.l=l;}else{x=readPosition($navShaft,opts.navdir);time=options.time*1.11;pos=validateSlidePos(opts,navShaftTouchTail,options.guessIndex,x,$guessNavFrame,$navWrap,opts.navdir);slide($navShaft,{time:time,pos:pos,direction:opts.navdir,onEnd:function(){thumbsDraw(pos,true);thumbArrUpdate();}});setShadow($nav,findShadowEdge(pos,navShaftTouchTail.min,navShaftTouchTail.max,opts.navdir));}}}\nfunction navUpdate(){deactivateFrames(navFrameKey);toDeactivate[navFrameKey].push(activeFrame[navFrameKey].addClass(activeClass).attr('data-active',true));}\nfunction deactivateFrames(key){var _toDeactivate=toDeactivate[key];while(_toDeactivate.length){_toDeactivate.shift().removeClass(activeClass).attr('data-active',false);}}\nfunction detachFrames(key){var _toDetach=toDetach[key];$.each(activeIndexes,function(i,index){delete _toDetach[normalizeIndex(index)];});$.each(_toDetach,function(index,$frame){delete _toDetach[index];$frame.detach();});}\nfunction stageShaftReposition(skipOnEnd){repositionIndex=dirtyIndex=activeIndex;var $frame=activeFrame[STAGE_FRAME_KEY];if($frame){deactivateFrames(STAGE_FRAME_KEY);toDeactivate[STAGE_FRAME_KEY].push($frame.addClass(activeClass).attr('data-active',true));if($frame.hasClass(stageFrameClass)){$frame.attr('aria-hidden','false');}\nskipOnEnd||that.showStage.onEnd(true);stop($stageShaft,0,true);detachFrames(STAGE_FRAME_KEY);stageFramePosition(activeIndexes);setStageShaftMinmaxAndSnap();setNavShaftMinMax();addEnterUp($stageShaft[0],function(){if(!$fotorama.hasClass(fullscreenClass)){that.requestFullScreen();$fullscreenIcon.focus();}});}}\nfunction extendMeasures(options,measuresArray){if(!options)return;$.each(measuresArray,function(i,measures){if(!measures)return;$.extend(measures,{width:options.width||measures.width,height:options.height,minwidth:options.minwidth,maxwidth:options.maxwidth,minheight:options.minheight,maxheight:options.maxheight,ratio:getRatio(options.ratio)})});}\nfunction triggerEvent(event,extra){$fotorama.trigger(_fotoramaClass+':'+event,[that,extra]);}\nfunction onTouchStart(){clearTimeout(onTouchEnd.t);touchedFLAG=1;if(opts.stopautoplayontouch){that.stopAutoplay();}else{pausedAutoplayFLAG=true;}}\nfunction onTouchEnd(){if(!touchedFLAG)return;if(!opts.stopautoplayontouch){releaseAutoplay();changeAutoplay();}\nonTouchEnd.t=setTimeout(function(){touchedFLAG=0;},TRANSITION_DURATION+TOUCH_TIMEOUT);}\nfunction releaseAutoplay(){pausedAutoplayFLAG=!!($videoPlaying||stoppedAutoplayFLAG);}\nfunction changeAutoplay(){clearTimeout(changeAutoplay.t);waitFor.stop(changeAutoplay.w);if(!opts.autoplay||pausedAutoplayFLAG){if(that.autoplay){that.autoplay=false;triggerEvent('stopautoplay');}\nreturn;}\nif(!that.autoplay){that.autoplay=true;triggerEvent('startautoplay');}\nvar _activeIndex=activeIndex;var frameData=activeFrame[STAGE_FRAME_KEY].data();changeAutoplay.w=waitFor(function(){return frameData.state||_activeIndex!==activeIndex;},function(){changeAutoplay.t=setTimeout(function(){if(pausedAutoplayFLAG||_activeIndex!==activeIndex)return;var _nextAutoplayIndex=nextAutoplayIndex,nextFrameData=data[_nextAutoplayIndex][STAGE_FRAME_KEY].data();changeAutoplay.w=waitFor(function(){return nextFrameData.state||_nextAutoplayIndex!==nextAutoplayIndex;},function(){if(pausedAutoplayFLAG||_nextAutoplayIndex!==nextAutoplayIndex)return;that.show(o_loop?getDirectionSign(!o_rtl):nextAutoplayIndex);});},opts.autoplay);});}\nthat.startAutoplay=function(interval){if(that.autoplay)return this;pausedAutoplayFLAG=stoppedAutoplayFLAG=false;setAutoplayInterval(interval||opts.autoplay);changeAutoplay();return this;};that.stopAutoplay=function(){if(that.autoplay){pausedAutoplayFLAG=stoppedAutoplayFLAG=true;changeAutoplay();}\nreturn this;};that.showSlide=function(slideDir){var currentPosition=readPosition($navShaft,opts.navdir),pos,time=500*1.1,size=opts.navdir==='horizontal'?opts.thumbwidth:opts.thumbheight,onEnd=function(){thumbArrUpdate();};if(slideDir==='next'){pos=currentPosition-(size+opts.margin)*thumbsPerSlide;}\nif(slideDir==='prev'){pos=currentPosition+(size+opts.margin)*thumbsPerSlide;}\npos=validateRestrictions(pos,navShaftTouchTail);thumbsDraw(pos,true);slide($navShaft,{time:time,pos:pos,direction:opts.navdir,onEnd:onEnd});};that.showWhileLongPress=function(options){if(that.longPress.singlePressInProgress){return;}\nvar index=calcActiveIndex(options);calcGlobalIndexes(index);var time=calcTime(options)/ 50;var _activeFrame=activeFrame;that.activeFrame=activeFrame=data[activeIndex];var silent=_activeFrame===activeFrame&&!options.user;that.showNav(silent,options,time);return this;};that.showEndLongPress=function(options){if(that.longPress.singlePressInProgress){return;}\nvar index=calcActiveIndex(options);calcGlobalIndexes(index);var time=calcTime(options)/ 50;var _activeFrame=activeFrame;that.activeFrame=activeFrame=data[activeIndex];var silent=_activeFrame===activeFrame&&!options.user;that.showStage(silent,options,time);showedFLAG=typeof lastActiveIndex!=='undefined'&&lastActiveIndex!==activeIndex;lastActiveIndex=activeIndex;return this;};function calcActiveIndex(options){var index;if(typeof options!=='object'){index=options;options={};}else{index=options.index;}\nindex=index==='>'?dirtyIndex+1:index==='<'?dirtyIndex-1:index==='<<'?0:index==='>>'?size-1:index;index=isNaN(index)?undefined:index;index=typeof index==='undefined'?activeIndex||0:index;return index;}\nfunction calcGlobalIndexes(index){that.activeIndex=activeIndex=edgeIndex(index);prevIndex=getPrevIndex(activeIndex);nextIndex=getNextIndex(activeIndex);nextAutoplayIndex=normalizeIndex(activeIndex+(o_rtl?-1:1));activeIndexes=[activeIndex,prevIndex,nextIndex];dirtyIndex=o_loop?index:activeIndex;}\nfunction calcTime(options){var diffIndex=Math.abs(lastActiveIndex-dirtyIndex),time=getNumber(options.time,function(){return Math.min(o_transitionDuration*(1+(diffIndex-1)/ 12),o_transitionDuration*2);});if(options.slow){time*=10;}\nreturn time;}\nthat.showStage=function(silent,options,time,e){if(e!==undefined&&e.target.tagName=='IFRAME'){return;}\nunloadVideo($videoPlaying,activeFrame.i!==data[normalizeIndex(repositionIndex)].i);frameDraw(activeIndexes,'stage');stageFramePosition(SLOW?[dirtyIndex]:[dirtyIndex,getPrevIndex(dirtyIndex),getNextIndex(dirtyIndex)]);updateTouchTails('go',true);silent||triggerEvent('show',{user:options.user,time:time});pausedAutoplayFLAG=true;var overPos=options.overPos;var onEnd=that.showStage.onEnd=function(skipReposition){if(onEnd.ok)return;onEnd.ok=true;skipReposition||stageShaftReposition(true);if(!silent){triggerEvent('showend',{user:options.user});}\nif(!skipReposition&&o_transition&&o_transition!==opts.transition){that.setOptions({transition:o_transition});o_transition=false;return;}\nupdateFotoramaState();loadImg(activeIndexes,'stage');updateTouchTails('go',false);stageWheelUpdate();stageCursor();releaseAutoplay();changeAutoplay();if(that.fullScreen){activeFrame[STAGE_FRAME_KEY].find('.'+imgFullClass).attr('aria-hidden',false);activeFrame[STAGE_FRAME_KEY].find('.'+imgClass).attr('aria-hidden',true)}else{activeFrame[STAGE_FRAME_KEY].find('.'+imgFullClass).attr('aria-hidden',true);activeFrame[STAGE_FRAME_KEY].find('.'+imgClass).attr('aria-hidden',false)}};if(!o_fade){slide($stageShaft,{pos:-getPosByIndex(dirtyIndex,measures.w,opts.margin,repositionIndex),overPos:overPos,time:time,onEnd:onEnd});}else{var $activeFrame=activeFrame[STAGE_FRAME_KEY],$prevActiveFrame=data[lastActiveIndex]&&activeIndex!==lastActiveIndex?data[lastActiveIndex][STAGE_FRAME_KEY]:null;fade($activeFrame,$prevActiveFrame,$stageFrame,{time:time,method:opts.transition,onEnd:onEnd},fadeStack);}\narrsUpdate();};that.showNav=function(silent,options,time){thumbArrUpdate();if(o_nav){navUpdate();var guessIndex=limitIndex(activeIndex+minMaxLimit(dirtyIndex-lastActiveIndex,-1,1));slideNavShaft({time:time,coo:guessIndex!==activeIndex&&options.coo,guessIndex:typeof options.coo!=='undefined'?guessIndex:activeIndex,keep:silent});if(o_navThumbs)slideThumbBorder(time);}};that.show=function(options,e){that.longPress.singlePressInProgress=true;var index=calcActiveIndex(options);calcGlobalIndexes(index);var time=calcTime(options);var _activeFrame=activeFrame;that.activeFrame=activeFrame=data[activeIndex];var silent=_activeFrame===activeFrame&&!options.user;that.showStage(silent,options,time,e);that.showNav(silent,options,time);showedFLAG=typeof lastActiveIndex!=='undefined'&&lastActiveIndex!==activeIndex;lastActiveIndex=activeIndex;that.longPress.singlePressInProgress=false;return this;};that.requestFullScreen=function(){if(o_allowFullScreen&&!that.fullScreen){if(isVideo()){return;}\nscrollTop=$WINDOW.scrollTop();scrollLeft=$WINDOW.scrollLeft();lockScroll($WINDOW);updateTouchTails('x',true);measuresStash=$.extend({},measures);$fotorama.addClass(fullscreenClass).appendTo($BODY.addClass(_fullscreenClass));$HTML.addClass(_fullscreenClass);unloadVideo($videoPlaying,true,true);that.fullScreen=true;if(o_nativeFullScreen){fullScreenApi.request(fotorama);}\nloadImg(activeIndexes,'stage');updateFotoramaState();triggerEvent('fullscreenenter');that.resize();if(!('ontouchstart'in window)){$fullscreenIcon.focus();}}\nreturn this;};function cancelFullScreen(){if(that.fullScreen){that.fullScreen=false;if(FULLSCREEN){fullScreenApi.cancel(fotorama);}\n$BODY.removeClass(_fullscreenClass);$HTML.removeClass(_fullscreenClass);$fotorama.removeClass(fullscreenClass).insertAfter($anchor);measures=$.extend({},measuresStash);unloadVideo($videoPlaying,true,true);updateTouchTails('x',false);that.resize();loadImg(activeIndexes,'stage');lockScroll($WINDOW,scrollLeft,scrollTop);triggerEvent('fullscreenexit');}}\nthat.cancelFullScreen=function(){if(o_nativeFullScreen&&fullScreenApi.is()){fullScreenApi.cancel(document);}else{cancelFullScreen();}\nreturn this;};that.toggleFullScreen=function(){return that[(that.fullScreen?'cancel':'request')+'FullScreen']();};that.resize=function(options){if(!data)return this;var time=arguments[1]||0,setFLAG=arguments[2];thumbsPerSlide=getThumbsInSlide($wrap,opts);extendMeasures(!that.fullScreen?optionsToLowerCase(options):{width:$(window).width(),maxwidth:null,minwidth:null,height:$(window).height(),maxheight:null,minheight:null},[measures,setFLAG||that.fullScreen||opts]);var width=measures.width,height=measures.height,ratio=measures.ratio,windowHeight=$WINDOW.height()-(o_nav?$nav.height():0);if(measureIsValid(width)){$wrap.css({width:''});$stage.css({width:''});$stageShaft.css({width:''});$nav.css({width:''});$wrap.css({minWidth:measures.minwidth||0,maxWidth:measures.maxwidth||MAX_WIDTH});if(o_nav==='dots'){$navWrap.hide();}\nwidth=measures.W=measures.w=$wrap.width();measures.nw=o_nav&&numberFromWhatever(opts.navwidth,width)||width;$stageShaft.css({width:measures.w,marginLeft:(measures.W-measures.w)/ 2});height=numberFromWhatever(height,windowHeight);height=height||(ratio&&width / ratio);if(height){width=Math.round(width);height=measures.h=Math.round(minMaxLimit(height,numberFromWhatever(measures.minheight,windowHeight),numberFromWhatever(measures.maxheight,windowHeight)));$stage.css({'width':width,'height':height});if(opts.navdir==='vertical'&&!that.fullscreen){$nav.width(opts.thumbwidth+opts.thumbmargin*2);}\nif(opts.navdir==='horizontal'&&!that.fullscreen){$nav.height(opts.thumbheight+opts.thumbmargin*2);}\nif(o_nav==='dots'){$nav.width(width).height('auto');$navWrap.show();}\nif(opts.navdir==='vertical'&&that.fullScreen){$stage.css('height',$WINDOW.height());}\nif(opts.navdir==='horizontal'&&that.fullScreen){$stage.css('height',$WINDOW.height()-$nav.height());}\nif(o_nav){switch(opts.navdir){case'vertical':$navWrap.removeClass(navShafthorizontalClass);$navWrap.removeClass(navShaftListClass);$navWrap.addClass(navShaftVerticalClass);$nav.stop().animate({height:measures.h,width:opts.thumbwidth},time);break;case'list':$navWrap.removeClass(navShaftVerticalClass);$navWrap.removeClass(navShafthorizontalClass);$navWrap.addClass(navShaftListClass);break;default:$navWrap.removeClass(navShaftVerticalClass);$navWrap.removeClass(navShaftListClass);$navWrap.addClass(navShafthorizontalClass);$nav.stop().animate({width:measures.nw},time);break;}\nstageShaftReposition();slideNavShaft({guessIndex:activeIndex,time:time,keep:true});if(o_navThumbs&&frameAppend.nav)slideThumbBorder(time);}\nmeasuresSetFLAG=setFLAG||true;ready.ok=true;ready();}}\nstageLeft=$stage.offset().left;setStagePosition();return this;};that.setOptions=function(options){$.extend(opts,options);reset();return this;};that.shuffle=function(){data&&shuffle(data)&&reset();return this;};function setShadow($el,edge){if(o_shadows){$el.removeClass(shadowsLeftClass+' '+shadowsRightClass);$el.removeClass(shadowsTopClass+' '+shadowsBottomClass);edge&&!$videoPlaying&&$el.addClass(edge.replace(/^|\\s/g,' '+shadowsClass+'--'));}}\nthat.longPress={threshold:1,count:0,thumbSlideTime:20,progress:function(){if(!this.inProgress){this.count++;this.inProgress=this.count>this.threshold;}},end:function(){if(this.inProgress){this.isEnded=true}},reset:function(){this.count=0;this.inProgress=false;this.isEnded=false;}};that.destroy=function(){that.cancelFullScreen();that.stopAutoplay();data=that.data=null;appendElements();activeIndexes=[];detachFrames(STAGE_FRAME_KEY);reset.ok=false;return this;};that.playVideo=function(){var dataFrame=activeFrame,video=dataFrame.video,_activeIndex=activeIndex;if(typeof video==='object'&&dataFrame.videoReady){o_nativeFullScreen&&that.fullScreen&&that.cancelFullScreen();waitFor(function(){return!fullScreenApi.is()||_activeIndex!==activeIndex;},function(){if(_activeIndex===activeIndex){dataFrame.$video=dataFrame.$video||$(div(videoClass)).append(createVideoFrame(video));dataFrame.$video.appendTo(dataFrame[STAGE_FRAME_KEY]);$wrap.addClass(wrapVideoClass);$videoPlaying=dataFrame.$video;stageNoMove();$arrs.blur();$fullscreenIcon.blur();triggerEvent('loadvideo');}});}\nreturn this;};that.stopVideo=function(){unloadVideo($videoPlaying,true,true);return this;};that.spliceByIndex=function(index,newImgObj){newImgObj.i=index+1;newImgObj.img&&$.ajax({url:newImgObj.img,type:'HEAD',success:function(){data.splice(index,1,newImgObj);reset();}});};function unloadVideo($video,unloadActiveFLAG,releaseAutoplayFLAG){if(unloadActiveFLAG){$wrap.removeClass(wrapVideoClass);$videoPlaying=false;stageNoMove();}\nif($video&&$video!==$videoPlaying){$video.remove();triggerEvent('unloadvideo');}\nif(releaseAutoplayFLAG){releaseAutoplay();changeAutoplay();}}\nfunction toggleControlsClass(FLAG){$wrap.toggleClass(wrapNoControlsClass,FLAG);}\nfunction stageCursor(e){if(stageShaftTouchTail.flow)return;var x=e?e.pageX:stageCursor.x,pointerFLAG=x&&!disableDirrection(getDirection(x))&&opts.click;if(stageCursor.p!==pointerFLAG&&$stage.toggleClass(pointerClass,pointerFLAG)){stageCursor.p=pointerFLAG;stageCursor.x=x;}}\n$stage.on('mousemove',stageCursor);function clickToShow(showOptions,e){clearTimeout(clickToShow.t);if(opts.clicktransition&&opts.clicktransition!==opts.transition){setTimeout(function(){var _o_transition=opts.transition;that.setOptions({transition:opts.clicktransition});o_transition=_o_transition;clickToShow.t=setTimeout(function(){that.show(showOptions);},10);},0);}else{that.show(showOptions,e);}}\nfunction onStageTap(e,toggleControlsFLAG){var target=e.target,$target=$(target);if($target.hasClass(videoPlayClass)){that.playVideo();}else if(target===fullscreenIcon){that.toggleFullScreen();}else if($videoPlaying){target===videoClose&&unloadVideo($videoPlaying,true,true);}else if(!$fotorama.hasClass(fullscreenClass)){that.requestFullScreen();}}\nfunction updateTouchTails(key,value){stageShaftTouchTail[key]=navShaftTouchTail[key]=value;}\nstageShaftTouchTail=moveOnTouch($stageShaft,{onStart:onTouchStart,onMove:function(e,result){setShadow($stage,result.edge);},onTouchEnd:onTouchEnd,onEnd:function(result){var toggleControlsFLAG;setShadow($stage);toggleControlsFLAG=(MS_POINTER&&!hoverFLAG||result.touch)&&opts.arrows;if((result.moved||(toggleControlsFLAG&&result.pos!==result.newPos&&!result.control))&&result.$target[0]!==$fullscreenIcon[0]){var index=getIndexByPos(result.newPos,measures.w,opts.margin,repositionIndex);that.show({index:index,time:o_fade?o_transitionDuration:result.time,overPos:result.overPos,user:true});}else if(!result.aborted&&!result.control){onStageTap(result.startEvent,toggleControlsFLAG);}},timeLow:1,timeHigh:1,friction:2,select:'.'+selectClass+', .'+selectClass+' *',$wrap:$stage,direction:'horizontal'});navShaftTouchTail=moveOnTouch($navShaft,{onStart:onTouchStart,onMove:function(e,result){setShadow($nav,result.edge);},onTouchEnd:onTouchEnd,onEnd:function(result){function onEnd(){slideNavShaft.l=result.newPos;releaseAutoplay();changeAutoplay();thumbsDraw(result.newPos,true);thumbArrUpdate();}\nif(!result.moved){var target=result.$target.closest('.'+navFrameClass,$navShaft)[0];target&&onNavFrameClick.call(target,result.startEvent);}else if(result.pos!==result.newPos){pausedAutoplayFLAG=true;slide($navShaft,{time:result.time,pos:result.newPos,overPos:result.overPos,direction:opts.navdir,onEnd:onEnd});thumbsDraw(result.newPos);o_shadows&&setShadow($nav,findShadowEdge(result.newPos,navShaftTouchTail.min,navShaftTouchTail.max,result.dir));}else{onEnd();}},timeLow:.5,timeHigh:2,friction:5,$wrap:$nav,direction:opts.navdir});stageWheelTail=wheel($stage,{shift:true,onEnd:function(e,direction){onTouchStart();onTouchEnd();that.show({index:direction,slow:e.altKey})}});navWheelTail=wheel($nav,{onEnd:function(e,direction){onTouchStart();onTouchEnd();var newPos=stop($navShaft)+direction*.25;$navShaft.css(getTranslate(minMaxLimit(newPos,navShaftTouchTail.min,navShaftTouchTail.max),opts.navdir));o_shadows&&setShadow($nav,findShadowEdge(newPos,navShaftTouchTail.min,navShaftTouchTail.max,opts.navdir));navWheelTail.prevent={'<':newPos>=navShaftTouchTail.max,'>':newPos<=navShaftTouchTail.min};clearTimeout(navWheelTail.t);navWheelTail.t=setTimeout(function(){slideNavShaft.l=newPos;thumbsDraw(newPos,true)},TOUCH_TIMEOUT);thumbsDraw(newPos);}});$wrap.hover(function(){setTimeout(function(){if(touchedFLAG)return;toggleControlsClass(!(hoverFLAG=true));},0);},function(){if(!hoverFLAG)return;toggleControlsClass(!(hoverFLAG=false));});function onNavFrameClick(e){var index=$(this).data().eq;if(opts.navtype==='thumbs'){clickToShow({index:index,slow:e.altKey,user:true,coo:e._x-$nav.offset().left});}else{clickToShow({index:index,slow:e.altKey,user:true});}}\nfunction onArrClick(e){clickToShow({index:$arrs.index(this)?'>':'<',slow:e.altKey,user:true});}\nsmartClick($arrs,function(e){stopEvent(e);onArrClick.call(this,e);},{onStart:function(){onTouchStart();stageShaftTouchTail.control=true;},onTouchEnd:onTouchEnd});smartClick($thumbArrLeft,function(e){stopEvent(e);if(opts.navtype==='thumbs'){that.show('<');}else{that.showSlide('prev')}});smartClick($thumbArrRight,function(e){stopEvent(e);if(opts.navtype==='thumbs'){that.show('>');}else{that.showSlide('next')}});function addFocusOnControls(el){addFocus(el,function(){setTimeout(function(){lockScroll($stage);},0);toggleControlsClass(false);});}\n$arrs.each(function(){addEnterUp(this,function(e){onArrClick.call(this,e);});addFocusOnControls(this);});addEnterUp(fullscreenIcon,function(){if($fotorama.hasClass(fullscreenClass)){that.cancelFullScreen();$stageShaft.focus();}else{that.requestFullScreen();$fullscreenIcon.focus();}});addFocusOnControls(fullscreenIcon);function reset(){setData();setOptions();if(!reset.i){reset.i=true;var _startindex=opts.startindex;activeIndex=repositionIndex=dirtyIndex=lastActiveIndex=startIndex=edgeIndex(_startindex)||0;}\nif(size){if(changeToRtl())return;if($videoPlaying){unloadVideo($videoPlaying,true);}\nactiveIndexes=[];if(!isVideo()){detachFrames(STAGE_FRAME_KEY);}\nreset.ok=true;that.show({index:activeIndex,time:0});that.resize();}else{that.destroy();}}\nfunction changeToRtl(){if(!changeToRtl.f===o_rtl){changeToRtl.f=o_rtl;activeIndex=size-1-activeIndex;that.reverse();return true;}}\n$.each('load push pop shift unshift reverse sort splice'.split(' '),function(i,method){that[method]=function(){data=data||[];if(method!=='load'){Array.prototype[method].apply(data,arguments);}else if(arguments[0]&&typeof arguments[0]==='object'&&arguments[0].length){data=clone(arguments[0]);}\nreset();return that;}});function ready(){if(ready.ok){ready.ok=false;triggerEvent('ready');}}\nreset();};$.fn.fotorama=function(opts){return this.each(function(){var that=this,$fotorama=$(this),fotoramaData=$fotorama.data(),fotorama=fotoramaData.fotorama;if(!fotorama){waitFor(function(){return!isHidden(that);},function(){fotoramaData.urtext=$fotorama.html();new $.Fotorama($fotorama,$.extend({},OPTIONS,window.fotoramaDefaults,opts,fotoramaData));});}else{fotorama.setOptions(opts,true);}});};$.Fotorama.instances=[];function calculateIndexes(){$.each($.Fotorama.instances,function(index,instance){instance.index=index;});}\nfunction addInstance(instance){$.Fotorama.instances.push(instance);calculateIndexes();}\nfunction hideInstance(instance){$.Fotorama.instances.splice(instance.index,1);calculateIndexes();}\n$.Fotorama.cache={};$.Fotorama.measures={};$=$||{};$.Fotorama=$.Fotorama||{};$.Fotorama.jst=$.Fotorama.jst||{};$.Fotorama.jst.dots=function(v){var __t,__p='',__e=_.escape;__p+='<div class=\"fotorama__nav__frame fotorama__nav__frame--dot\" tabindex=\"0\" role=\"button\" data-gallery-role=\"nav-frame\" data-nav-type=\"thumb\" aria-label>\\r\\n    <div class=\"fotorama__dot\"></div>\\r\\n</div>';return __p};$.Fotorama.jst.frameCaption=function(v){var __t,__p='',__e=_.escape;__p+='<div class=\"fotorama__caption\" aria-hidden=\"true\">\\r\\n    <div class=\"fotorama__caption__wrap\" id=\"'+\n((__t=(v.labelledby))==null?'':__t)+'\">'+\n((__t=(v.caption))==null?'':__t)+'</div>\\r\\n</div>\\r\\n';return __p};$.Fotorama.jst.style=function(v){var __t,__p='',__e=_.escape;__p+='.fotorama'+\n((__t=(v.s))==null?'':__t)+' .fotorama__nav--thumbs .fotorama__nav__frame{\\r\\npadding:'+\n((__t=(v.m))==null?'':__t)+'px;\\r\\nheight:'+\n((__t=(v.h))==null?'':__t)+'px}\\r\\n.fotorama'+\n((__t=(v.s))==null?'':__t)+' .fotorama__thumb-border{\\r\\nheight:'+\n((__t=(v.h))==null?'':__t)+'px;\\r\\nborder-width:'+\n((__t=(v.b))==null?'':__t)+'px;\\r\\nmargin-top:'+\n((__t=(v.m))==null?'':__t)+'px}';return __p};$.Fotorama.jst.thumb=function(v){var __t,__p='',__e=_.escape;__p+='<div class=\"fotorama__nav__frame fotorama__nav__frame--thumb\" tabindex=\"0\" role=\"button\" data-gallery-role=\"nav-frame\" data-nav-type=\"thumb\" aria-label>\\r\\n    <div class=\"fotorama__thumb\">\\r\\n    </div>\\r\\n</div>';return __p};})(window,document,location,typeof jQuery!=='undefined'&&jQuery);","Magento_Customer/js/change-email-password.min.js":"define(['jquery','jquery-ui-modules/widget'],function($){'use strict';$.widget('mage.changeEmailPassword',{options:{changeEmailSelector:'[data-role=change-email]',changePasswordSelector:'[data-role=change-password]',mainContainerSelector:'[data-container=change-email-password]',titleSelector:'[data-title=change-email-password]',emailContainerSelector:'[data-container=change-email]',newPasswordContainerSelector:'[data-container=new-password]',confirmPasswordContainerSelector:'[data-container=confirm-password]',currentPasswordSelector:'[data-input=current-password]',emailSelector:'[data-input=change-email]',newPasswordSelector:'[data-input=new-password]',confirmPasswordSelector:'[data-input=confirm-password]'},_create:function(){this.element.on('change',$.proxy(function(){this._checkChoice();},this));this._checkChoice();this._bind();},_bind:function(){this._on($(this.options.emailSelector),{'change':this._updatePasswordFieldWithEmailValue,'keyup':this._updatePasswordFieldWithEmailValue,'paste':this._updatePasswordFieldWithEmailValue});},_checkChoice:function(){if($(this.options.changeEmailSelector).is(':checked')&&$(this.options.changePasswordSelector).is(':checked')){this._showAll();}else if($(this.options.changeEmailSelector).is(':checked')){this._showEmail();}else if($(this.options.changePasswordSelector).is(':checked')){this._showPassword();}else{this._hideAll();}},_showAll:function(){$(this.options.titleSelector).html(this.options.titleChangeEmailAndPassword);$(this.options.mainContainerSelector).show();$(this.options.emailContainerSelector).show();$(this.options.newPasswordContainerSelector).show();$(this.options.confirmPasswordContainerSelector).show();$(this.options.currentPasswordSelector).attr('data-validate','{required:true}').prop('disabled',false);$(this.options.emailSelector).attr('data-validate','{required:true}').prop('disabled',false);this._updatePasswordFieldWithEmailValue();$(this.options.confirmPasswordSelector).attr('data-validate','{required:true, equalTo:\"'+this.options.newPasswordSelector+'\"}').prop('disabled',false);},_hideAll:function(){$(this.options.mainContainerSelector).hide();$(this.options.emailContainerSelector).hide();$(this.options.newPasswordContainerSelector).hide();$(this.options.confirmPasswordContainerSelector).hide();$(this.options.currentPasswordSelector).removeAttr('data-validate').prop('disabled',true);$(this.options.emailSelector).removeAttr('data-validate').prop('disabled',true);$(this.options.newPasswordSelector).removeAttr('data-validate').prop('disabled',true);$(this.options.confirmPasswordSelector).removeAttr('data-validate').prop('disabled',true);},_showEmail:function(){this._showAll();$(this.options.titleSelector).html(this.options.titleChangeEmail);$(this.options.newPasswordContainerSelector).hide();$(this.options.confirmPasswordContainerSelector).hide();$(this.options.newPasswordSelector).removeAttr('data-validate').prop('disabled',true);$(this.options.confirmPasswordSelector).removeAttr('data-validate').prop('disabled',true);},_showPassword:function(){this._showAll();$(this.options.titleSelector).html(this.options.titleChangePassword);$(this.options.emailContainerSelector).hide();$(this.options.emailSelector).removeAttr('data-validate').prop('disabled',true);},_updatePasswordFieldWithEmailValue:function(){$(this.options.newPasswordSelector).attr('data-validate','{required:true, '+'\\'validate-customer-password\\':true, '+'\\'password-not-equal-to-user-name\\':\\''+$(this.options.emailSelector).val()+'\\'}').prop('disabled',false);}});return $.mage.changeEmailPassword;});","Magento_Customer/js/address.min.js":"define(['jquery','Magento_Ui/js/modal/confirm','jquery-ui-modules/widget','mage/translate'],function($,confirm){'use strict';$.widget('mage.address',{options:{deleteConfirmMessage:$.mage.__('Are you sure you want to delete this address?')},_create:function(){var options=this.options,addAddress=options.addAddress,deleteAddress=options.deleteAddress;if(addAddress){$(document).on('click',addAddress,this._addAddress.bind(this));}\nif(deleteAddress){$(document).on('click',deleteAddress,this._deleteAddress.bind(this));}},_addAddress:function(){window.location=this.options.addAddressLocation;},_deleteAddress:function(e){var self=this;confirm({content:this.options.deleteConfirmMessage,actions:{confirm:function(){if(typeof $(e.target).parent().data('address')!=='undefined'){window.location=self.options.deleteUrlPrefix+$(e.target).parent().data('address')+'/form_key/'+$.mage.cookies.get('form_key');}else{window.location=self.options.deleteUrlPrefix+$(e.target).data('address')+'/form_key/'+$.mage.cookies.get('form_key');}}}});return false;}});return $.mage.address;});","Magento_Customer/js/validation.min.js":"define(['jquery','moment','mageUtils','jquery/validate','validation','mage/translate'],function($,moment,utils){'use strict';$.validator.addMethod('validate-date',function(value,element,params){var dateFormat=utils.normalizeDate(params.dateFormat);if(value===''){return true;}\nreturn moment(value,dateFormat,true).isValid();},$.mage.__('Invalid date'));$.validator.addMethod('validate-dob',function(value,element,params){var dateFormat=utils.convertToMomentFormat(params.dateFormat);if(value===''){return true;}\nreturn moment(value,dateFormat).isBefore(moment());},$.mage.__('The Date of Birth should not be greater than today.'));});","Magento_Customer/js/password-strength-indicator.min.js":"define(['jquery','Magento_Customer/js/zxcvbn','mage/translate','mage/validation'],function($,zxcvbn,$t){'use strict';$.widget('mage.passwordStrengthIndicator',{options:{cache:{},passwordSelector:'[type=password]',passwordStrengthMeterSelector:'[data-role=password-strength-meter]',passwordStrengthMeterLabelSelector:'[data-role=password-strength-meter-label]',formSelector:'form',emailSelector:'input[type=\"email\"]'},_create:function(){this.options.cache.input=$(this.options.passwordSelector,this.element);this.options.cache.meter=$(this.options.passwordStrengthMeterSelector,this.element);this.options.cache.label=$(this.options.passwordStrengthMeterLabelSelector,this.element);this.options.cache.email=$(this.options.formSelector).find(this.options.emailSelector);this._bind();},_bind:function(){this._on(this.options.cache.input,{'change':this._calculateStrength,'keyup':this._calculateStrength,'paste':this._calculateStrength});if(this.options.cache.email.length){this._on(this.options.cache.email,{'change':this._calculateStrength,'keyup':this._calculateStrength,'paste':this._calculateStrength});}},_calculateStrength:function(){var password=this._getPassword(),isEmpty=password.length===0,zxcvbnScore,displayScore,isValid;if(isEmpty){displayScore=0;}else{this.options.cache.input.rules('add',{'password-not-equal-to-user-name':this.options.cache.email.val()});if(this.options.cache.email.length&&password.toLowerCase()===this.options.cache.email.val().toLowerCase()){displayScore=1;}else{isValid=$.validator.validateSingleElement(this.options.cache.input);zxcvbnScore=zxcvbn(password).score;displayScore=isValid&&zxcvbnScore>0?zxcvbnScore:1;}}\nthis._displayStrength(displayScore);},_displayStrength:function(displayScore){var strengthLabel='',className;switch(displayScore){case 0:strengthLabel=$t('No Password');className='password-none';break;case 1:strengthLabel=$t('Weak');className='password-weak';break;case 2:strengthLabel=$t('Medium');className='password-medium';break;case 3:strengthLabel=$t('Strong');className='password-strong';break;case 4:strengthLabel=$t('Very Strong');className='password-very-strong';break;}\nthis.options.cache.meter.removeClass().addClass(className);this.options.cache.label.text(strengthLabel);},_getPassword:function(){return this.options.cache.input.val();}});return $.mage.passwordStrengthIndicator;});","Magento_Customer/js/show-password.min.js":"define(['jquery','uiComponent'],function($,Component){'use strict';return Component.extend({passwordSelector:'',passwordInputType:'password',textInputType:'text',defaults:{template:'Magento_Customer/show-password',isPasswordVisible:false},initObservable:function(){this._super().observe(['isPasswordVisible']);this.isPasswordVisible.subscribe(function(isChecked){this._showPassword(isChecked);}.bind(this));return this;},_showPassword:function(isChecked){$(this.passwordSelector).attr('type',isChecked?this.textInputType:this.passwordInputType);}});});","Magento_Customer/js/block-submit-on-send.min.js":"define(['jquery','mage/mage'],function($){'use strict';return function(config){var dataForm=$('#'+config.formId);dataForm.on('submit',function(){$(this).find(':submit').attr('disabled','disabled');if(this.isValid===false){$(this).find(':submit').prop('disabled',false);}\nthis.isValid=true;});dataForm.on('invalid-form.validate',function(){$(this).find(':submit').prop('disabled',false);this.isValid=false;});};});","Magento_Customer/js/invalidation-processor.min.js":"define(['underscore','uiElement','Magento_Customer/js/customer-data'],function(_,Element,customerData){'use strict';return Element.extend({initialize:function(){this._super();this.process(customerData);},process:function(customerDataObject){_.each(this.invalidationRules,function(rule,ruleName){_.each(rule,function(ruleArgs,rulePath){require([rulePath],function(Rule){var currentRule=new Rule(ruleArgs);if(!_.isFunction(currentRule.process)){throw new Error('Rule '+ruleName+' should implement invalidationProcessor interface');}\ncurrentRule.process(customerDataObject);});});});}});});","Magento_Customer/js/section-config.min.js":"define(['underscore'],function(_){'use strict';var baseUrls=[],sections=[],clientSideSections=[],sectionNames=[],canonize;canonize=function(url){var route=url;_.some(baseUrls,function(baseUrl){route=url.replace(baseUrl,'');return route!==url;});return route.replace(/^\\/?index.php\\/?/,'').toLowerCase();};return{getAffectedSections:function(url){var route=canonize(url),actions=_.find(sections,function(val,section){var matched;if(section.indexOf('*')>=0){section=section.replace(/\\*/g,'[^/]+')+'$';matched=route.match(section);return matched&&matched[0]===route;}\nreturn route.indexOf(section)===0;});return _.union(_.toArray(actions),sections['*']);},filterClientSideSections:function(allSections){return _.difference(allSections,clientSideSections);},isClientSideSection:function(sectionName){return _.contains(clientSideSections,sectionName);},getSectionNames:function(){return sectionNames;},'Magento_Customer/js/section-config':function(options){baseUrls=options.baseUrls;sections=options.sections;clientSideSections=options.clientSideSections;sectionNames=options.sectionNames;}};});","Magento_Customer/js/addressValidation.min.js":"define(['jquery','underscore','mageUtils','mage/translate','Magento_Checkout/js/model/postcode-validator','jquery-ui-modules/widget','validation'],function($,__,utils,$t,postCodeValidator){'use strict';$.widget('mage.addressValidation',{options:{selectors:{button:'[data-action=save-address]',zip:'#zip',country:'select[name=\"country_id\"]:visible'}},zipInput:null,countrySelect:null,_create:function(){var button=$(this.options.selectors.button,this.element);this.zipInput=$(this.options.selectors.zip,this.element);this.countrySelect=$(this.options.selectors.country,this.element);this.element.validation({submitHandler:function(form){button.attr('disabled',true);form.submit();}});this._addPostCodeValidation();},_addPostCodeValidation:function(){var self=this;this.zipInput.on('keyup',__.debounce(function(event){var valid=self._validatePostCode(event.target.value);self._renderValidationResult(valid);},500));this.countrySelect.on('change',function(){var valid=self._validatePostCode(self.zipInput.val());self._renderValidationResult(valid);});},_validatePostCode:function(postCode){var countryId=this.countrySelect.val();if(postCode===null){return true;}\nreturn postCodeValidator.validate(postCode,countryId,this.options.postCodes);},_renderValidationResult:function(valid){var warnMessage,alertDiv=this.zipInput.next();if(!valid){warnMessage=$t('Provided Zip/Postal Code seems to be invalid.');if(postCodeValidator.validatedPostCodeExample.length){warnMessage+=$t(' Example: ')+postCodeValidator.validatedPostCodeExample.join('; ')+'. ';}\nwarnMessage+=$t('If you believe it is the right one you can ignore this notice.');}\nalertDiv.children(':first').text(warnMessage);if(valid){alertDiv.hide();}else{alertDiv.show();}}});return $.mage.addressValidation;});","Magento_Customer/js/checkout-balance.min.js":"define(['jquery','jquery-ui-modules/widget'],function($){'use strict';$.widget('mage.checkoutBalance',{_create:function(){this.eventData={price:this.options.balance,totalPrice:0};this.element.on('change',$.proxy(function(e){if($(e.target).is(':checked')){this.eventData.price=-1*this.options.balance;}else{if(this.options.amountSubstracted){this.eventData.price=parseFloat(this.options.usedAmount);this.options.amountSubstracted=false;}else{this.eventData.price=parseFloat(this.options.balance);}}\nthis.element.trigger('updateCheckoutPrice',this.eventData);},this));}});return $.mage.checkoutBalance;});","Magento_Customer/js/customer-data.min.js":"define(['jquery','underscore','ko','Magento_Customer/js/section-config','mage/url','mage/storage','jquery/jquery-storageapi'],function($,_,ko,sectionConfig,url){'use strict';var options={},storage,storageInvalidation,invalidateCacheBySessionTimeOut,invalidateCacheByCloseCookieSession,dataProvider,buffer,customerData,deferred=$.Deferred();url.setBaseUrl(window.BASE_URL);options.sectionLoadUrl=url.build('customer/section/load');invalidateCacheBySessionTimeOut=function(invalidateOptions){var date;if(new Date($.localStorage.get('mage-cache-timeout'))<new Date()){storage.removeAll();}\ndate=new Date(Date.now()+parseInt(invalidateOptions.cookieLifeTime,10)*1000);$.localStorage.set('mage-cache-timeout',date);};invalidateCacheByCloseCookieSession=function(){if(!$.cookieStorage.isSet('mage-cache-sessid')){storage.removeAll();}\n$.cookieStorage.set('mage-cache-sessid',true);};dataProvider={getFromStorage:function(sectionNames){var result={};_.each(sectionNames,function(sectionName){result[sectionName]=storage.get(sectionName);});return result;},getFromServer:function(sectionNames,forceNewSectionTimestamp){var parameters;sectionNames=sectionConfig.filterClientSideSections(sectionNames);parameters=_.isArray(sectionNames)&&sectionNames.indexOf('*')<0?{sections:sectionNames.join(',')}:[];parameters['force_new_section_timestamp']=forceNewSectionTimestamp;return $.getJSON(options.sectionLoadUrl,parameters).fail(function(jqXHR){throw new Error(jqXHR);});}};ko.extenders.disposableCustomerData=function(target,sectionName){var sectionDataIds,newSectionDataIds={};target.subscribe(function(){setTimeout(function(){storage.remove(sectionName);sectionDataIds=$.cookieStorage.get('section_data_ids')||{};_.each(sectionDataIds,function(data,name){if(name!==sectionName){newSectionDataIds[name]=data;}});$.cookieStorage.set('section_data_ids',newSectionDataIds);},3000);});return target;};buffer={data:{},bind:function(sectionName){this.data[sectionName]=ko.observable({});},get:function(sectionName){if(!this.data[sectionName]){this.bind(sectionName);}\nreturn this.data[sectionName];},keys:function(){return _.keys(this.data);},notify:function(sectionName,sectionData){if(!this.data[sectionName]){this.bind(sectionName);}\nthis.data[sectionName](sectionData);},update:function(sections){var sectionId=0,sectionDataIds=$.cookieStorage.get('section_data_ids')||{};_.each(sections,function(sectionData,sectionName){sectionId=sectionData['data_id'];sectionDataIds[sectionName]=sectionId;storage.set(sectionName,sectionData);storageInvalidation.remove(sectionName);buffer.notify(sectionName,sectionData);});$.cookieStorage.set('section_data_ids',sectionDataIds);},remove:function(sections){_.each(sections,function(sectionName){storage.remove(sectionName);if(!sectionConfig.isClientSideSection(sectionName)){storageInvalidation.set(sectionName,true);}});}};customerData={init:function(){var expiredSectionNames=this.getExpiredSectionNames();if(expiredSectionNames.length>0){_.each(dataProvider.getFromStorage(storage.keys()),function(sectionData,sectionName){buffer.notify(sectionName,sectionData);});this.reload(expiredSectionNames,false);}else{_.each(dataProvider.getFromStorage(storage.keys()),function(sectionData,sectionName){buffer.notify(sectionName,sectionData);});if(!_.isEmpty(storageInvalidation.keys())){this.reload(storageInvalidation.keys(),false);}}\nif(!_.isEmpty($.cookieStorage.get('section_data_clean'))){this.reload(sectionConfig.getSectionNames(),true);$.cookieStorage.set('section_data_clean','');}},initStorage:function(){$.cookieStorage.setConf({path:'/',expires:new Date(Date.now()+parseInt(options.cookieLifeTime,10)*1000)});storage=$.initNamespaceStorage('mage-cache-storage').localStorage;storageInvalidation=$.initNamespaceStorage('mage-cache-storage-section-invalidation').localStorage;},getExpiredSectionNames:function(){var expiredSectionNames=[],cookieSectionTimestamps=$.cookieStorage.get('section_data_ids')||{},sectionLifetime=options.expirableSectionLifetime*60,currentTimestamp=Math.floor(Date.now()/ 1000),sectionData;_.each(options.expirableSectionNames,function(sectionName){sectionData=storage.get(sectionName);if(typeof sectionData==='object'&&sectionData['data_id']+sectionLifetime<=currentTimestamp){expiredSectionNames.push(sectionName);}});_.each(cookieSectionTimestamps,function(cookieSectionTimestamp,sectionName){sectionData=storage.get(sectionName);if(typeof sectionData==='undefined'||typeof sectionData==='object'&&cookieSectionTimestamp!==sectionData['data_id']){expiredSectionNames.push(sectionName);}});expiredSectionNames=_.intersection(expiredSectionNames,sectionConfig.getSectionNames());return _.uniq(expiredSectionNames);},needReload:function(){var expiredSectionNames=this.getExpiredSectionNames();return expiredSectionNames.length>0;},getExpiredKeys:function(){return this.getExpiredSectionNames();},get:function(sectionName){return buffer.get(sectionName);},set:function(sectionName,sectionData){var data={};data[sectionName]=sectionData;buffer.update(data);},reload:function(sectionNames,forceNewSectionTimestamp){return dataProvider.getFromServer(sectionNames,forceNewSectionTimestamp).done(function(sections){$(document).trigger('customer-data-reload',[sectionNames]);buffer.update(sections);});},invalidate:function(sectionNames){var sectionDataIds,sectionsNamesForInvalidation;sectionsNamesForInvalidation=_.contains(sectionNames,'*')?sectionConfig.getSectionNames():sectionNames;$(document).trigger('customer-data-invalidate',[sectionsNamesForInvalidation]);buffer.remove(sectionsNamesForInvalidation);sectionDataIds=$.cookieStorage.get('section_data_ids')||{};_.each(sectionsNamesForInvalidation,function(sectionName){if(!sectionConfig.isClientSideSection(sectionName)){sectionDataIds[sectionName]+=1000;}});$.cookieStorage.set('section_data_ids',sectionDataIds);},getInitCustomerData:function(){return deferred.promise();},onAjaxComplete:function(jsonResponse,settings){var sections,redirects;if(settings.type.match(/post|put|delete/i)){sections=sectionConfig.getAffectedSections(settings.url);if(sections&&sections.length){this.invalidate(sections);redirects=['redirect','backUrl'];if(_.isObject(jsonResponse)&&!_.isEmpty(_.pick(jsonResponse,redirects))){return;}\nthis.reload(sections,true);}}},'Magento_Customer/js/customer-data':function(settings){options=settings;customerData.initStorage();invalidateCacheBySessionTimeOut(settings);invalidateCacheByCloseCookieSession();customerData.init();deferred.resolve();}};$(document).on('ajaxComplete',function(event,xhr,settings){customerData.onAjaxComplete(xhr.responseJSON,settings);});$(document).on('submit',function(event){var sections;if(event.target.method.match(/post|put|delete/i)){sections=sectionConfig.getAffectedSections(event.target.action);if(sections){customerData.invalidate(sections);}}});return customerData;});","Magento_Customer/js/logout-redirect.min.js":"define(['jquery','mage/mage'],function($){'use strict';return function(data){$($.mage.redirect(data.url,'assign',5000));};});","Magento_Customer/js/customer-global-session-loader.min.js":"define(['jquery','Magento_Customer/js/customer-data'],function($,customerData){'use strict';return function(){var customer;if($('.customer-menu').length>0){customer=customerData.get('customer');customerData.getInitCustomerData().done(function(){if(!customer().firstname){customerData.reload([],false);}});}};});","Magento_Customer/js/invalidation-rules/website-rule.min.js":"define(['uiClass'],function(Element){'use strict';return Element.extend({defaults:{scopeConfig:{}},process:function(customerData){var customer=customerData.get('customer');if(this.scopeConfig&&customer()&&~~customer().websiteId!==~~this.scopeConfig.websiteId&&~~customer().websiteId!==0){customerData.reload(['customer']);}}});});","Magento_Customer/js/model/customer.min.js":"define(['jquery','ko','underscore','./address-list'],function($,ko,_,addressList){'use strict';var isLoggedIn=ko.observable(window.isCustomerLoggedIn),customerData={};if(isLoggedIn()){customerData=window.customerData;}else{customerData={};}\nreturn{customerData:customerData,customerDetails:{},isLoggedIn:isLoggedIn,setIsLoggedIn:function(flag){isLoggedIn(flag);},getBillingAddressList:function(){return addressList();},getShippingAddressList:function(){return addressList();},setDetails:function(fieldName,value){if(fieldName){this.customerDetails[fieldName]=value;}},getDetails:function(fieldName){if(fieldName){if(this.customerDetails.hasOwnProperty(fieldName)){return this.customerDetails[fieldName];}\nreturn undefined;}\nreturn this.customerDetails;},addCustomerAddress:function(address){var fields=['customer_id','country_id','street','company','telephone','fax','postcode','city','firstname','lastname','middlename','prefix','suffix','vat_id','default_billing','default_shipping'],customerAddress={},hasAddress=0,existingAddress;if(!this.customerData.addresses){this.customerData.addresses=[];}\ncustomerAddress=_.pick(address,fields);if(address.hasOwnProperty('region_id')){customerAddress.region={'region_id':address['region_id'],region:address.region};}\nfor(existingAddress in this.customerData.addresses){if(this.customerData.addresses.hasOwnProperty(existingAddress)){if(_.isEqual(this.customerData.addresses[existingAddress],customerAddress)){hasAddress=existingAddress;break;}}}\nif(hasAddress===0){return this.customerData.addresses.push(customerAddress)-1;}\nreturn hasAddress;},setAddressAsDefaultBilling:function(addressId){if(this.customerData.addresses[addressId]){this.customerData.addresses[addressId]['default_billing']=1;return true;}\nreturn false;},setAddressAsDefaultShipping:function(addressId){if(this.customerData.addresses[addressId]){this.customerData.addresses[addressId]['default_shipping']=1;return true;}\nreturn false;}};});","Magento_Customer/js/model/authentication-popup.min.js":"define(['jquery','Magento_Ui/js/modal/modal'],function($,modal){'use strict';return{modalWindow:null,createPopUp:function(element){var options={'type':'popup','modalClass':'popup-authentication','focus':'[name=username]','responsive':true,'innerScroll':true,'trigger':'.proceed-to-checkout','buttons':[]};this.modalWindow=element;modal(options,$(this.modalWindow));},showModal:function(){$(this.modalWindow).modal('openModal').trigger('contentUpdated');}};});","Magento_Customer/js/model/address-list.min.js":"define(['ko','./customer-addresses'],function(ko,defaultProvider){'use strict';return ko.observableArray(defaultProvider.getAddressItems());});","Magento_Customer/js/model/customer-addresses.min.js":"define(['jquery','ko','./customer/address'],function($,ko,Address){'use strict';var isLoggedIn=ko.observable(window.isCustomerLoggedIn);return{getAddressItems:function(){var items=[],customerData=window.customerData;if(isLoggedIn()){if(Object.keys(customerData).length){$.each(customerData.addresses,function(key,item){items.push(new Address(item));});}}\nreturn items;}};});","Magento_Customer/js/model/customer/address.min.js":"define(['underscore'],function(_){'use strict';return function(addressData){var regionId;if(addressData.region['region_id']&&addressData.region['region_id']!=='0'){regionId=addressData.region['region_id']+'';}\nreturn{customerAddressId:addressData.id,email:addressData.email,countryId:addressData['country_id'],regionId:regionId,regionCode:addressData.region['region_code'],region:addressData.region.region,customerId:addressData['customer_id'],street:addressData.street,company:addressData.company,telephone:addressData.telephone,fax:addressData.fax,postcode:addressData.postcode,city:addressData.city,firstname:addressData.firstname,lastname:addressData.lastname,middlename:addressData.middlename,prefix:addressData.prefix,suffix:addressData.suffix,vatId:addressData['vat_id'],sameAsBilling:addressData['same_as_billing'],saveInAddressBook:addressData['save_in_address_book'],customAttributes:_.toArray(addressData['custom_attributes']).reverse(),isDefaultShipping:function(){return addressData['default_shipping'];},isDefaultBilling:function(){return addressData['default_billing'];},getAddressInline:function(){return addressData.inline;},getType:function(){return'customer-address';},getKey:function(){return this.getType()+this.customerAddressId;},getCacheKey:function(){return this.getKey();},isEditable:function(){return false;},canUseForBilling:function(){return true;}};};});","Magento_Customer/js/view/customer.min.js":"define(['uiComponent','Magento_Customer/js/customer-data'],function(Component,customerData){'use strict';return Component.extend({initialize:function(){this._super();this.customer=customerData.get('customer');}});});","Magento_Customer/js/view/authentication-popup.min.js":"define(['jquery','ko','Magento_Ui/js/form/form','Magento_Customer/js/action/login','Magento_Customer/js/customer-data','Magento_Customer/js/model/authentication-popup','mage/translate','mage/url','Magento_Ui/js/modal/alert','mage/validation'],function($,ko,Component,loginAction,customerData,authenticationPopup,$t,url,alert){'use strict';return Component.extend({registerUrl:window.authenticationPopup.customerRegisterUrl,forgotPasswordUrl:window.authenticationPopup.customerForgotPasswordUrl,autocomplete:window.authenticationPopup.autocomplete,modalWindow:null,isLoading:ko.observable(false),defaults:{template:'Magento_Customer/authentication-popup'},initialize:function(){var self=this;this._super();url.setBaseUrl(window.authenticationPopup.baseUrl);loginAction.registerLoginCallback(function(){self.isLoading(false);});},setModalElement:function(element){if(authenticationPopup.modalWindow==null){authenticationPopup.createPopUp(element);}},isActive:function(){var customer=customerData.get('customer');return customer()==false;},showModal:function(){if(this.modalWindow){$(this.modalWindow).modal('openModal');}else{alert({content:$t('Guest checkout is disabled.')});}},login:function(formUiElement,event){var loginData={},formElement=$(event.currentTarget),formDataArray=formElement.serializeArray();event.stopPropagation();formDataArray.forEach(function(entry){loginData[entry.name]=entry.value;});loginData['customerLoginUrl']=window.authenticationPopup.customerLoginUrl;if(formElement.validation()&&formElement.validation('isValid')){this.isLoading(true);loginAction(loginData);}\nreturn false;}});});","Magento_Customer/js/action/login.min.js":"define(['jquery','mage/storage','Magento_Ui/js/model/messageList','Magento_Customer/js/customer-data','mage/translate'],function($,storage,globalMessageList,customerData,$t){'use strict';var callbacks=[],action=function(loginData,redirectUrl,isGlobal,messageContainer){messageContainer=messageContainer||globalMessageList;let customerLoginUrl='customer/ajax/login';if(loginData.customerLoginUrl){customerLoginUrl=loginData.customerLoginUrl;delete loginData.customerLoginUrl;}\nreturn storage.post(customerLoginUrl,JSON.stringify(loginData),isGlobal).done(function(response){if(response.errors){messageContainer.addErrorMessage(response);callbacks.forEach(function(callback){callback(loginData);});}else{callbacks.forEach(function(callback){callback(loginData);});customerData.invalidate(['customer']);if(response.redirectUrl){window.location.href=response.redirectUrl;}else if(redirectUrl){window.location.href=redirectUrl;}else{location.reload();}}}).fail(function(){messageContainer.addErrorMessage({'message':$t('Could not authenticate. Please try again later')});callbacks.forEach(function(callback){callback(loginData);});});};action.registerLoginCallback=function(callback){callbacks.push(callback);};return action;});","Magento_Customer/js/action/check-email-availability.min.js":"define(['mage/storage','Magento_Checkout/js/model/url-builder'],function(storage,urlBuilder){'use strict';return function(deferred,email){return storage.post(urlBuilder.createUrl('/customers/isEmailAvailable',{}),JSON.stringify({customerEmail:email}),false).done(function(isEmailAvailable){if(isEmailAvailable){deferred.resolve();}else{deferred.reject();}}).fail(function(){deferred.reject();});};});","PayPal_Braintree/js/validator.min.js":"define(['underscore'],function(_){'use strict';return{config:{},setConfig:function(config){this.config=config;},getAvailableCardTypes:function(){return this.config.availableCardTypes;},getCcTypesMapper:function(){return this.config.ccTypesMapper;},getMageCardType:function(type,availableTypes){var storedCardType=null,mapper=this.getCcTypesMapper();if(type&&typeof mapper[type]!=='undefined'){storedCardType=mapper[type];if(_.indexOf(availableTypes,storedCardType)!==-1){return storedCardType;}}\nreturn null;},collectTypes:function(availableTypes,countrySpecificCardTypes){var key,filteredTypes=[];for(key in availableTypes){if(_.indexOf(countrySpecificCardTypes,availableTypes[key])!==-1){filteredTypes.push(availableTypes[key]);}}\nreturn filteredTypes;},getCountrySpecificCardTypes:function(countryId){if(typeof this.config.countrySpecificCardTypes[countryId]!=='undefined'){return this.config.countrySpecificCardTypes[countryId];}\nreturn false;}};});","PayPal_Braintree/js/form-builder.min.js":"define(['jquery','underscore','mage/template'],function($,_,mageTemplate){'use strict';return{build:function(formData){var formTmpl=mageTemplate('<form action=\"<%= data.action %>\"'+' method=\"POST\" hidden enctype=\"application/x-www-form-urlencoded\">'+'<% _.each(data.fields, function(val, key){ %>'+'<input value=\\'<%= val %>\\' name=\"<%= key %>\" type=\"hidden\">'+'<% }); %>'+'</form>');return $(formTmpl({data:{action:formData.action,fields:formData.fields}})).appendTo($('[data-container=\"body\"]'));}};});","PayPal_Braintree/js/model/step-navigator-mixin.min.js":"define(['mage/utils/wrapper','jquery'],function(wrapper,$){'use strict';let mixin={handleHash:function(originalFn){var hashString=window.location.hash.replace('#','');if(hashString.indexOf('venmo')>-1){return false;}\nreturn originalFn();}};return function(target){return wrapper.extend(target,mixin);};});","PayPal_Braintree/js/model/place-order-mixin.min.js":"define(['jquery','mage/utils/wrapper','Magento_ReCaptchaWebapiUi/js/webapiReCaptchaRegistry'],function($,wrapper,recaptchaRegistry){'use strict';return function(placeOrder){return wrapper.wrap(placeOrder,function(originalAction,serviceUrl,payload,messageContainer){var recaptchaDeferred;if(recaptchaRegistry.triggers.hasOwnProperty('recaptcha-checkout-braintree')){recaptchaDeferred=$.Deferred();recaptchaRegistry.addListener('recaptcha-checkout-braintree',function(token){payload.xReCaptchaValue=token;originalAction(serviceUrl,payload,messageContainer).done(function(){recaptchaDeferred.resolve.apply(recaptchaDeferred,arguments);}).fail(function(){recaptchaDeferred.reject.apply(recaptchaDeferred,arguments);});});recaptchaRegistry.triggers['recaptcha-checkout-braintree']();recaptchaRegistry.removeListener('recaptcha-checkout-braintree');return recaptchaDeferred;}\nreturn originalAction(serviceUrl,payload,messageContainer);});};});","PayPal_Braintree/js/googlepay/button.min.js":"define(['uiComponent',\"knockout\",\"jquery\",'Magento_Checkout/js/model/payment/additional-validators','Magento_CheckoutAgreements/js/view/checkout-agreements','braintree','braintreeDataCollector','braintreeGooglePay','mage/translate','googlePayLibrary'],function(Component,ko,jQuery,additionalValidators,checkoutAgreements,braintree,dataCollector,googlePay,$t){'use strict';return{init:function(element,context){if(!element||!context){return;}\nif(typeof context.getClientToken!=='function'){console.error(\"Braintree GooglePay Context passed does not provide a getClientToken method\",context);return;}\nif(typeof context.getPaymentRequest!=='function'){console.error(\"Braintree GooglePay Context passed does not provide a getPaymentRequest method\",context);return;}\nif(typeof context.startPlaceOrder!=='function'){console.error(\"Braintree GooglePay Context passed does not provide a startPlaceOrder method\",context);return;}\nvar paymentsClient=new google.payments.api.PaymentsClient({environment:context.getEnvironment()});var deviceData;var button=document.createElement('button');button.className=\"braintree-googlepay-button long \"+(context.getBtnColor()==1?'black':'white');button.title=$t(\"Buy with Google Pay\");braintree.create({authorization:context.getClientToken()},function(clientErr,clientInstance){if(clientErr){console.error('Error creating client:',clientErr);return;}\ndataCollector.create({client:clientInstance},function(dataCollectorErr,dataCollectorInstance){if(dataCollectorErr){return;}\ngooglePay.create({client:clientInstance,googlePayVersion:2},function(googlePayErr,googlePaymentInstance){if(googlePayErr){console.error('Braintree GooglePay Error creating googlePayInstance:',googlePayErr);return;}\npaymentsClient.isReadyToPay({apiVersion:2,apiVersionMinor:0,allowedPaymentMethods:googlePaymentInstance.createPaymentDataRequest().allowedPaymentMethods}).then(function(response){if(response.result){button.addEventListener('click',function(event){var agreements=checkoutAgreements().agreements,shouldDisableActions=false;_.each(agreements,function(item,index){if(checkoutAgreements().isAgreementRequired(item)){var inputId='#agreement_braintree_googlepay_'+item.agreementId,inputEl=document.querySelector(inputId);if(inputEl!==null&&!inputEl.checked){shouldDisableActions=true;}}});if(!additionalValidators.validate()){event.preventDefault();return false;}\nif(!shouldDisableActions){event.preventDefault();jQuery(\"body\").loader('show');var responseData;var paymentDataRequest=googlePaymentInstance.createPaymentDataRequest(context.getPaymentRequest());paymentsClient.loadPaymentData(paymentDataRequest).then(function(paymentData){responseData=paymentData;return googlePaymentInstance.parseResponse(paymentData);}).then(function(result){context.startPlaceOrder(result.nonce,responseData,dataCollectorInstance.deviceData);}).catch(function(err){console.error(err);jQuery(\"body\").loader('hide');});}});element.appendChild(button);}}).catch(function(err){console.error(err);jQuery(\"body\").loader('hide');});});});});}};});","PayPal_Braintree/js/googlepay/api.min.js":"define(['uiComponent','mage/translate','mage/storage','jquery','PayPal_Braintree/js/form-builder'],function(Component,$t,storage,jQuery,formBuilder){'use strict';return Component.extend({defaults:{clientToken:null,merchantId:null,currencyCode:null,actionSuccess:null,amount:null,cardTypes:[],btnColor:0},setEnvironment:function(value){this.environment=value;},getEnvironment:function(){return this.environment;},setClientToken:function(value){this.clientToken=value;},getClientToken:function(){return this.clientToken;},setMerchantId:function(value){this.merchantId=value;},getMerchantId:function(){return this.merchantId;},setAmount:function(value){this.amount=parseFloat(value).toFixed(2);},getAmount:function(){return this.amount;},setCurrencyCode:function(value){this.currencyCode=value;},getCurrencyCode:function(){return this.currencyCode;},setActionSuccess:function(value){this.actionSuccess=value;},getActionSuccess:function(){return this.actionSuccess;},setCardTypes:function(value){this.cardTypes=value;},getCardTypes:function(){return this.cardTypes;},setBtnColor:function(value){this.btnColor=value;},getBtnColor:function(){return this.btnColor;},getPaymentRequest:function(){var result={transactionInfo:{totalPriceStatus:'ESTIMATED',totalPrice:this.getAmount(),currencyCode:this.getCurrencyCode()},allowedPaymentMethods:[{\"type\":\"CARD\",\"parameters\":{\"allowedCardNetworks\":this.getCardTypes(),\"billingAddressRequired\":true,\"billingAddressParameters\":{format:'FULL',phoneNumberRequired:true},},}],shippingAddressRequired:true,emailRequired:true,};if(this.getEnvironment()!==\"TEST\"){result.merchantInfo={merchantId:this.getMerchantId()};}\nreturn result;},startPlaceOrder:function(nonce,paymentData,deviceData){var payload={details:{shippingAddress:{streetAddress:paymentData.shippingAddress.address1+\"\\n\"\n+paymentData.shippingAddress.address2,locality:paymentData.shippingAddress.locality,postalCode:paymentData.shippingAddress.postalCode,countryCodeAlpha2:paymentData.shippingAddress.countryCode,email:paymentData.email,name:paymentData.shippingAddress.name,telephone:typeof paymentData.shippingAddress.phoneNumber!=='undefined'?paymentData.shippingAddress.phoneNumber:'',region:typeof paymentData.shippingAddress.administrativeArea!=='undefined'?paymentData.shippingAddress.administrativeArea:''},billingAddress:{streetAddress:paymentData.paymentMethodData.info.billingAddress.address1+\"\\n\"\n+paymentData.paymentMethodData.info.billingAddress.address2,locality:paymentData.paymentMethodData.info.billingAddress.locality,postalCode:paymentData.paymentMethodData.info.billingAddress.postalCode,countryCodeAlpha2:paymentData.paymentMethodData.info.billingAddress.countryCode,email:paymentData.email,name:paymentData.paymentMethodData.info.billingAddress.name,telephone:typeof paymentData.paymentMethodData.info.billingAddress.phoneNumber!=='undefined'?paymentData.paymentMethodData.info.billingAddress.phoneNumber:'',region:typeof paymentData.paymentMethodData.info.billingAddress.administrativeArea!=='undefined'?paymentData.paymentMethodData.info.billingAddress.administrativeArea:''}},nonce:nonce,deviceData:deviceData,};formBuilder.build({action:this.getActionSuccess(),fields:{result:JSON.stringify(payload)}}).submit();}});});","PayPal_Braintree/js/googlepay/implementations/shortcut.min.js":"define(['uiComponent','PayPal_Braintree/js/googlepay/button','PayPal_Braintree/js/googlepay/api','mage/translate','domReady!'],function(Component,button,buttonApi,$t){'use strict';return Component.extend({defaults:{id:null,clientToken:null,merchantId:null,currencyCode:null,actionSuccess:null,amount:null,environment:\"TEST\",cardType:[],btnColor:0},initialize:function(){this._super();var api=new buttonApi();api.setEnvironment(this.environment);api.setCurrencyCode(this.currencyCode);api.setClientToken(this.clientToken);api.setMerchantId(this.merchantId);api.setActionSuccess(this.actionSuccess);api.setAmount(this.amount);api.setCardTypes(this.cardTypes)\napi.setBtnColor(this.btnColor);button.init(document.getElementById(this.id),api);return this;}});});","PayPal_Braintree/js/googlepay/implementations/core-checkout/method-googlepay.min.js":"define(['uiComponent','Magento_Checkout/js/model/payment/renderer-list'],function(Component,rendererList){'use strict';let config=window.checkoutConfig.payment;if(config['braintree_googlepay'].clientToken){rendererList.push({type:'braintree_googlepay',component:'PayPal_Braintree/js/googlepay/implementations/core-checkout/method-renderer/googlepay'});}\nreturn Component.extend({});});","PayPal_Braintree/js/googlepay/implementations/core-checkout/method-renderer/googlepay.min.js":"define(['Magento_Checkout/js/view/payment/default','Magento_Checkout/js/model/quote','PayPal_Braintree/js/googlepay/button'],function(Component,quote,button){'use strict';return Component.extend({defaults:{template:'PayPal_Braintree/googlepay/core-checkout',paymentMethodNonce:null,deviceData:null,grandTotalAmount:0},getGooglePayBtn:function(id){button.init(document.getElementById(id),this);},initObservable:function(){this._super();this.grandTotalAmount=parseFloat(quote.totals()['base_grand_total']).toFixed(2);this.currencyCode=quote.totals()['base_currency_code'];quote.totals.subscribe(function(){if(this.grandTotalAmount!==quote.totals()['base_grand_total']){this.grandTotalAmount=parseFloat(quote.totals()['base_grand_total']).toFixed(2);}}.bind(this));return this;},startPlaceOrder:function(nonce,paymentData,device_data){this.setPaymentMethodNonce(nonce);this.setDeviceData(device_data);this.placeOrder();},setPaymentMethodNonce:function(nonce){this.paymentMethodNonce=nonce;},setDeviceData:function(device_data){this.deviceData=device_data;},getClientToken:function(){return window.checkoutConfig.payment[this.getCode()].clientToken;},getPaymentRequest:function(){var result={transactionInfo:{totalPriceStatus:'FINAL',totalPrice:this.grandTotalAmount,currencyCode:this.currencyCode},allowedPaymentMethods:[{\"type\":\"CARD\",\"parameters\":{\"allowedCardNetworks\":this.getCardTypes(),\"billingAddressRequired\":false,},}],shippingAddressRequired:false,emailRequired:false,};if(this.getEnvironment()!==\"TEST\"){result.merchantInfo={merchantId:this.getMerchantId()};}\nreturn result;},getMerchantId:function(){return window.checkoutConfig.payment[this.getCode()].merchantId;},getEnvironment:function(){return window.checkoutConfig.payment[this.getCode()].environment;},getCardTypes:function(){return window.checkoutConfig.payment[this.getCode()].cardTypes;},getBtnColor:function(){return window.checkoutConfig.payment[this.getCode()].btnColor;},getData:function(){return{'method':this.getCode(),'additional_data':{'payment_method_nonce':this.paymentMethodNonce,'device_data':this.deviceData}};},getPaymentMarkSrc:function(){return window.checkoutConfig.payment[this.getCode()].paymentMarkSrc;}});});","PayPal_Braintree/js/applepay/api.min.js":"define(['jquery','underscore','uiComponent','mage/translate','mage/storage','Magento_Customer/js/customer-data'],function($,_,Component,$t,storage,customerData){'use strict';return Component.extend({defaults:{clientToken:null,quoteId:0,displayName:null,actionSuccess:null,grandTotalAmount:0,isLoggedIn:false,storeCode:\"default\",shippingAddress:{},countryDirectory:null,shippingMethods:{}},initialize:function(){this._super();if(!this.countryDirectory){storage.get(\"rest/V1/directory/countries\").done(function(result){this.countryDirectory={};let i,data,x,region;for(i=0;i<result.length;++i){data=result[i];this.countryDirectory[data.two_letter_abbreviation]={};if(typeof data.available_regions!=='undefined'){for(x=0;x<data.available_regions.length;++x){region=data.available_regions[x];this.countryDirectory[data.two_letter_abbreviation][region.name.toLowerCase().replace(/[^A-Z0-9]/ig,'')]=region.id;}}}}.bind(this));}},getRegionId:function(countryCode,regionName){if(typeof regionName!=='string'){return null;}\nregionName=regionName.toLowerCase().replace(/[^A-Z0-9]/ig,'');if(typeof this.countryDirectory[countryCode]!=='undefined'&&typeof this.countryDirectory[countryCode][regionName]!=='undefined'){return this.countryDirectory[countryCode][regionName];}\nreturn 0;},setClientToken:function(value){this.clientToken=value;},getClientToken:function(){return this.clientToken;},setQuoteId:function(value){this.quoteId=value;},getQuoteId:function(){return this.quoteId;},setDisplayName:function(value){this.displayName=value;},getDisplayName:function(){return this.displayName;},setActionSuccess:function(value){this.actionSuccess=value;},getActionSuccess:function(){return this.actionSuccess;},setGrandTotalAmount:function(value){this.grandTotalAmount=parseFloat(value).toFixed(2);},getGrandTotalAmount:function(){return parseFloat(this.grandTotalAmount);},setIsLoggedIn:function(value){this.isLoggedIn=value;},getIsLoggedIn:function(){return this.isLoggedIn;},setStoreCode:function(value){this.storeCode=value;},getStoreCode:function(){return this.storeCode;},getApiUrl:function(uri){if(this.getIsLoggedIn()===true){return\"rest/\"+this.getStoreCode()+\"/V1/carts/mine/\"+uri;}else{return\"rest/\"+this.getStoreCode()+\"/V1/guest-carts/\"+this.getQuoteId()+\"/\"+uri;}},getPaymentRequest:function(){return{total:{label:this.getDisplayName(),amount:this.getGrandTotalAmount()},requiredShippingContactFields:['postalAddress','name','email','phone'],requiredBillingContactFields:['postalAddress','name']};},onShippingContactSelect:function(event,session){let address=event.shippingContact;let payload={address:{city:address.locality,region:address.administrativeArea,country_id:address.countryCode.toUpperCase(),postcode:address.postalCode,save_in_address_book:0}};this.shippingAddress=payload.address;storage.post(this.getApiUrl(\"estimate-shipping-methods\"),JSON.stringify(payload)).done(function(result){let virtualFlag=false;if(result.length===0){let productItems=customerData.get('cart')().items;_.each(productItems,function(item){if(item.is_virtual||item.product_type=='bundle'){virtualFlag=true;}else{virtualFlag=false;}});if(!virtualFlag){session.abort();alert($t(\"There are no shipping methods available for you right now. Please try again or use an alternative payment method.\"));return false;}}\nlet shippingMethods=[];this.shippingMethods={};for(let i=0;i<result.length;i++){if(typeof result[i].method_code!=='string'){continue;}\nlet method={identifier:result[i].method_code,label:result[i].method_title,detail:result[i].carrier_title?result[i].carrier_title:\"\",amount:parseFloat(result[i].amount).toFixed(2)};shippingMethods.push(method);this.shippingMethods[result[i].method_code]=result[i];if(!this.shippingMethod){this.shippingMethod=result[i].method_code;}}\nlet totalsPayload={\"addressInformation\":{\"address\":{\"countryId\":this.shippingAddress.country_id,\"region\":this.shippingAddress.region,\"regionId\":this.getRegionId(this.shippingAddress.country_id,this.shippingAddress.region),\"postcode\":this.shippingAddress.postcode},\"shipping_method_code\":virtualFlag?null:this.shippingMethods[shippingMethods[0].identifier].method_code,\"shipping_carrier_code\":virtualFlag?null:this.shippingMethods[shippingMethods[0].identifier].carrier_code}};storage.post(this.getApiUrl(\"totals-information\"),JSON.stringify(totalsPayload)).done(function(result){this.setGrandTotalAmount(result.base_grand_total);session.completeShippingContactSelection(ApplePaySession.STATUS_SUCCESS,shippingMethods,{label:this.getDisplayName(),amount:this.getGrandTotalAmount()},[{type:'final',label:$t('Shipping'),amount:virtualFlag?0:shippingMethods[0].amount}]);}.bind(this)).fail(function(result){session.abort();alert($t(\"We're unable to fetch the cart totals for you. Please try an alternative payment method.\"));console.error(\"Braintree ApplePay: Unable to get totals\",result);return false;});}.bind(this)).fail(function(result){session.abort();alert($t(\"We're unable to find any shipping methods for you. Please try an alternative payment method.\"));console.error(\"Braintree ApplePay: Unable to find shipping methods for estimate-shipping-methods\",result);return false;});},onShippingMethodSelect:function(event,session){let shippingMethod=event.shippingMethod;this.shippingMethod=shippingMethod.identifier;let payload={\"addressInformation\":{\"address\":{\"countryId\":this.shippingAddress.country_id,\"region\":this.shippingAddress.region,\"regionId\":this.getRegionId(this.shippingAddress.country_id,this.shippingAddress.region),\"postcode\":this.shippingAddress.postcode},\"shipping_method_code\":this.shippingMethods[this.shippingMethod].method_code,\"shipping_carrier_code\":this.shippingMethods[this.shippingMethod].carrier_code}};storage.post(this.getApiUrl(\"totals-information\"),JSON.stringify(payload)).done(function(r){this.setGrandTotalAmount(r.base_grand_total);session.completeShippingMethodSelection(ApplePaySession.STATUS_SUCCESS,{label:this.getDisplayName(),amount:this.getGrandTotalAmount()},[{type:'final',label:$t('Shipping'),amount:shippingMethod.amount}]);}.bind(this));},startPlaceOrder:function(nonce,event,session,device_data){let shippingContact=event.payment.shippingContact,billingContact=event.payment.billingContact,payload={\"addressInformation\":{\"shipping_address\":{\"email\":shippingContact.emailAddress,\"telephone\":shippingContact.phoneNumber,\"firstname\":shippingContact.givenName,\"lastname\":shippingContact.familyName,\"street\":shippingContact.addressLines,\"city\":shippingContact.locality,\"region\":shippingContact.administrativeArea,\"region_id\":this.getRegionId(shippingContact.countryCode.toUpperCase(),shippingContact.administrativeArea),\"region_code\":null,\"country_id\":shippingContact.countryCode.toUpperCase(),\"postcode\":shippingContact.postalCode,\"same_as_billing\":0,\"customer_address_id\":0,\"save_in_address_book\":0},\"billing_address\":{\"email\":shippingContact.emailAddress,\"telephone\":shippingContact.phoneNumber,\"firstname\":billingContact.givenName,\"lastname\":billingContact.familyName,\"street\":billingContact.addressLines,\"city\":billingContact.locality,\"region\":billingContact.administrativeArea,\"region_id\":this.getRegionId(billingContact.countryCode.toUpperCase(),billingContact.administrativeArea),\"region_code\":null,\"country_id\":billingContact.countryCode.toUpperCase(),\"postcode\":billingContact.postalCode,\"same_as_billing\":0,\"customer_address_id\":0,\"save_in_address_book\":0},\"shipping_method_code\":this.shippingMethod?this.shippingMethods[this.shippingMethod].method_code:'',\"shipping_carrier_code\":this.shippingMethod?this.shippingMethods[this.shippingMethod].carrier_code:''}};storage.post(this.getApiUrl(\"shipping-information\"),JSON.stringify(payload)).done(function(){let paymentInformation={\"email\":shippingContact.emailAddress,\"paymentMethod\":{\"method\":\"braintree_applepay\",\"additional_data\":{\"payment_method_nonce\":nonce,\"device_data\":device_data}}};if(window.checkout&&window.checkout.agreementIds){paymentInformation.paymentMethod.extension_attributes={\"agreement_ids\":window.checkout.agreementIds};}\nstorage.post(this.getApiUrl(\"payment-information\"),JSON.stringify(paymentInformation)).done(function(r){document.location=this.getActionSuccess();session.completePayment(ApplePaySession.STATUS_SUCCESS);}.bind(this)).fail(function(r){session.completePayment(ApplePaySession.STATUS_FAILURE);session.abort();alert($t(\"We're unable to take your payment through Apple Pay. Please try an again or use an alternative payment method.\"));console.error(\"Braintree ApplePay Unable to take payment\",r);return false;});}.bind(this)).fail(function(r){console.error(\"Braintree ApplePay Unable to set shipping information\",r);session.completePayment(ApplePaySession.STATUS_INVALID_BILLING_POSTAL_ADDRESS);});}});});","PayPal_Braintree/js/applepay/button.min.js":"define(['uiComponent',\"knockout\",\"jquery\",'braintree','braintreeDataCollector','braintreeApplePay','mage/translate','Magento_Checkout/js/model/payment/additional-validators',],function(Component,ko,jQuery,braintree,dataCollector,applePay,$t,additionalValidators){'use strict';var that;return{init:function(element,context){if(!element||!context){return;}\nif(typeof context.getClientToken!=='function'){console.error(\"Braintree ApplePay Context passed does not provide a getClientToken method\",context);return;}\nif(typeof context.getPaymentRequest!=='function'){console.error(\"Braintree ApplePay Context passed does not provide a getPaymentRequest method\",context);return;}\nif(typeof context.startPlaceOrder!=='function'){console.error(\"Braintree ApplePay Context passed does not provide a startPlaceOrder method\",context);return;}\nif(this.deviceSupported()===false){return;}\nbraintree.create({authorization:context.getClientToken()},function(clientErr,clientInstance){if(clientErr){console.error('Error creating client:',clientErr);return;}\ndataCollector.create({client:clientInstance},function(dataCollectorErr,dataCollectorInstance){if(dataCollectorErr){return;}\napplePay.create({client:clientInstance},function(applePayErr,applePayInstance){if(applePayErr){console.error('Braintree ApplePay Error creating applePayInstance:',applePayErr);return;}\nvar el=document.createElement('div');el.className=\"braintree-apple-pay-button\";el.title=$t(\"Pay with Apple Pay\");el.alt=$t(\"Pay with Apple Pay\");el.addEventListener('click',function(e){e.preventDefault();if(!additionalValidators.validate()){return false;}\nvar paymentRequest=applePayInstance.createPaymentRequest(context.getPaymentRequest());if(!paymentRequest){alert($t(\"We're unable to take payments through Apple Pay at the moment. Please try an alternative payment method.\"));console.error('Braintree ApplePay Unable to create paymentRequest',paymentRequest);return;}\njQuery(\"body\").loader('show');try{var session=new ApplePaySession(1,paymentRequest);}catch(err){jQuery(\"body\").loader('hide');console.error('Braintree ApplePay Unable to create ApplePaySession',err);alert($t(\"We're unable to take payments through Apple Pay at the moment. Please try an alternative payment method.\"));return false;}\nsession.onvalidatemerchant=function(event){applePayInstance.performValidation({validationURL:event.validationURL,displayName:context.getDisplayName()},function(validationErr,merchantSession){if(validationErr){session.abort();console.error('Braintree ApplePay Error validating merchant:',validationErr);alert($t(\"We're unable to take payments through Apple Pay at the moment. Please try an alternative payment method.\"));return;}\nsession.completeMerchantValidation(merchantSession);});};session.onpaymentauthorized=function(event){applePayInstance.tokenize({token:event.payment.token},function(tokenizeErr,payload){if(tokenizeErr){console.error('Error tokenizing Apple Pay:',tokenizeErr);session.completePayment(ApplePaySession.STATUS_FAILURE);return;}\ncontext.startPlaceOrder(payload.nonce,event,session,dataCollectorInstance.deviceData);});};if(typeof context.onShippingContactSelect==='function'){session.onshippingcontactselected=function(event){return context.onShippingContactSelect(event,session);};}\nif(typeof context.onShippingMethodSelect==='function'){session.onshippingmethodselected=function(event){return context.onShippingMethodSelect(event,session);};}\nif(typeof context.onButtonClick==='function'){context.onButtonClick(session,this,e);}else{jQuery(\"body\").loader('hide');session.begin();}});element.appendChild(el);});});});},deviceSupported:function(){if(location.protocol!='https:'){console.warn(\"Braintree Apple Pay requires your checkout be served over HTTPS\");return false;}\nif((window.ApplePaySession&&ApplePaySession.canMakePayments())!==true){console.warn(\"Braintree Apple Pay is not supported on this device/browser\");return false;}\nreturn true;}};});","PayPal_Braintree/js/applepay/implementations/shortcut.min.js":"define(['uiComponent','PayPal_Braintree/js/applepay/button','PayPal_Braintree/js/applepay/api','mage/translate','domReady!'],function(Component,button,buttonApi,$t){'use strict';return Component.extend({defaults:{id:null,clientToken:null,quoteId:0,displayName:null,actionSuccess:null,grandTotalAmount:0,isLoggedIn:false,storeCode:\"default\"},initialize:function(){this._super();if(!this.displayName){this.displayName=$t('Store');}\nvar api=new buttonApi();api.setGrandTotalAmount(parseFloat(this.grandTotalAmount).toFixed(2));api.setClientToken(this.clientToken);api.setDisplayName(this.displayName);api.setQuoteId(this.quoteId);api.setActionSuccess(this.actionSuccess);api.setIsLoggedIn(this.isLoggedIn);api.setStoreCode(this.storeCode);button.init(document.getElementById(this.id),api);return this;}});});","PayPal_Braintree/js/applepay/implementations/core-checkout/method-applepay.min.js":"define(['uiComponent','Magento_Checkout/js/model/payment/renderer-list'],function(Component,rendererList){'use strict';let config=window.checkoutConfig.payment;if(config['braintree_applepay'].clientToken){rendererList.push({type:'braintree_applepay',component:'PayPal_Braintree/js/applepay/implementations/core-checkout/method-renderer/applepay'});}\nreturn Component.extend({});});","PayPal_Braintree/js/applepay/implementations/core-checkout/method-renderer/applepay.min.js":"define(['Magento_Checkout/js/view/payment/default','Magento_Checkout/js/model/quote','PayPal_Braintree/js/applepay/button'],function(Component,quote,button){'use strict';return Component.extend({defaults:{template:'PayPal_Braintree/applepay/core-checkout',paymentMethodNonce:null,deviceData:null,grandTotalAmount:0,deviceSupported:button.deviceSupported()},getApplePayBtn:function(id){button.init(document.getElementById(id),this);},initObservable:function(){this._super();this.grandTotalAmount=parseFloat(quote.totals()['base_grand_total']).toFixed(2);quote.totals.subscribe(function(){if(this.grandTotalAmount!==quote.totals()['base_grand_total']){this.grandTotalAmount=parseFloat(quote.totals()['base_grand_total']).toFixed(2);}}.bind(this));return this;},startPlaceOrder:function(nonce,event,session,device_data){this.setPaymentMethodNonce(nonce);this.setDeviceData(device_data);this.placeOrder();session.completePayment(ApplePaySession.STATUS_SUCCESS);},setPaymentMethodNonce:function(nonce){this.paymentMethodNonce=nonce;},setDeviceData:function(device_data){this.deviceData=device_data;},getClientToken:function(){return window.checkoutConfig.payment[this.getCode()].clientToken;},getPaymentRequest:function(){return{total:{label:this.getDisplayName(),amount:this.grandTotalAmount}};},getDisplayName:function(){return window.checkoutConfig.payment[this.getCode()].merchantName;},getData:function(){var data={'method':this.getCode(),'additional_data':{'payment_method_nonce':this.paymentMethodNonce,'device_data':this.deviceData}};return data;},getPaymentMarkSrc:function(){return window.checkoutConfig.payment[this.getCode()].paymentMarkSrc;}});});","PayPal_Braintree/js/paypal/form-builder.min.js":"define(['jquery','underscore','mage/template'],function($,_,mageTemplate){'use strict';return{build:function(formData){var formTmpl=mageTemplate('<form action=\"<%= data.action %>\"'+' method=\"POST\" hidden enctype=\"application/x-www-form-urlencoded\">'+'<% _.each(data.fields, function(val, key){ %>'+'<input value=\\'<%= val %>\\' name=\"<%= key %>\" type=\"hidden\">'+'<% }); %>'+'</form>');return $(formTmpl({data:{action:formData.action,fields:formData.fields}})).appendTo($('[data-container=\"body\"]'));}};});","PayPal_Braintree/js/paypal/product-page.min.js":"define(['PayPal_Braintree/js/paypal/button','jquery'],function(button,$){'use strict';return button.extend({defaults:{label:'buynow',branding:true,},beforeSubmit:function(payload){var form=$(\"#product_addtocart_form\");if(!(form.validation()&&form.validation('isValid'))){return false;}\npayload.additionalData=form.serialize();return payload;}});});","PayPal_Braintree/js/paypal/button.min.js":"define(['rjsResolver','uiRegistry','uiComponent','underscore','jquery','Magento_Customer/js/customer-data','mage/translate','braintree','braintreeDataCollector','braintreePayPalCheckout','PayPal_Braintree/js/form-builder','domReady!'],function(resolver,registry,Component,_,$,customerData,$t,braintree,dataCollector,paypalCheckout,formBuilder){'use strict';let buttonIds=[];return{events:{onClick:null,onCancel:null,onError:null},init:function(token,currency,env,local,lineItems){if($('.action-braintree-paypal-message').length){$('.product-add-form form').on('keyup change paste','input, select, textarea',function(){var currentPrice,currencySymbol;currentPrice=$(\".product-info-main span\").find(\"[data-price-type='finalPrice']\").text();currencySymbol=$('.action-braintree-paypal-message[data-pp-type=\"product\"]').data('currency-symbol');$('.action-braintree-paypal-message[data-pp-type=\"product\"]').attr('data-pp-amount',currentPrice.replace(currencySymbol,''));});}\nbuttonIds=[];$('.action-braintree-paypal-logo').each(function(){if(!$(this).hasClass(\"button-loaded\")){$(this).addClass('button-loaded');buttonIds.push($(this).attr('id'));}});if(buttonIds.length>0){this.loadSDK(token,currency,env,local,lineItems);}},loadSDK:function(token,currency,env,local,lineItems){braintree.create({authorization:token},function(clientErr,clientInstance){if(clientErr){console.error('paypalCheckout error',clientErr);return this.showError(\"PayPal Checkout could not be initialized. Please contact the store owner.\");}\ndataCollector.create({client:clientInstance,paypal:true},function(err,dataCollectorInstance){if(err){return console.log(err);}});paypalCheckout.create({client:clientInstance},function(err,paypalCheckoutInstance){if(typeof paypal!=='undefined'){this.renderPayPalButtons(buttonIds,paypalCheckoutInstance,lineItems);this.renderPayPalMessages();}else{var configSDK={components:'buttons,messages,funding-eligibility',\"enable-funding\":\"paylater\",currency:currency};if(env==='sandbox'&&local!==''){configSDK[\"buyer-country\"]=local;}\npaypalCheckoutInstance.loadPayPalSDK(configSDK,function(){this.renderPayPalButtons(buttonIds,paypalCheckoutInstance,lineItems);this.renderPayPalMessages();}.bind(this));}}.bind(this));}.bind(this));},renderPayPalButtons:function(ids,paypalCheckoutInstance,lineItems){_.each(ids,function(id){this.payPalButton(id,paypalCheckoutInstance,lineItems);}.bind(this));},renderPayPalMessages:function(){$('.action-braintree-paypal-message').each(function(){paypal.Messages({amount:$(this).data('pp-amount'),pageType:$(this).data('pp-type'),style:{layout:$(this).data('messaging-layout'),text:{color:$(this).data('messaging-text-color')},logo:{type:$(this).data('messaging-logo'),position:$(this).data('messaging-logo-position')}}}).render('#'+$(this).attr('id'));});},payPalButton:function(id,paypalCheckoutInstance,lineItems){let data=$('#'+id);let style={color:data.data('color'),shape:data.data('shape'),size:data.data('size'),label:data.data('label')};if(data.data('fundingicons')){style.fundingicons=data.data('fundingicons');}\nvar paypalActions;var button=paypal.Buttons({fundingSource:data.data('funding'),style:style,createOrder:function(){return paypalCheckoutInstance.createPayment({amount:data.data('amount'),locale:data.data('locale'),currency:data.data('currency'),flow:'checkout',enableShippingAddress:true,displayName:data.data('displayname'),lineItems:$.parseJSON(lineItems)});},validate:function(actions){var cart=customerData.get('cart'),customer=customerData.get('customer'),declinePayment=false,isGuestCheckoutAllowed;isGuestCheckoutAllowed=cart().isGuestCheckoutAllowed;declinePayment=!customer().firstname&&!isGuestCheckoutAllowed;if(declinePayment){actions.disable();}\npaypalActions=actions;},onCancel:function(data){jQuery(\"#maincontent\").trigger('processStop');},onError:function(err){console.error('paypalCheckout button render error',err);jQuery(\"#maincontent\").trigger('processStop');},onClick:function(data){var cart=customerData.get('cart'),customer=customerData.get('customer'),declinePayment=false,isGuestCheckoutAllowed;isGuestCheckoutAllowed=cart().isGuestCheckoutAllowed;declinePayment=!customer().firstname&&!isGuestCheckoutAllowed&&(typeof isGuestCheckoutAllowed!=='undefined');if(declinePayment){alert($t('To check out, please sign in with your email address.'));}},onApprove:function(data1){return paypalCheckoutInstance.tokenizePayment(data1,function(err,payload){jQuery(\"#maincontent\").trigger('processStart');var address=payload.details.shippingAddress;var recipientFirstName,recipientLastName;if(typeof address.recipientName!=='undefined'){var recipientName=address.recipientName.split(\" \");recipientFirstName=recipientName[0].replace(/'/g,\"&apos;\");recipientLastName=recipientName[1].replace(/'/g,\"&apos;\");}else{recipientFirstName=payload.details.firstName.replace(/'/g,\"&apos;\");recipientLastName=payload.details.lastName.replace(/'/g,\"&apos;\");}\npayload.details.shippingAddress={streetAddress:typeof address.line2!=='undefined'?address.line1.replace(/'/g,\"&apos;\")+\" \"+address.line2.replace(/'/g,\"&apos;\"):address.line1.replace(/'/g,\"&apos;\"),locality:address.city.replace(/'/g,\"&apos;\"),postalCode:address.postalCode,countryCodeAlpha2:address.countryCode,email:payload.details.email.replace(/'/g,\"&apos;\"),recipientFirstName:recipientFirstName,recipientLastName:recipientLastName,telephone:typeof payload.details.phone!=='undefined'?payload.details.phone:'',region:typeof address.state!=='undefined'?address.state.replace(/'/g,\"&apos;\"):''};payload.details.email=payload.details.email.replace(/'/g,\"&apos;\");payload.details.firstName=payload.details.firstName.replace(/'/g,\"&apos;\");payload.details.lastName=payload.details.lastName.replace(/'/g,\"&apos;\");if(typeof payload.details.businessName!=='undefined'){payload.details.businessName=payload.details.businessName.replace(/'/g,\"&apos;\");}\nlet isRequiredBillingAddress=data.data('requiredbillingaddress');if((isRequiredBillingAddress===1)&&(typeof payload.details.billingAddress!=='undefined')){var billingAddress=payload.details.billingAddress;payload.details.billingAddress={streetAddress:typeof billingAddress.line2!=='undefined'?billingAddress.line1.replace(/'/g,\"&apos;\")+\" \"+billingAddress.line2.replace(/'/g,\"&apos;\"):billingAddress.line1.replace(/'/g,\"&apos;\"),locality:billingAddress.city.replace(/'/g,\"&apos;\"),postalCode:billingAddress.postalCode,countryCodeAlpha2:billingAddress.countryCode,telephone:typeof payload.details.phone!=='undefined'?payload.details.phone:'',region:typeof billingAddress.state!=='undefined'?billingAddress.state.replace(/'/g,\"&apos;\"):''};}\nif(data.data('location')=='productpage'){var form=$(\"#product_addtocart_form\");if(!(form.validation()&&form.validation('isValid'))){return false;}\npayload.additionalData=form.serialize();}\nvar actionSuccess=data.data('actionsuccess');formBuilder.build({action:actionSuccess,fields:{result:JSON.stringify(payload)}}).submit();});}});if(!button.isEligible()){console.log('PayPal button is not elligible')\ndata.parent().remove();return;}\nif($('#'+data.attr('id')).length){button.render('#'+data.attr('id'));}},}});","PayPal_Braintree/js/paypal/credit/calculator.min.js":"define(['underscore','uiComponent','jquery'],function(_,Component,$){'use strict';return Component.extend({defaults:{template:\"PayPal_Braintree/credit/calculator\",displaySummary:true,displayInterestDetails:false,instalmentsFrom:0,currentInstalment:{term:0,monthlyPayment:0,apr:0,cost:0,costIncInterest:0},endpoint:null,instalments:[],visible:false,merchantName:''},initObservable:function(){this._super();if(this.instalments.length>0){this.currentInstalment=this.instalments[0];this.instalmentsFrom=this.instalments[this.instalments.length-1].monthlyPayment;this.visible=true;}else{this.loadInstalments();}\nthis.observe(['instalments','currentInstalment','instalmentsFrom','visible']);return this;},isCurrentInstalment:function(term){return(this.currentInstalment().term===term);},setCurrentInstalment:function(instalment){this.currentInstalment(instalment);},loadInstalments:function(){if(!this.endpoint){return false;}\nvar self=this;require(['Magento_Checkout/js/model/quote','jquery'],function(quote,$){if(typeof quote.totals().base_grand_total==='undefined'){return false;}\n$.getJSON(self.endpoint,{amount:quote.totals().base_grand_total},function(response){self.instalments(response);self.setCurrentInstalment(response[0]);self.visible(true);});});}});});","PayPal_Braintree/js/view/product-page.min.js":"define(['uiComponent'],function(Component){'use strict';return Component.extend({});});","PayPal_Braintree/js/view/payment/venmo.min.js":"define(['uiComponent','Magento_Checkout/js/model/payment/renderer-list'],function(Component,rendererList){'use strict';rendererList.push({type:'braintree_venmo',component:'PayPal_Braintree/js/view/payment/method-renderer/venmo'});return Component.extend({});});","PayPal_Braintree/js/view/payment/lpm.min.js":"define(['uiComponent','Magento_Checkout/js/model/payment/renderer-list'],function(Component,rendererList){'use strict';rendererList.push({type:'braintree_local_payment',component:'PayPal_Braintree/js/view/payment/method-renderer/lpm'});return Component.extend({});});","PayPal_Braintree/js/view/payment/validator-handler.min.js":"define(['jquery','Magento_Ui/js/model/messageList','PayPal_Braintree/js/view/payment/3d-secure','Magento_Checkout/js/model/full-screen-loader'],function($,globalMessageList,verify3DSecure,fullScreenLoader){'use strict';return{validators:[],getConfig:function(){return window.checkoutConfig.payment;},initialize:function(){var config=this.getConfig();if(config[verify3DSecure.getCode()].enabled){verify3DSecure.setConfig(config[verify3DSecure.getCode()]);this.add(verify3DSecure);}},add:function(validator){this.validators.push(validator);},validate:function(context,callback,errorCallback){var self=this,deferred;if(!self.validators.length){callback();return;}\ndeferred=$.map(self.validators,function(current){return current.validate(context);});$.when.apply($,deferred).done(function(){callback();}).fail(function(error){errorCallback();self.showError(error);});},showError:function(errorMessage){globalMessageList.addErrorMessage({message:errorMessage});fullScreenLoader.stopLoader(true);}};});","PayPal_Braintree/js/view/payment/3d-secure.min.js":"define(['jquery','PayPal_Braintree/js/view/payment/adapter','Magento_Checkout/js/model/quote','mage/translate','braintreeThreeDSecure','Magento_Checkout/js/model/full-screen-loader'],function($,braintree,quote,$t,threeDSecure,fullScreenLoader){'use strict';return{config:null,setConfig:function(config){this.config=config;this.config.thresholdAmount=parseFloat(config.thresholdAmount);},getCode:function(){return'three_d_secure';},escapeNonAsciiCharacters:function(str){return str.split(\"\").map(function(c){return/[^\\x00-\\x7F]$/.test(c)?c:c.split(\"\").map(function(a){return\"\\\\u00\"+a.charCodeAt().toString(16)}).join(\"\")}).join(\"\");},validate:function(context){let clientInstance=braintree.getApiClient(),state=$.Deferred(),totalAmount=parseFloat(quote.totals()['base_grand_total']).toFixed(2),billingAddress=quote.billingAddress();if(billingAddress.regionCode==null){billingAddress.regionCode=undefined;}\nif(billingAddress.regionCode!==undefined&&billingAddress.regionCode.length>2){billingAddress.regionCode=undefined;}\nif(quote.paymentMethod().method.indexOf('braintree_cc_vault_')!==-1){if(this.config.useCvvVault===true){state.resolve();return state.promise();}}\nif(!this.isAmountAvailable(totalAmount)||!this.isCountryAvailable(billingAddress.countryId)){state.resolve();return state.promise();}\nlet firstName=this.escapeNonAsciiCharacters(billingAddress.firstname);let lastName=this.escapeNonAsciiCharacters(billingAddress.lastname);let challengeRequested=this.getChallengeRequested();fullScreenLoader.startLoader();let setup3d=function(clientInstance){threeDSecure.create({version:2,client:clientInstance},function(threeDSecureErr,threeDSecureInstance){if(threeDSecureErr){fullScreenLoader.stopLoader();return state.reject($t('Please try again with another form of payment.'));}\nlet threeDSContainer=document.createElement('div'),tdMask=document.createElement('div'),tdFrame=document.createElement('div'),tdBody=document.createElement('div');threeDSContainer.id='braintree-three-d-modal';tdMask.className=\"bt-mask\";tdFrame.className=\"bt-modal-frame\";tdBody.className=\"bt-modal-body\";tdFrame.appendChild(tdBody);threeDSContainer.appendChild(tdMask);threeDSContainer.appendChild(tdFrame);threeDSecureInstance.verifyCard({amount:totalAmount,nonce:context.paymentMethodNonce,bin:context.creditCardBin,challengeRequested:challengeRequested,billingAddress:{givenName:firstName,surname:lastName,phoneNumber:billingAddress.telephone,streetAddress:billingAddress.street[0],extendedAddress:billingAddress.street[1],locality:billingAddress.city,region:billingAddress.regionCode,postalCode:billingAddress.postcode,countryCodeAlpha2:billingAddress.countryId},onLookupComplete:function(data,next){next();},addFrame:function(err,iframe){fullScreenLoader.stopLoader();if(err){console.log(\"Unable to verify card over 3D Secure\",err);return state.reject($t('Please try again with another form of payment.'));}\ntdBody.appendChild(iframe);document.body.appendChild(threeDSContainer);},removeFrame:function(){fullScreenLoader.startLoader();document.body.removeChild(threeDSContainer);}},function(err,response){fullScreenLoader.stopLoader();if(err){console.error(\"3DSecure validation failed\",err);if(err.code==='THREEDS_LOOKUP_VALIDATION_ERROR'){let errorMessage=err.details.originalError.details.originalError.error.message;if(errorMessage==='Billing line1 format is invalid.'&&billingAddress.street[0].length>50){return state.reject($t('Billing line1 must be string and less than 50 characters. Please update the address and try again.'));}else if(errorMessage==='Billing line2 format is invalid.'&&billingAddress.street[1].length>50){return state.reject($t('Billing line2 must be string and less than 50 characters. Please update the address and try again.'));}\nreturn state.reject($t(errorMessage));}else{return state.reject($t('Please try again with another form of payment.'));}}\nlet liability={shifted:response.liabilityShifted,shiftPossible:response.liabilityShiftPossible};if(liability.shifted||!liability.shifted&&!liability.shiftPossible){context.paymentMethodNonce=response.nonce;state.resolve();}else{state.reject($t('Please try again with another form of payment.'));}});});};if(!clientInstance){require(['PayPal_Braintree/js/view/payment/method-renderer/cc-form'],function(c){let config=c.extend({defaults:{clientConfig:{onReady:function(){}}}});braintree.setConfig(config.defaults.clientConfig);braintree.setup(setup3d);});}else{setup3d(clientInstance);}\nreturn state.promise();},isAmountAvailable:function(amount){amount=parseFloat(amount.toString());return amount>=this.config.thresholdAmount;},isCountryAvailable:function(countryId){let key,specificCountries=this.config.specificCountries;if(!specificCountries.length){return true;}\nfor(key in specificCountries){if(countryId===specificCountries[key]){return true;}}\nreturn false;},getChallengeRequested:function(){return this.config.challengeRequested;}};});","PayPal_Braintree/js/view/payment/adapter.min.js":"define(['jquery','braintree','braintreeDataCollector','braintreeHostedFields','Magento_Checkout/js/model/full-screen-loader','Magento_Ui/js/model/messageList','mage/translate'],function($,client,dataCollector,hostedFields,fullScreenLoader,globalMessageList,$t){'use strict';return{apiClient:null,config:{},checkout:null,deviceData:null,clientInstance:null,hostedFieldsInstance:null,paypalInstance:null,code:'braintree',events:{onClick:null,onCancel:null,onError:null},getApiClient:function(){return this.clientInstance;},setConfig:function(config){this.config=config;},getCode:function(){if(window.checkoutConfig.payment[this.code]){return this.code;}else{return'braintree_paypal';}},getClientToken:function(){return window.checkoutConfig.payment[this.getCode()].clientToken;},getEnvironment:function(){return window.checkoutConfig.payment[this.getCode()].environment;},getCurrentCode:function(paypalType=null){var code='braintree_paypal';if(paypalType!=='paypal'){code=code+'_'+paypalType;}\nreturn code;},getColor:function(paypalType=null){return window.checkoutConfig.payment[this.getCurrentCode(paypalType)].style.color;},getShape:function(paypalType=null){return window.checkoutConfig.payment[this.getCurrentCode(paypalType)].style.shape;},getSize:function(paypalType=null){return window.checkoutConfig.payment[this.getCurrentCode(paypalType)].style.size;},getLabel:function(paypalType=null){return window.checkoutConfig.payment[this.getCurrentCode(paypalType)].style.label;},getBranding:function(){return null;},getFundingIcons:function(){return null;},getDisabledFunding:function(){return window.checkoutConfig.payment[this.getCode()].disabledFunding;},showError:function(errorMessage){globalMessageList.addErrorMessage({message:errorMessage});fullScreenLoader.stopLoader(true);},disableButton:function(){fullScreenLoader.stopLoader(true);fullScreenLoader.startLoader();$('[data-button=\"place\"]').attr('disabled','disabled');},enableButton:function(){$('[data-button=\"place\"]').removeAttr('disabled');fullScreenLoader.stopLoader();},getPayPalInstance:function(){if(typeof this.config.paypalInstance!=='undefined'&&this.config.paypalInstance){return this.config.paypalInstance;}\nreturn null;},setPayPalInstance:function(val){this.config.paypalInstance=val;},setup:function(callback){if(!this.getClientToken()){this.showError($t('Sorry, but something went wrong.'));return;}\nif(this.clientInstance){if(typeof this.config.onReady==='function'){this.config.onReady(this);}\nif(typeof callback===\"function\"){callback(this.clientInstance);}\nreturn;}\nclient.create({authorization:this.getClientToken()},function(clientErr,clientInstance){if(clientErr){console.error('Braintree Setup Error',clientErr);return this.showError(\"Sorry, but something went wrong. Please contact the store owner.\");}\nvar options={client:clientInstance};if(typeof this.config.dataCollector==='object'&&typeof this.config.dataCollector.paypal==='boolean'){options.paypal=true;}\ndataCollector.create(options,function(err,dataCollectorInstance){if(err){return console.log(err);}\nthis.deviceData=dataCollectorInstance.deviceData;this.config.onDeviceDataReceived(this.deviceData);}.bind(this));this.clientInstance=clientInstance;if(typeof this.config.onReady==='function'){this.config.onReady(this);}\nif(typeof callback===\"function\"){callback(this.clientInstance);}}.bind(this));},setupHostedFields:function(){var self=this;if(this.hostedFieldsInstance){this.hostedFieldsInstance.teardown(function(){this.hostedFieldsInstance=null;this.setupHostedFields();}.bind(this));return;}\nhostedFields.create({client:this.clientInstance,fields:this.config.hostedFields,styles:{\"input\":{\"font-size\":\"14pt\",\"color\":\"#3A3A3A\"},\":focus\":{\"color\":\"black\"},\".valid\":{\"color\":\"green\"},\".invalid\":{\"color\":\"red\"}}},function(createErr,hostedFieldsInstance){if(createErr){self.showError($t(\"Braintree hosted fields could not be initialized. Please contact the store owner.\"));console.error('Braintree hosted fields error',createErr);return;}\nthis.config.onInstanceReady(hostedFieldsInstance);this.hostedFieldsInstance=hostedFieldsInstance;}.bind(this));},tokenizeHostedFields:function(){this.hostedFieldsInstance.tokenize({},function(tokenizeErr,payload){if(tokenizeErr){switch(tokenizeErr.code){case'HOSTED_FIELDS_FIELDS_EMPTY':console.error('All fields are empty! Please fill out the form.');break;case'HOSTED_FIELDS_FIELDS_INVALID':console.error('Some fields are invalid:',tokenizeErr.details.invalidFieldKeys);break;case'HOSTED_FIELDS_TOKENIZATION_FAIL_ON_DUPLICATE':console.error('This payment method already exists in your vault.');break;case'HOSTED_FIELDS_TOKENIZATION_CVV_VERIFICATION_FAILED':console.error('CVV did not pass verification');break;case'HOSTED_FIELDS_FAILED_TOKENIZATION':console.error('Tokenization failed server side. Is the card valid?');break;case'HOSTED_FIELDS_TOKENIZATION_NETWORK_ERROR':console.error('Network error occurred when tokenizing.');break;default:console.error('Something bad happened!',tokenizeErr);}}else{this.config.onPaymentMethodReceived(payload);}}.bind(this));}};});","PayPal_Braintree/js/view/payment/braintree.min.js":"define(['uiComponent','Magento_Checkout/js/model/payment/renderer-list'],function(Component,rendererList){'use strict';let config=window.checkoutConfig.payment,braintreeType='braintree',payPalType='braintree_paypal',braintreeAchDirectDebit='braintree_ach_direct_debit',braintreeVenmo='braintree_venmo',braintreeLocalPayment='braintree_local_payment';if(config[braintreeType]&&config[braintreeType].isActive&&config[braintreeType].clientToken){rendererList.push({type:braintreeType,component:'PayPal_Braintree/js/view/payment/method-renderer/hosted-fields'});}\nif(config[payPalType]&&config[payPalType].isActive){rendererList.push({type:payPalType,component:'PayPal_Braintree/js/view/payment/method-renderer/paypal'});}\nif(config[braintreeVenmo]&&config[braintreeVenmo].isAllowed&&config[braintreeVenmo].clientToken){rendererList.push({type:braintreeVenmo,component:'PayPal_Braintree/js/view/payment/method-renderer/venmo'});}\nif(config[braintreeAchDirectDebit]&&config[braintreeAchDirectDebit].isActive&&config[braintreeAchDirectDebit].clientToken){rendererList.push({type:braintreeAchDirectDebit,component:'PayPal_Braintree/js/view/payment/method-renderer/ach'});}\nif(config[braintreeLocalPayment]&&config[braintreeLocalPayment].clientToken){rendererList.push({type:braintreeLocalPayment,component:'PayPal_Braintree/js/view/payment/method-renderer/lpm'});}\nreturn Component.extend({});});","PayPal_Braintree/js/view/payment/ach.min.js":"define(['uiComponent','Magento_Checkout/js/model/payment/renderer-list'],function(Component,rendererList){'use strict';rendererList.push({type:'braintree_ach_direct_debit',component:'PayPal_Braintree/js/view/payment/method-renderer/ach'});return Component.extend({});});","PayPal_Braintree/js/view/payment/method-renderer/hosted-fields.min.js":"define(['jquery','PayPal_Braintree/js/view/payment/method-renderer/cc-form','PayPal_Braintree/js/validator','Magento_Vault/js/view/payment/vault-enabler','Magento_Checkout/js/model/payment/additional-validators','mage/translate'],function($,Component,validator,VaultEnabler,additionalValidators,$t){'use strict';return Component.extend({defaults:{template:'PayPal_Braintree/payment/form',clientConfig:{id:'co-transparent-form-braintree'},isValidCardNumber:false,isValidExpirationDate:false,isValidCvvNumber:false,onInstanceReady:function(instance){instance.on('validityChange',this.onValidityChange.bind(this));instance.on('cardTypeChange',this.onCardTypeChange.bind(this));}},initialize:function(){this._super();this.vaultEnabler=new VaultEnabler();this.vaultEnabler.setPaymentCode(this.getVaultCode());return this;},initClientConfig:function(){this._super();this.clientConfig.hostedFields=this.getHostedFields();this.clientConfig.onInstanceReady=this.onInstanceReady.bind(this);},getData:function(){var data=this._super();this.vaultEnabler.visitAdditionalData(data);return data;},isVaultEnabled:function(){return this.vaultEnabler.isVaultEnabled();},getHostedFields:function(){var self=this,fields={number:{selector:self.getSelector('cc_number'),placeholder:$t('4111 1111 1111 1111')},expirationDate:{selector:self.getSelector('expirationDate'),placeholder:$t('MM/YYYY')}};if(self.hasVerification()){fields.cvv={selector:self.getSelector('cc_cid'),placeholder:$t('123')};}\nreturn fields;},onValidityChange:function(event){if(event.emittedBy==='number'){this.selectedCardType(null);if(event.cards.length===1){this.isValidCardNumber=event.fields.number.isValid;this.selectedCardType(validator.getMageCardType(event.cards[0].type,this.getCcAvailableTypes()));this.validateCardType();}else{this.isValidCardNumber=event.fields.number.isValid;this.validateCardType();}}\nif(event.emittedBy==='expirationDate'){this.isValidExpirationDate=event.fields.expirationDate.isValid;}\nif(event.emittedBy==='cvv'){this.isValidCvvNumber=event.fields.cvv.isValid;}},onCardTypeChange:function(event){if(event.cards.length===1){this.selectedCardType(validator.getMageCardType(event.cards[0].type,this.getCcAvailableTypes()));}else{this.selectedCardType(null);}},validateField:function(selector,state){var $selector=$(this.getSelector(selector)),invalidClass='braintree-hosted-fields-invalid';if(state===true){$selector.removeClass(invalidClass);return true;}\n$selector.addClass(invalidClass);return false;},validateCardType:function(){return this.validateField('cc_number',(this.isValidCardNumber));},validateExpirationDate:function(){return this.validateField('expirationDate',(this.isValidExpirationDate===true));},validateCvvNumber:function(){var self=this;if(self.hasVerification()===false){return true;}\nreturn this.validateField('cc_cid',(this.isValidCvvNumber===true));},validateFormFields:function(){return(this.validateCardType()&&this.validateExpirationDate()&&this.validateCvvNumber())===true;},placeOrderClick:function(){if(this.validateFormFields()&&additionalValidators.validate()){this.placeOrder();}},getVaultCode:function(){return window.checkoutConfig.payment[this.getCode()].ccVaultCode;}});});","PayPal_Braintree/js/view/payment/method-renderer/cc-form.min.js":"define(['underscore','jquery','Magento_Payment/js/view/payment/cc-form','Magento_Checkout/js/model/quote','PayPal_Braintree/js/view/payment/adapter','mage/translate','PayPal_Braintree/js/validator','PayPal_Braintree/js/view/payment/validator-handler','Magento_Checkout/js/model/full-screen-loader'],function(_,$,Component,quote,braintree,$t,validator,validatorManager,fullScreenLoader){'use strict';return Component.extend({defaults:{active:false,braintreeClient:null,braintreeDeviceData:null,paymentMethodNonce:null,lastBillingAddress:null,validatorManager:validatorManager,code:'braintree',isProcessing:false,creditCardBin:null,additionalData:{},clientConfig:{onReady:function(context){context.setupHostedFields();},onPaymentMethodReceived:function(response){this.handleNonce(response);this.isProcessing=false;},onPaymentMethodError:function(){this.isProcessing=false;},onDeviceDataReceived:function(deviceData){this.additionalData['device_data']=deviceData;},onInstanceReady:function(){},onError:function(response){this.isProcessing=false;braintree.showError($t('Payment '+this.getTitle()+' can\\'t be initialized'));throw response.message;},onCancelled:function(){this.paymentMethodNonce=null;this.isProcessing=false;}},imports:{onActiveChange:'active'}},initObservable:function(){validator.setConfig(window.checkoutConfig.payment[this.getCode()]);this._super().observe(['active']);this.validatorManager.initialize();this.initClientConfig();return this;},getCode:function(){return this.code;},isActive:function(){let active=this.getCode()===this.isChecked();this.active(active);return active;},onActiveChange:function(isActive){if(!isActive){return;}\nthis.initBraintree();},initClientConfig:function(){_.each(this.clientConfig,function(fn,name){if(typeof fn==='function'){this.clientConfig[name]=fn.bind(this);}},this);},initBraintree:function(){let intervalId=setInterval(function(){if($('#braintree-hosted-field-number').length){clearInterval(intervalId);fullScreenLoader.stopLoader(true);}},500);if(braintree.checkout){braintree.checkout.teardown(function(){braintree.checkout=null;});}\nfullScreenLoader.startLoader();braintree.setConfig(this.clientConfig);braintree.setup();},getSelector:function(field){return'#'+this.getCode()+'_'+field;},getCcAvailableTypes:function(){let availableTypes=validator.getAvailableCardTypes(),billingAddress=quote.billingAddress(),billingCountryId;this.lastBillingAddress=quote.shippingAddress();if(!billingAddress){billingAddress=this.lastBillingAddress;}\nbillingCountryId=billingAddress.countryId;if(billingCountryId&&validator.getCountrySpecificCardTypes(billingCountryId)){return validator.collectTypes(availableTypes,validator.getCountrySpecificCardTypes(billingCountryId));}\nreturn availableTypes;},getEnvironment:function(){return window.checkoutConfig.payment[this.getCode()].environment;},getData:function(){let data={'method':this.getCode(),'additional_data':{'payment_method_nonce':this.paymentMethodNonce,'g-recaptcha-response':$(\"#token-grecaptcha-braintree\").val()}};data['additional_data']=_.extend(data['additional_data'],this.additionalData);return data;},setPaymentMethodNonce:function(paymentMethodNonce){this.paymentMethodNonce=paymentMethodNonce;},setCreditCardBin:function(creditCardBin){this.creditCardBin=creditCardBin;},handleNonce:function(payload){let self=this;this.setPaymentMethodNonce(payload.nonce);this.setCreditCardBin(payload.details.bin);self.validatorManager.validate(self,function(){return self.placeOrder('parent');},function(){self.isProcessing=false;self.paymentMethodNonce=null;self.creditCardBin=null;});},placeOrder:function(key){if(key){return this._super();}\nif(this.isProcessing){return false;}else{this.isProcessing=true;}\nbraintree.tokenizeHostedFields();return false;},getIcons:function(type){return window.checkoutConfig.payment.braintree.icons.hasOwnProperty(type)?window.checkoutConfig.payment.braintree.icons[type]:false;},});});","PayPal_Braintree/js/view/payment/method-renderer/ach.min.js":"define(['Magento_Checkout/js/view/payment/default','ko','jquery','braintree','braintreeDataCollector','braintreeAch','PayPal_Braintree/js/form-builder','Magento_Ui/js/model/messageList','Magento_Checkout/js/action/select-billing-address','Magento_Checkout/js/model/full-screen-loader','Magento_Checkout/js/model/quote','mage/translate'],function(Component,ko,$,braintree,dataCollector,ach,formBuilder,messageList,selectBillingAddress,fullScreenLoader,quote,$t){'use strict';return Component.extend({defaults:{deviceData:null,paymentMethodNonce:null,template:'PayPal_Braintree/payment/ach',achInstance:null,routingNumber:ko.observable(\"\"),accountNumber:ko.observable(\"\"),accountType:ko.observable(\"checking\"),ownershipType:ko.observable(\"personal\"),firstName:ko.observable(\"\"),lastName:ko.observable(\"\"),businessName:ko.observable(\"\"),hasAuthorization:ko.observable(false),business:ko.observable(false),personal:ko.observable(true)},clickAchBtn:function(){if(!this.validateForm('#'+this.getCode()+'-form')){return;}\nfullScreenLoader.startLoader();var self=this;var billingAddress=quote.billingAddress();let regionCode;let bankDetails={routingNumber:self.routingNumber(),accountNumber:self.accountNumber(),accountType:self.accountType(),ownershipType:self.ownershipType(),billingAddress:{streetAddress:billingAddress.street[0],extendedAddress:billingAddress.street[1],locality:billingAddress.city,region:billingAddress.regionCode,postalCode:billingAddress.postcode,}};if(bankDetails.ownershipType==='personal'){bankDetails.firstName=self.firstName();bankDetails.lastName=self.lastName();}else{bankDetails.businessName=self.businessName();}\nvar mandateText=document.getElementById('braintree-ach-mandate').textContent;if(typeof billingAddress.regionCode==='undefined'){$.get('/rest/V1/directory/countries/'+billingAddress.countryId).done(function(data){if(typeof data.available_regions!=='undefined'){for(var i=0;i<data.available_regions.length;++i){if(data.available_regions[i].id===billingAddress.regionId){regionCode=data.available_regions[i].code;bankDetails.billingAddress.region=regionCode;self.tokenizeAch(bankDetails,mandateText);}}}else{fullScreenLoader.stopLoader();self.tokenizeAch(bankDetails,mandateText);}}).fail(function(){fullScreenLoader.stopLoader();});}else{self.tokenizeAch(bankDetails,mandateText);}},tokenizeAch:function(bankDetails,mandateText){var self=this;this.achInstance.tokenize({bankDetails:bankDetails,mandateText:mandateText},function(tokenizeErr,tokenizedPayload){if(tokenizeErr){self.setErrorMsg($t('There was an error with the provided bank details. Please check and try again.'));self.hasAuthorization(false);}else{fullScreenLoader.stopLoader();self.handleAchSuccess(tokenizedPayload);}});},getClientToken:function(){return window.checkoutConfig.payment[this.getCode()].clientToken;},getCode:function(){return'braintree_ach_direct_debit';},getStoreName:function(){return window.checkoutConfig.payment[this.getCode()].storeName;},getData:function(){let data={'method':this.getCode(),'additional_data':{'payment_method_nonce':this.paymentMethodNonce,}};data['additional_data']=_.extend(data['additional_data'],this.additionalData);return data;},getTitle:function(){return'ACH Direct Debit';},handleAchSuccess:function(payload){this.setPaymentMethodNonce(payload.nonce);this.placeOrder();},initialize:function(){this._super();var self=this;braintree.create({authorization:self.getClientToken()},function(clientError,clientInstance){if(clientError){this.setErrorMsg($t('Unable to initialize Braintree Client.'));return;}\nach.create({client:clientInstance},function(achErr,achInstance){if(achErr){self.setErrorMsg($t('Error initializing ACH: %1').replace('%1',achErr));return;}\nself.setAchInstance(achInstance);});});return this;},isAllowed:function(){return window.checkoutConfig.payment[this.getCode()].isAllowed;},changeOwnershipType:function(data,event){var self=this;if(event.currentTarget.value==='business'){self.business(true);self.personal(false);}else{self.business(false);self.personal(true);}},isBusiness:function(){return this.business;},isPersonal:function(){return this.personal;},setErrorMsg:function(message){messageList.addErrorMessage({message:message});},setPaymentMethodNonce:function(nonce){this.paymentMethodNonce=nonce;},setAchInstance:function(instance){this.achInstance=instance;},validateForm:function(form){return $(form).validation()&&$(form).validation('isValid');}});});","PayPal_Braintree/js/view/payment/method-renderer/vault.min.js":"define(['ko','jquery','Magento_Vault/js/view/payment/method-renderer/vault','PayPal_Braintree/js/view/payment/adapter','Magento_Ui/js/model/messageList','PayPal_Braintree/js/view/payment/validator-handler','Magento_Checkout/js/model/payment/additional-validators','Magento_Checkout/js/model/full-screen-loader','braintree','braintreeHostedFields','mage/url'],function(ko,$,VaultComponent,Braintree,globalMessageList,validatorManager,additionalValidators,fullScreenLoader,client,hostedFields,url){'use strict';return VaultComponent.extend({defaults:{active:false,hostedFieldsInstance:null,imports:{onActiveChange:'active'},modules:{hostedFields:'${ $.parentName }.braintree'},template:'PayPal_Braintree/payment/cc/vault',updatePaymentUrl:url.build('braintree/payment/updatepaymentmethod'),vaultedCVV:ko.observable(\"\"),validatorManager:validatorManager,isValidCvv:false,onInstanceReady:function(instance){instance.on('validityChange',this.onValidityChange.bind(this));}},onValidityChange:function(event){if(event.emittedBy==='cvv'){this.isValidCvv=event.fields.cvv.isValid;}},initObservable:function(){this._super().observe(['active']);this.validatorManager.initialize();return this;},isActive:function(){let active=this.getId()===this.isChecked();this.active(active);return active;},onActiveChange:function(isActive){let self=this;if(!isActive){return;}\nif(self.showCvvVerify()){if(self.hostedFieldsInstance){self.hostedFieldsInstance.teardown(function(teardownError){if(teardownError){globalMessageList.addErrorMessage({message:teardownError.message});}\nself.hostedFieldsInstance=null;self.initHostedCvvField();});return;}\nself.initHostedCvvField();}},initHostedCvvField:function(){let self=this;client.create({authorization:Braintree.getClientToken()},function(clientError,clientInstance){if(clientError){globalMessageList.addErrorMessage({message:clientError.message});}\nhostedFields.create({client:clientInstance,fields:{cvv:{selector:'#'+self.getId()+'_cid',placeholder:'123'}}},function(hostedError,hostedFieldsInstance){if(hostedError){globalMessageList.addErrorMessage({message:hostedError.message});return;}\nself.hostedFieldsInstance=hostedFieldsInstance;self.onInstanceReady(self.hostedFieldsInstance);});});},getCode:function(){return'braintree_cc_vault';},getMaskedCard:function(){return this.details.maskedCC;},getExpirationDate:function(){return this.details.expirationDate;},getCardType:function(){return this.details.type;},showCvvVerify:function(){return window.checkoutConfig.payment[this.code].cvvVerify;},validateCvv:function(selector,state){let $selector=$(selector),invalidClass='braintree-hosted-fields-invalid';if(state===true){$selector.removeClass(invalidClass);return true;}\n$selector.addClass(invalidClass);return false;},placeOrder:function(){let self=this;if(self.showCvvVerify()){if(!self.validateCvv('#'+self.getId()+'_cid',self.isValidCvv)||!additionalValidators.validate()){return;}}else{if(!additionalValidators.validate()){return;}}\nfullScreenLoader.startLoader();if(self.showCvvVerify()&&typeof self.hostedFieldsInstance!=='undefined'){self.hostedFieldsInstance.tokenize({},function(error,payload){if(error){fullScreenLoader.stopLoader();globalMessageList.addErrorMessage({message:error.message});return;}\n$.getJSON(self.updatePaymentUrl,{'nonce':payload.nonce,'public_hash':self.publicHash}).done(function(response){if(response.success===false){fullScreenLoader.stopLoader();globalMessageList.addErrorMessage({message:'CVV verification failed.'});return;}\nself.getPaymentMethodNonce();})});}else{self.getPaymentMethodNonce();}},getPaymentMethodNonce:function(){let self=this;fullScreenLoader.startLoader();$.getJSON(self.nonceUrl,{'public_hash':self.publicHash,'cvv':self.vaultedCVV()}).done(function(response){fullScreenLoader.stopLoader();self.hostedFields(function(formComponent){formComponent.setPaymentMethodNonce(response.paymentMethodNonce);formComponent.setCreditCardBin(response.details.bin);formComponent.additionalData['public_hash']=self.publicHash;formComponent.code=self.code;if(self.vaultedCVV()){formComponent.additionalData['cvv']=self.vaultedCVV();}\nself.validatorManager.validate(formComponent,function(){fullScreenLoader.stopLoader();return formComponent.placeOrder('parent');},function(){fullScreenLoader.stopLoader();formComponent.setPaymentMethodNonce(null);formComponent.setCreditCardBin(null);});});}).fail(function(response){let error=JSON.parse(response.responseText);fullScreenLoader.stopLoader();globalMessageList.addErrorMessage({message:error.message});});}});});","PayPal_Braintree/js/view/payment/method-renderer/venmo.min.js":"define(['Magento_Checkout/js/view/payment/default','braintree','braintreeDataCollector','braintreeVenmo','PayPal_Braintree/js/form-builder','Magento_Ui/js/model/messageList','Magento_Checkout/js/model/full-screen-loader','Magento_Checkout/js/model/payment/additional-validators','mage/translate'],function(Component,braintree,dataCollector,venmo,formBuilder,messageList,fullScreenLoader,additionalValidators,$t){'use strict';return Component.extend({defaults:{deviceData:null,paymentMethodNonce:null,template:'PayPal_Braintree/payment/venmo',venmoInstance:null},clickVenmoBtn:function(){let self=this;if(!additionalValidators.validate()){return false;}\nif(!this.venmoInstance){this.setErrorMsg($t('Venmo not initialized, please try reloading.'));return;}\nthis.venmoInstance.tokenize(function(tokenizeErr,payload){if(tokenizeErr){if(tokenizeErr.code==='VENMO_CANCELED'){self.setErrorMsg($t('Venmo app is not available or the payment flow was cancelled.'));}else if(tokenizeErr.code==='VENMO_APP_CANCELED'){self.setErrorMsg($t('Venmo payment flow cancelled.'));}else{self.setErrorMsg(tokenizeErr.message);}}else{self.handleVenmoSuccess(payload);}});},collectDeviceData:function(clientInstance,callback){let self=this;dataCollector.create({client:clientInstance,paypal:true},function(dataCollectorErr,dataCollectorInstance){if(dataCollectorErr){return;}\nself.deviceData=dataCollectorInstance.deviceData;callback();});},getClientToken:function(){return window.checkoutConfig.payment[this.getCode()].clientToken;},getCode:function(){return'braintree_venmo';},getData:function(){let data={'method':this.getCode(),'additional_data':{'payment_method_nonce':this.paymentMethodNonce,'device_data':this.deviceData}};data['additional_data']=_.extend(data['additional_data'],this.additionalData);return data;},getPaymentMarkSrc:function(){return window.checkoutConfig.payment[this.getCode()].paymentMarkSrc;},getTitle:function(){return'Venmo';},handleVenmoSuccess:function(payload){this.setPaymentMethodNonce(payload.nonce);this.placeOrder();},initialize:function(){this._super();let self=this;braintree.create({authorization:self.getClientToken()},function(clientError,clientInstance){if(clientError){this.setErrorMsg($t('Unable to initialize Braintree Client.'));return;}\nself.collectDeviceData(clientInstance,function(){venmo.create({client:clientInstance,allowDesktop:true,allowDesktopWebLogin:true,mobileWebFallBack:true,paymentMethodUsage:'single_use',allowNewBrowserTab:false},function(venmoErr,venmoInstance){if(venmoErr){self.setErrorMsg($t('Error initializing Venmo: %1').replace('%1',venmoErr));return;}\nif(!venmoInstance.isBrowserSupported()){console.log('Browser does not support Venmo');return;}\nself.setVenmoInstance(venmoInstance);});});});return this;},isAllowed:function(){return window.checkoutConfig.payment[this.getCode()].isAllowed;},setErrorMsg:function(message){messageList.addErrorMessage({message:message});},setPaymentMethodNonce:function(nonce){this.paymentMethodNonce=nonce;},setVenmoInstance:function(instance){this.venmoInstance=instance;}});});","PayPal_Braintree/js/view/payment/method-renderer/paypal.min.js":"define(['jquery','underscore','Magento_Checkout/js/view/payment/default','braintree','braintreeCheckoutPayPalAdapter','braintreePayPalCheckout','Magento_Checkout/js/model/quote','Magento_Checkout/js/model/full-screen-loader','Magento_Checkout/js/model/payment/additional-validators','Magento_Checkout/js/model/step-navigator','Magento_Vault/js/view/payment/vault-enabler','Magento_Checkout/js/action/create-billing-address','Magento_Checkout/js/action/select-billing-address','Magento_CheckoutAgreements/js/view/checkout-agreements','mage/translate'],function($,_,Component,braintree,Braintree,paypalCheckout,quote,fullScreenLoader,additionalValidators,stepNavigator,VaultEnabler,createBillingAddress,selectBillingAddress,checkoutAgreements,$t){'use strict';return Component.extend({defaults:{template:'PayPal_Braintree/payment/paypal',code:'braintree_paypal',active:false,paypalInstance:null,paymentMethodNonce:null,grandTotalAmount:null,isReviewRequired:false,customerEmail:null,additionalData:{},lineItemsArray:['name','kind','quantity','unitAmount','unitTaxAmount','productCode','description'],clientConfig:{offerCredit:false,offerCreditOnly:false,dataCollector:{paypal:true},buttonPayPalId:'braintree_paypal_placeholder',buttonCreditId:'braintree_paypal_credit_placeholder',buttonPaylaterId:'braintree_paypal_paylater_placeholder',onDeviceDataReceived:function(deviceData){this.additionalData['device_data']=deviceData;},onReady:function(context){this.setupPayPal();},onPaymentMethodReceived:function(response){this.beforePlaceOrder(response);}},imports:{onActiveChange:'active'}},initObservable:function(){var self=this;this._super().observe(['active','isReviewRequired','customerEmail']);window.addEventListener('hashchange',function(e){var methodCode=quote.paymentMethod();if(methodCode==='braintree_paypal'||methodCode==='braintree_paypal_vault'){if(e.newURL.indexOf('payment')>0&&self.grandTotalAmount!==null){self.reInitPayPal();}}});quote.paymentMethod.subscribe(function(value){var methodCode=value;if(methodCode==='braintree_paypal'||methodCode==='braintree_paypal_vault'){self.reInitPayPal();}});this.vaultEnabler=new VaultEnabler();this.vaultEnabler.setPaymentCode(this.getVaultCode());this.vaultEnabler.isActivePaymentTokenEnabler.subscribe(function(){self.onVaultPaymentTokenEnablerChange();});this.grandTotalAmount=quote.totals()['base_grand_total'];quote.totals.subscribe(function(){if(self.grandTotalAmount!==quote.totals()['base_grand_total']){self.grandTotalAmount=quote.totals()['base_grand_total'];var methodCode=quote.paymentMethod();if(methodCode&&(methodCode.method==='braintree_paypal'||methodCode.method==='braintree_paypal_vault')){self.reInitPayPal();}}});this.isReviewRequired(false);this.initClientConfig();return this;},getCode:function(){return this.code;},getTitle:function(){return window.checkoutConfig.payment[this.getCode()].title;},isActive:function(){var active=this.getCode()===this.isChecked();this.active(active);return active;},onActiveChange:function(isActive){if(!isActive){return;}\nthis.reInitPayPal();},initClientConfig:function(){this.clientConfig=_.extend(this.clientConfig,this.getPayPalConfig());_.each(this.clientConfig,function(fn,name){if(typeof fn==='function'){this.clientConfig[name]=fn.bind(this);}},this);},setPaymentMethodNonce:function(paymentMethodNonce){this.paymentMethodNonce=paymentMethodNonce;},setBillingAddress:function(customer,address){var billingAddress={street:[address.line1],city:address.city,postcode:address.postalCode,countryId:address.countryCode,email:customer.email,firstname:customer.firstName,lastname:customer.lastName,telephone:typeof customer.phone!=='undefined'?customer.phone:'00000000000'};billingAddress['region_code']=typeof address.state==='string'?address.state:'';billingAddress=createBillingAddress(billingAddress);quote.billingAddress(billingAddress);},beforePlaceOrder:function(data){this.setPaymentMethodNonce(data.nonce);this.customerEmail(data.details.email);if(quote.isVirtual()){this.isReviewRequired(true);}else{if(this.isRequiredBillingAddress()==='1'||quote.billingAddress()===null){if(typeof data.details.billingAddress!=='undefined'){this.setBillingAddress(data.details,data.details.billingAddress);}else{this.setBillingAddress(data.details,data.details.shippingAddress);}}else{if(quote.shippingAddress()===quote.billingAddress()){selectBillingAddress(quote.shippingAddress());}else{selectBillingAddress(quote.billingAddress());}}}\nthis.placeOrder();},reInitPayPal:function(){this.disableButton();this.clientConfig.paypal.amount=parseFloat(this.grandTotalAmount).toFixed(2);if(!quote.isVirtual()){this.clientConfig.paypal.enableShippingAddress=true;this.clientConfig.paypal.shippingAddressEditable=false;this.clientConfig.paypal.shippingAddressOverride=this.getShippingAddress();}\nthis.clientConfig.paypal.lineItems=this.getLineItems();Braintree.setConfig(this.clientConfig);if(Braintree.getPayPalInstance()){Braintree.getPayPalInstance().teardown(function(){Braintree.setup();}.bind(this));Braintree.setPayPalInstance(null);}else{Braintree.setup();this.enableButton();}},setupPayPal:function(){var self=this;if(Braintree.config.paypalInstance){fullScreenLoader.stopLoader(true);return;}\npaypalCheckout.create({client:Braintree.clientInstance},function(createErr,paypalCheckoutInstance){if(createErr){Braintree.showError($t(\"PayPal Checkout could not be initialized. Please contact the store owner.\"));console.error('paypalCheckout error',createErr);return;}\nlet quoteObj=quote.totals();var configSDK={components:'buttons,messages,funding-eligibility',\"enable-funding\":\"paylater\",currency:quoteObj['base_currency_code']};var merchantCountry=window.checkoutConfig.payment['braintree_paypal'].merchantCountry;if(Braintree.getEnvironment()=='sandbox'&&merchantCountry!=null){configSDK[\"buyer-country\"]=merchantCountry;}\npaypalCheckoutInstance.loadPayPalSDK(configSDK,function(){this.loadPayPalButton(paypalCheckoutInstance,'paypal');if(this.isCreditEnabled()){this.loadPayPalButton(paypalCheckoutInstance,'credit');}\nif(this.isPaylaterEnabled()){this.loadPayPalButton(paypalCheckoutInstance,'paylater');}}.bind(this));}.bind(this));},loadPayPalButton:function(paypalCheckoutInstance,funding){var paypalPayment=Braintree.config.paypal,onPaymentMethodReceived=Braintree.config.onPaymentMethodReceived;var style={color:Braintree.getColor(funding),shape:Braintree.getShape(funding),size:Braintree.getSize(funding),label:Braintree.getLabel(funding)};if(Braintree.getBranding()){style.branding=Braintree.getBranding();}\nif(Braintree.getFundingIcons()){style.fundingicons=Braintree.getFundingIcons();}\nif(funding==='credit'){Braintree.config.buttonId=this.clientConfig.buttonCreditId;}else if(funding==='paylater'){Braintree.config.buttonId=this.clientConfig.buttonPaylaterId;}else{Braintree.config.buttonId=this.clientConfig.buttonPayPalId;}\nBraintree.config.paypalInstance=paypalCheckoutInstance;var events=Braintree.events;$('#'+Braintree.config.buttonId).html('');var button=paypal.Buttons({fundingSource:funding,env:Braintree.getEnvironment(),style:style,commit:true,locale:Braintree.config.paypal.locale,onInit:function(data,actions){var agreements=checkoutAgreements().agreements,shouldDisableActions=false;actions.disable();_.each(agreements,function(item,index){if(checkoutAgreements().isAgreementRequired(item)){var paymentMethodCode=quote.paymentMethod().method,inputId='#agreement_'+paymentMethodCode+'_'+item.agreementId,inputEl=document.querySelector(inputId);if(!inputEl.checked){shouldDisableActions=true;}\ninputEl.addEventListener('change',function(event){if(additionalValidators.validate()){actions.enable();}else{actions.disable();}});}});if(!shouldDisableActions){actions.enable();}},createOrder:function(){return paypalCheckoutInstance.createPayment(paypalPayment).catch(function(err){throw err.details.originalError.details.originalError.paymentResource;});},onCancel:function(data){console.log('checkout.js payment cancelled',JSON.stringify(data,0,2));if(typeof events.onCancel==='function'){events.onCancel();}},onError:function(err){if(err.errorName==='VALIDATION_ERROR'&&err.errorMessage.indexOf('Value is invalid')!==-1){Braintree.showError($t('Address failed validation. Please check and confirm your City, State, and Postal Code'));}else{Braintree.showError($t(\"PayPal Checkout could not be initialized. Please contact the store owner.\"));}\nBraintree.config.paypalInstance=null;console.error('Paypal checkout.js error',err);if(typeof events.onError==='function'){events.onError(err);}}.bind(this),onClick:function(data){if(!quote.isVirtual()){this.clientConfig.paypal.enableShippingAddress=true;this.clientConfig.paypal.shippingAddressEditable=false;this.clientConfig.paypal.shippingAddressOverride=this.getShippingAddress();}\nif(!additionalValidators.validate()){return false;}\nif(typeof events.onClick==='function'){events.onClick(data);}}.bind(this),onApprove:function(data,actions){return paypalCheckoutInstance.tokenizePayment(data).then(function(payload){onPaymentMethodReceived(payload);});}});if(button.isEligible()&&$('#'+Braintree.config.buttonId).length){button.render('#'+Braintree.config.buttonId).then(function(){Braintree.enableButton();if(typeof Braintree.config.onPaymentMethodError==='function'){Braintree.config.onPaymentMethodError();}}.bind(this)).then(function(data){if(typeof events.onRender==='function'){events.onRender(data);}});}},getLocale:function(){return window.checkoutConfig.payment[this.getCode()].locale;},isRequiredBillingAddress:function(){return window.checkoutConfig.payment[this.getCode()].isRequiredBillingAddress;},getPayPalConfig:function(){var totals=quote.totals(),config={},isActiveVaultEnabler=this.isActiveVault();config.paypal={flow:'checkout',amount:parseFloat(this.grandTotalAmount).toFixed(2),currency:totals['base_currency_code'],locale:this.getLocale(),onError:function(){this.paymentMethodNonce=null;},onUnsupported:function(){this.paymentMethodNonce=null;}};if(isActiveVaultEnabler){config.paypal.requestBillingAgreement=true;}\nif(!quote.isVirtual()){config.paypal.enableShippingAddress=true;config.paypal.shippingAddressEditable=false;config.paypal.shippingAddressOverride=this.getShippingAddress();}\nif(this.getMerchantName()){config.paypal.displayName=this.getMerchantName();}\nreturn config;},getShippingAddress:function(){var address=quote.shippingAddress();return{recipientName:address.firstname+' '+address.lastname,line1:address.street[0],line2:typeof address.street[2]==='undefined'?address.street[1]:address.street[1]+' '+address.street[2],city:address.city,countryCode:address.countryId,postalCode:address.postcode,state:address.regionCode};},getMerchantName:function(){return window.checkoutConfig.payment[this.getCode()].merchantName;},getData:function(){var data={'method':this.getCode(),'additional_data':{'payment_method_nonce':this.paymentMethodNonce}};data['additional_data']=_.extend(data['additional_data'],this.additionalData);this.vaultEnabler.visitAdditionalData(data);return data;},getPaymentAcceptanceMarkSrc:function(){return window.checkoutConfig.payment[this.getCode()].paymentAcceptanceMarkSrc;},getVaultCode:function(){return window.checkoutConfig.payment[this.getCode()].vaultCode;},isSkipOrderReview:function(){return window.checkoutConfig.payment[this.getCode()].skipOrderReview;},isActiveVault:function(){return this.vaultEnabler.isVaultEnabled()&&this.vaultEnabler.isActivePaymentTokenEnabler();},onVaultPaymentTokenEnablerChange:function(){this.clientConfig.paypal.singleUse=!this.isActiveVault();this.reInitPayPal();},disableButton:function(){fullScreenLoader.stopLoader(true);fullScreenLoader.startLoader();$('[data-button=\"place\"]').attr('disabled','disabled');},enableButton:function(){$('[data-button=\"place\"]').removeAttr('disabled');fullScreenLoader.stopLoader(true);},payWithPayPal:function(){if(additionalValidators.validate()){Braintree.checkout.paypal.initAuthFlow();}},getPayPalButtonId:function(){return this.clientConfig.buttonPayPalId;},getCreditButtonId:function(){return this.clientConfig.buttonCreditId;},getPaylaterButtonId:function(){return this.clientConfig.buttonPaylaterId;},isPaylaterEnabled:function(){return window.checkoutConfig.payment['braintree_paypal_paylater']['isActive'];},isPaylaterMessageEnabled:function(){return window.checkoutConfig.payment['braintree_paypal_paylater']['isMessageActive'];},getGrandTotalAmount:function(){return parseFloat(this.grandTotalAmount).toFixed(2);},isCreditEnabled:function(){return window.checkoutConfig.payment['braintree_paypal_credit']['isActive'];},getMessagingLayout:function(){return window.checkoutConfig.payment['braintree_paypal_paylater']['message']['layout'];},getMessagingLogo:function(){return window.checkoutConfig.payment['braintree_paypal_paylater']['message']['logo'];},getMessagingLogoPosition:function(){return window.checkoutConfig.payment['braintree_paypal_paylater']['message']['logo_position'];},getMessagingTextColor:function(){return window.checkoutConfig.payment['braintree_paypal_paylater']['message']['text_color'];},getLineItems:function(){let self=this;let lineItems=[],storeCredit=0,giftCardAccount=0;let giftWrappingItems=0,giftWrappingOrder=0;$.each(quote.totals()['total_segments'],function(segmentsKey,segmentsItem){if(segmentsItem['code']==='customerbalance'){storeCredit=parseFloat(Math.abs(segmentsItem['value']).toString()).toFixed(2);}\nif(segmentsItem['code']==='giftcardaccount'){giftCardAccount=parseFloat(Math.abs(segmentsItem['value']).toString()).toFixed(2);}\nif(segmentsItem['code']==='giftwrapping'){let extensionAttributes=segmentsItem['extension_attributes'];giftWrappingOrder=extensionAttributes['gw_base_price'];giftWrappingItems=extensionAttributes['gw_items_base_price'];}});if(this.canSendLineItems()){$.each(quote.getItems(),function(quoteItemKey,quoteItem){if(quoteItem.parent_item_id!==null||0.0===quoteItem.price){return true;}\nlet itemName=self.replaceUnsupportedCharacters(quoteItem.name);let itemSku=self.replaceUnsupportedCharacters(quoteItem.sku);let description='';let itemQty=parseFloat(quoteItem.qty);let itemUnitAmount=parseFloat(quoteItem.price);if(itemQty>Math.floor(itemQty)&&itemQty<Math.ceil(itemQty)){description='Item quantity is '+itemQty.toFixed(2)+' and per unit amount is '+itemUnitAmount.toFixed(2);itemUnitAmount=parseFloat(itemQty*itemUnitAmount);itemQty=parseFloat('1');}\nlet lineItemValues=[itemName,'debit',itemQty.toFixed(2),itemUnitAmount.toFixed(2),parseFloat(quoteItem.base_tax_amount).toFixed(2),itemSku,description];let mappedLineItems=$.map(self.lineItemsArray,function(itemElement,itemIndex){return[[self.lineItemsArray[itemIndex],lineItemValues[itemIndex]]]});lineItems[quoteItemKey]=Object.fromEntries(mappedLineItems);});let baseDiscountAmount=parseFloat(Math.abs(quote.totals()['base_discount_amount']).toString()).toFixed(2);if(baseDiscountAmount>0){let discountLineItem={'name':'Discount','kind':'credit','quantity':1.00,'unitAmount':baseDiscountAmount};lineItems=$.merge(lineItems,[discountLineItem]);}\nif(quote.totals()['base_shipping_amount']>0){let shippingLineItem={'name':'Shipping','kind':'debit','quantity':1.00,'unitAmount':quote.totals()['base_shipping_amount']};lineItems=$.merge(lineItems,[shippingLineItem]);}\nif(storeCredit>0){let storeCreditItem={'name':'Store Credit','kind':'credit','quantity':1.00,'unitAmount':storeCredit};lineItems=$.merge(lineItems,[storeCreditItem]);}\nif(giftWrappingItems>0){let gwItems={'name':'Gift Wrapping for Items','kind':'debit','quantity':1.00,'unitAmount':giftWrappingItems};lineItems=$.merge(lineItems,[gwItems]);}\nif(giftWrappingOrder>0){let gwOrderItem={'name':'Gift Wrapping for Order','kind':'debit','quantity':1.00,'unitAmount':giftWrappingOrder};lineItems=$.merge(lineItems,[gwOrderItem]);}\nif(giftCardAccount>0){let giftCardItem={'name':'Gift Cards','kind':'credit','quantity':1.00,'unitAmount':giftCardAccount};lineItems=$.merge(lineItems,[giftCardItem]);}\nif(lineItems.length>=250){lineItems=[];}}\nreturn lineItems;},replaceUnsupportedCharacters:function(str){str.replace('/[^a-zA-Z0-9\\s\\-.\\']/','');return str.substr(0,127);},canSendLineItems:function(){return window.checkoutConfig.payment[this.getCode()].canSendLineItems;}});});","PayPal_Braintree/js/view/payment/method-renderer/lpm.min.js":"define(['Magento_Checkout/js/view/payment/default','ko','jquery','braintree','braintreeLpm','PayPal_Braintree/js/form-builder','Magento_Ui/js/model/messageList','Magento_Checkout/js/action/select-billing-address','Magento_Checkout/js/model/full-screen-loader','Magento_Checkout/js/model/quote','Magento_Checkout/js/model/payment/additional-validators','mage/url','mage/translate'],function(Component,ko,$,braintree,lpm,formBuilder,messageList,selectBillingAddress,fullScreenLoader,quote,additionalValidators,url,$t){'use strict';return Component.extend({defaults:{code:'braintree_local_payment',paymentMethodsAvailable:ko.observable(false),paymentMethodNonce:null,template:'PayPal_Braintree/payment/lpm'},clickPaymentBtn:function(method){var self=this;if(additionalValidators.validate()){fullScreenLoader.startLoader();braintree.create({authorization:self.getClientToken()},function(clientError,clientInstance){if(clientError){self.setErrorMsg($t('Unable to initialize Braintree Client.'));fullScreenLoader.stopLoader();return;}\nlpm.create({client:clientInstance,merchantAccountId:self.getMerchantAccountId()},function(lpmError,lpmInstance){if(lpmError){self.setErrorMsg(lpmError);fullScreenLoader.stopLoader();return;}\nlpmInstance.startPayment({amount:self.getAmount(),currencyCode:self.getCurrencyCode(),email:self.getCustomerDetails().email,phone:self.getCustomerDetails().phone,givenName:self.getCustomerDetails().firstName,surname:self.getCustomerDetails().lastName,shippingAddressRequired:!quote.isVirtual(),address:self.getAddress(),paymentType:method,onPaymentStart:function(data,start){start();},fallback:{url:'N/A',buttonText:'N/A'}},function(startPaymentError,payload){fullScreenLoader.stopLoader();if(startPaymentError){switch(startPaymentError.code){case'LOCAL_PAYMENT_POPUP_CLOSED':self.setErrorMsg($t('Local Payment popup was closed unexpectedly.'));break;case'LOCAL_PAYMENT_WINDOW_OPEN_FAILED':self.setErrorMsg($t('Local Payment popup failed to open.'));break;case'LOCAL_PAYMENT_WINDOW_CLOSED':self.setErrorMsg($t('Local Payment popup was closed. Payment cancelled.'));break;default:self.setErrorMsg('Error! '+startPaymentError);break;}}else{self.setPaymentMethodNonce(payload.nonce);self.placeOrder();}});});});}},getAddress:function(){var shippingAddress=quote.shippingAddress();if(quote.isVirtual()){return{countryCode:shippingAddress.countryId}}\nreturn{streetAddress:shippingAddress.street[0],extendedAddress:shippingAddress.street[1],locality:shippingAddress.city,postalCode:shippingAddress.postcode,region:shippingAddress.region,countryCode:shippingAddress.countryId}},getAmount:function(){return quote.totals()['base_grand_total'].toString();},getBillingAddress:function(){return quote.billingAddress();},getClientToken:function(){return window.checkoutConfig.payment[this.getCode()].clientToken;},getCode:function(){return this.code;},getCurrencyCode:function(){return quote.totals()['base_currency_code'];},getCustomerDetails:function(){var billingAddress=quote.billingAddress();return{firstName:billingAddress.firstname,lastName:billingAddress.lastname,phone:billingAddress.telephone,email:typeof quote.guestEmail==='string'?quote.guestEmail:window.checkoutConfig.customerData.email}},getData:function(){let data={'method':this.getCode(),'additional_data':{'payment_method_nonce':this.paymentMethodNonce,}};data['additional_data']=_.extend(data['additional_data'],this.additionalData);return data;},getMerchantAccountId:function(){return window.checkoutConfig.payment[this.getCode()].merchantAccountId;},getPaymentMethod:function(method){var methods=this.getPaymentMethods();for(var i=0;i<methods.length;i++){if(methods[i].method===method){return methods[i]}}},getPaymentMethods:function(){return window.checkoutConfig.payment[this.getCode()].allowedMethods;},getPaymentMarkSrc:function(){return window.checkoutConfig.payment[this.getCode()].paymentIcons;},getTitle:function(){return window.checkoutConfig.payment[this.getCode()].title;},initialize:function(){this._super();return this;},isActive:function(){var address=quote.billingAddress()||quote.shippingAddress();var methods=this.getPaymentMethods();for(var i=0;i<methods.length;i++){if(methods[i].countries.includes(address.countryId)){return true;}}\nreturn false;},isValidCountryAndCurrency:function(method){var address=quote.billingAddress();if(!address){this.paymentMethodsAvailable(false);return false;}\nvar countryId=address.countryId;var quoteCurrency=quote.totals()['base_currency_code'];var paymentMethodDetails=this.getPaymentMethod(method);if((countryId!=='GB'&&paymentMethodDetails.countries.includes(countryId)&&(quoteCurrency==='EUR'||quoteCurrency==='PLN'))||(countryId==='GB'&&paymentMethodDetails.countries.includes(countryId)&&quoteCurrency==='GBP')){this.paymentMethodsAvailable(true);return true;}\nreturn false;},setErrorMsg:function(message){messageList.addErrorMessage({message:message});},setPaymentMethodNonce:function(nonce){this.paymentMethodNonce=nonce;},validateForm:function(form){return $(form).validation()&&$(form).validation('isValid');}});});","PayPal_Braintree/js/view/payment/method-renderer/paypal-vault.min.js":"define(['jquery','underscore','Magento_Vault/js/view/payment/method-renderer/vault','Magento_Ui/js/model/messageList','Magento_Checkout/js/model/full-screen-loader'],function($,_,VaultComponent,globalMessageList,fullScreenLoader){'use strict';return VaultComponent.extend({defaults:{template:'PayPal_Braintree/payment/paypal/vault',additionalData:{}},getPayerEmail:function(){return this.details.payerEmail;},getPaymentIcon:function(){return window.checkoutConfig.payment['braintree_paypal'].paymentIcon;},beforePlaceOrder:function(){this.getPaymentMethodNonce();},getPaymentMethodNonce:function(){var self=this;fullScreenLoader.startLoader();$.getJSON(self.nonceUrl,{'public_hash':self.publicHash}).done(function(response){fullScreenLoader.stopLoader();self.additionalData['payment_method_nonce']=response.paymentMethodNonce;self.placeOrder();}).fail(function(response){var error=JSON.parse(response.responseText);fullScreenLoader.stopLoader();globalMessageList.addErrorMessage({message:error.message});});},getData:function(){var data={'method':this.code,'additional_data':{'public_hash':this.publicHash}};data['additional_data']=_.extend(data['additional_data'],this.additionalData);return data;}});});","PayPal_Braintree/js/view/payment/method-renderer/multishipping/paypal.min.js":"define(['jquery','underscore','braintreeCheckoutPayPalAdapter','Magento_Checkout/js/model/quote','PayPal_Braintree/js/view/payment/method-renderer/paypal','Magento_Checkout/js/action/set-payment-information','Magento_Checkout/js/model/payment/additional-validators','Magento_Checkout/js/model/full-screen-loader','mage/translate'],function($,_,Braintree,quote,Component,setPaymentInformationAction,additionalValidators,fullScreenLoader,$t){'use strict';return Component.extend({defaults:{template:'PayPal_Braintree/payment/multishipping/paypal',submitButtonSelector:'[id=\"parent-payment-continue\"]',reviewButtonHtml:''},initObservable:function(){this.reviewButtonHtml=$(this.submitButtonSelector).html();return this._super();},initClientConfig:function(){this.clientConfig=_.extend(this.clientConfig,this.getPayPalConfig());this.clientConfig.paypal.enableShippingAddress=false;_.each(this.clientConfig,function(fn,name){if(typeof fn==='function'){this.clientConfig[name]=fn.bind(this);}},this);this.clientConfig.buttonPayPalId='parent-payment-continue';},onActiveChange:function(isActive){this.updateSubmitButtonHtml(isActive);this._super(isActive);},beforePlaceOrder:function(data){this._super(data);},reInitPayPal:function(){this.disableButton();this.clientConfig.paypal.amount=parseFloat(this.grandTotalAmount).toFixed(2);if(!quote.isVirtual()){this.clientConfig.paypal.enableShippingAddress=false;this.clientConfig.paypal.shippingAddressEditable=false;}\nBraintree.setConfig(this.clientConfig);if(Braintree.getPayPalInstance()){Braintree.getPayPalInstance().teardown(function(){Braintree.setup();}.bind(this));Braintree.setPayPalInstance(null);}else{Braintree.setup();this.enableButton();}},loadPayPalButton:function(paypalCheckoutInstance,funding){let paypalPayment=Braintree.config.paypal,onPaymentMethodReceived=Braintree.config.onPaymentMethodReceived;let style={color:Braintree.getColor(funding),shape:Braintree.getShape(funding),size:Braintree.getSize(funding),label:Braintree.getLabel(funding)};if(Braintree.getBranding()){style.branding=Braintree.getBranding();}\nif(Braintree.getFundingIcons()){style.fundingicons=Braintree.getFundingIcons();}\nif(funding==='credit'){Braintree.config.buttonId=this.clientConfig.buttonCreditId;}else if(funding==='paylater'){Braintree.config.buttonId=this.clientConfig.buttonPaylaterId;}else{Braintree.config.buttonId=this.clientConfig.buttonPayPalId;}\nBraintree.config.paypalInstance=paypalCheckoutInstance;var events=Braintree.events;$('#'+Braintree.config.buttonId).html('');var button=paypal.Buttons({fundingSource:funding,env:Braintree.getEnvironment(),style:style,commit:true,locale:Braintree.config.paypal.locale,createOrder:function(){return paypalCheckoutInstance.createPayment(paypalPayment);},onCancel:function(data){console.log('checkout.js payment cancelled',JSON.stringify(data,0,2));if(typeof events.onCancel==='function'){events.onCancel();}},onError:function(err){Braintree.showError($t(\"PayPal Checkout could not be initialized. Please contact the store owner.\"));Braintree.config.paypalInstance=null;console.error('Paypal checkout.js error',err);if(typeof events.onError==='function'){events.onError(err);}}.bind(this),onClick:function(data){if(!additionalValidators.validate()){return false;}\nif(typeof events.onClick==='function'){events.onClick(data);}}.bind(this),onApprove:function(data,actions){return paypalCheckoutInstance.tokenizePayment(data).then(function(payload){onPaymentMethodReceived(payload);});}});if(button.isEligible()&&$('#'+Braintree.config.buttonId).length){button.render('#'+Braintree.config.buttonId).then(function(){Braintree.enableButton();if(typeof Braintree.config.onPaymentMethodError==='function'){Braintree.config.onPaymentMethodError();}}.bind(this)).then(function(data){if(typeof events.onRender==='function'){events.onRender(data);}});}},getPayPalConfig:function(){var totals=quote.totals(),config={},isActiveVaultEnabler=this.isActiveVault();config.paypal={flow:'checkout',amount:parseFloat(this.grandTotalAmount).toFixed(2),currency:totals['base_currency_code'],locale:this.getLocale(),requestBillingAgreement:true,onError:function(){this.paymentMethodNonce=null;},onUnsupported:function(){this.paymentMethodNonce=null;}};if(!quote.isVirtual()){config.paypal.enableShippingAddress=false;config.paypal.shippingAddressEditable=false;}\nif(this.getMerchantName()){config.paypal.displayName=this.getMerchantName();}\nreturn config;},getShippingAddress:function(){return{};},getData:function(){var data=this._super();data['additional_data']['is_active_payment_token_enabler']=true;return data;},isActiveVault:function(){return true;},isSkipOrderReview:function(){return false;},isPaymentMethodNonceReceived:function(){return this.paymentMethodNonce!==null;},updateSubmitButtonHtml:function(isActive){$(this.submitButtonSelector).removeClass(\"primary\");if(this.isPaymentMethodNonceReceived()||!isActive){$(this.submitButtonSelector).addClass(\"primary\");$(this.submitButtonSelector).html(this.reviewButtonHtml);}},placeOrder:function(){if(!this.isPaymentMethodNonceReceived()){this.payWithPayPal();}else{fullScreenLoader.startLoader();$.when(setPaymentInformationAction(this.messageContainer,this.getData())).done(this.done.bind(this)).fail(this.fail.bind(this));}},fail:function(){fullScreenLoader.stopLoader();return this;},done:function(){fullScreenLoader.stopLoader();$('#multishipping-billing-form').submit();return this;}});});","PayPal_Braintree/js/view/payment/method-renderer/multishipping/hosted-fields.min.js":"define(['jquery','PayPal_Braintree/js/view/payment/method-renderer/hosted-fields','PayPal_Braintree/js/validator','Magento_Ui/js/model/messageList','mage/translate','Magento_Checkout/js/model/full-screen-loader','Magento_Checkout/js/action/set-payment-information','Magento_Checkout/js/model/payment/additional-validators','PayPal_Braintree/js/view/payment/adapter'],function($,Component,validator,messageList,$t,fullScreenLoader,setPaymentInformationAction,additionalValidators,braintree){'use strict';return Component.extend({defaults:{template:'PayPal_Braintree/payment/multishipping/form'},getCcAvailableTypes:function(){let availableTypes=validator.getAvailableCardTypes(),billingCountryId;billingCountryId=$('#multishipping_billing_country_id').val();if(billingCountryId&&validator.getCountrySpecificCardTypes(billingCountryId)){return validator.collectTypes(availableTypes,validator.getCountrySpecificCardTypes(billingCountryId));}\nreturn availableTypes;},handleNonce:function(payload){let self=this;this.setPaymentMethodNonce(payload.nonce);this.setCreditCardBin(payload.details.bin);self.validatorManager.validate(self,function(){return self.setPaymentInformation();},function(){self.isProcessing=false;self.paymentMethodNonce=null;self.creditCardBin=null;});},placeOrder:function(){if(this.isProcessing){return false;}else{this.isProcessing=true;}\nbraintree.tokenizeHostedFields();return false;},setPaymentInformation:function(){if(additionalValidators.validate()){fullScreenLoader.startLoader();$.when(setPaymentInformationAction(this.messageContainer,this.getData())).done(this.done.bind(this)).fail(this.fail.bind(this));}},fail:function(){fullScreenLoader.stopLoader();return this;},done:function(){fullScreenLoader.stopLoader();$('#multishipping-billing-form').submit();return this;}});});","PayPal_Braintree/js/reCaptcha/webapiReCaptchaRegistry-mixin.min.js":"define([],function(){'use strict';return function(originalFunction){originalFunction.addListener=function(id,func){this._listeners[id]=func;};return originalFunction;};});","Magento_CheckoutAgreements/js/view/agreement-validation.min.js":"define(['uiComponent','Magento_Checkout/js/model/payment/additional-validators','Magento_CheckoutAgreements/js/model/agreement-validator'],function(Component,additionalValidators,agreementValidator){'use strict';additionalValidators.registerValidator(agreementValidator);return Component.extend({});});","Magento_CheckoutAgreements/js/view/checkout-agreements.min.js":"define(['ko','jquery','uiComponent','Magento_CheckoutAgreements/js/model/agreements-modal'],function(ko,$,Component,agreementsModal){'use strict';var checkoutConfig=window.checkoutConfig,agreementManualMode=1,agreementsConfig=checkoutConfig?checkoutConfig.checkoutAgreements:{};return Component.extend({defaults:{template:'Magento_CheckoutAgreements/checkout/checkout-agreements'},isVisible:agreementsConfig.isEnabled,agreements:agreementsConfig.agreements,modalTitle:ko.observable(null),modalContent:ko.observable(null),contentHeight:ko.observable(null),modalWindow:null,isAgreementRequired:function(element){return element.mode==agreementManualMode;},showContent:function(element){this.modalTitle(element.checkboxText);this.modalContent(element.content);this.contentHeight(element.contentHeight?element.contentHeight:'auto');agreementsModal.showModal();},getCheckboxId:function(context,agreementId){var paymentMethodName='',paymentMethodRenderer=context.$parents[1];if(paymentMethodRenderer){paymentMethodName=paymentMethodRenderer.item?paymentMethodRenderer.item.method:'';}\nreturn'agreement_'+paymentMethodName+'_'+agreementId;},initModal:function(element){agreementsModal.createModal(element);}});});","Magento_CheckoutAgreements/js/model/agreements-assigner.min.js":"define(['jquery'],function($){'use strict';var agreementsConfig=window.checkoutConfig.checkoutAgreements;return function(paymentData){var agreementForm,agreementData,agreementIds;if(!agreementsConfig.isEnabled){return;}\nagreementForm=$('.payment-method._active div[data-role=checkout-agreements] input');agreementData=agreementForm.serializeArray();agreementIds=[];agreementData.forEach(function(item){agreementIds.push(item.value);});if(paymentData['extension_attributes']===undefined){paymentData['extension_attributes']={};}\npaymentData['extension_attributes']['agreement_ids']=agreementIds;};});","Magento_CheckoutAgreements/js/model/agreements-modal.min.js":"define(['jquery','Magento_Ui/js/modal/modal','mage/translate'],function($,modal,$t){'use strict';return{modalWindow:null,createModal:function(element){var options;this.modalWindow=element;options={'type':'popup','modalClass':'agreements-modal','responsive':true,'innerScroll':true,'trigger':'.show-modal','buttons':[{text:$t('Close'),class:'action secondary action-hide-popup',click:function(){this.closeModal();}}]};modal(options,$(this.modalWindow));},showModal:function(){$(this.modalWindow).modal('openModal');}};});","Magento_CheckoutAgreements/js/model/place-order-mixin.min.js":"define(['jquery','mage/utils/wrapper','Magento_CheckoutAgreements/js/model/agreements-assigner'],function($,wrapper,agreementsAssigner){'use strict';return function(placeOrderAction){return wrapper.wrap(placeOrderAction,function(originalAction,paymentData,messageContainer){agreementsAssigner(paymentData);return originalAction(paymentData,messageContainer);});};});","Magento_CheckoutAgreements/js/model/agreement-validator.min.js":"define(['jquery','mage/validation'],function($){'use strict';var checkoutConfig=window.checkoutConfig,agreementsConfig=checkoutConfig?checkoutConfig.checkoutAgreements:{},agreementsInputPath='.payment-method._active div.checkout-agreements input';return{validate:function(hideError){var isValid=true;if(!agreementsConfig.isEnabled||$(agreementsInputPath).length===0){return true;}\n$(agreementsInputPath).each(function(index,element){if(!$.validator.validateSingleElement(element,{errorElement:'div',hideError:hideError||false})){isValid=false;}});return isValid;}};});","Magento_CheckoutAgreements/js/model/set-payment-information-mixin.min.js":"define(['jquery','mage/utils/wrapper','Magento_CheckoutAgreements/js/model/agreements-assigner'],function($,wrapper,agreementsAssigner){'use strict';return function(placeOrderAction){return wrapper.wrap(placeOrderAction,function(originalAction,messageContainer,paymentData){agreementsAssigner(paymentData);return originalAction(messageContainer,paymentData);});};});","Magento_Shipping/js/model/config.min.js":"define([],function(){'use strict';return function(){return window.checkoutConfig.shippingPolicy;};});","Magento_Shipping/js/view/checkout/shipping/shipping-policy.min.js":"define(['uiComponent','Magento_Shipping/js/model/config'],function(Component,config){'use strict';return Component.extend({defaults:{template:'Magento_Shipping/checkout/shipping/shipping-policy'},config:config()});});","Magento_Cookie/js/require-cookie.min.js":"define(['jquery','Magento_Ui/js/modal/alert','jquery-ui-modules/widget','mage/mage','mage/translate'],function($,alert){'use strict';$.widget('mage.requireCookie',{options:{event:'click',noCookieUrl:'enable-cookies',triggers:['.action.login','.action.submit'],isRedirectCmsPage:true},_create:function(){this._bind();},_bind:function(){var events={};$.each(this.options.triggers,function(index,value){events['click '+value]='_checkCookie';});this._on(events);},_checkCookie:function(event){if(navigator.cookieEnabled){return;}\nevent.preventDefault();if(this.options.isRedirectCmsPage){window.location=this.options.noCookieUrl;}else{alert({content:$.mage.__('Cookies are disabled in your browser.')});}}});return $.mage.requireCookie;});","Magento_Cookie/js/notices.min.js":"define(['jquery','jquery-ui-modules/widget','mage/cookies'],function($){'use strict';$.widget('mage.cookieNotices',{_create:function(){if($.mage.cookies.get(this.options.cookieName)){this.element.hide();}else{this.element.show();}\n$(this.options.cookieAllowButtonSelector).on('click',$.proxy(function(){var cookieExpires=new Date(new Date().getTime()+this.options.cookieLifetime*1000);$.mage.cookies.set(this.options.cookieName,JSON.stringify(this.options.cookieValue),{expires:cookieExpires});if($.mage.cookies.get(this.options.cookieName)){this.element.hide();$(document).trigger('user:allowed:save:cookie');}else{window.location.href=this.options.noCookiesUrl;}},this));}});return $.mage.cookieNotices;});","Magento_Usps/js/model/shipping-rates-validation-rules.min.js":"define([],function(){'use strict';return{getRules:function(){return{'country_id':{'required':true},'postcode':{'required':false}};}};});","Magento_Usps/js/model/shipping-rates-validator.min.js":"define(['jquery','mageUtils','./shipping-rates-validation-rules','mage/translate'],function($,utils,validationRules,$t){'use strict';var checkoutConfig=window.checkoutConfig;return{validationErrors:[],validate:function(address){var rules=validationRules.getRules(),self=this;$.each(rules,function(field,rule){var message;if(rule.required&&utils.isEmpty(address[field])){message=$t('Field ')+field+$t(' is required.');self.validationErrors.push(message);}});if(!this.validationErrors.length){if(address['country_id']==checkoutConfig.originCountryCode){return!utils.isEmpty(address.postcode);}\nreturn true;}\nreturn false;}};});","Magento_Usps/js/view/shipping-rates-validation.min.js":"define(['uiComponent','Magento_Checkout/js/model/shipping-rates-validator','Magento_Checkout/js/model/shipping-rates-validation-rules','../model/shipping-rates-validator','../model/shipping-rates-validation-rules'],function(Component,defaultShippingRatesValidator,defaultShippingRatesValidationRules,uspsShippingRatesValidator,uspsShippingRatesValidationRules){'use strict';defaultShippingRatesValidator.registerValidator('usps',uspsShippingRatesValidator);defaultShippingRatesValidationRules.registerRules('usps',uspsShippingRatesValidationRules);return Component;});","magnifier/magnifier.min.js":"(function($){$.fn.magnify=function(options){'use strict';var magnify=new Magnify($(this),options);return magnify;};function Magnify(element,options){var customUserOptions=options||{},$box=$(element),$thumb,that=this,largeWrapper=options.largeWrapper||'.magnifier-preview',$magnifierPreview=$(largeWrapper);curThumb=null,magnifierOptions={x:0,y:0,w:0,h:0,lensW:0,lensH:0,lensBgX:0,lensBgY:0,largeW:0,largeH:0,largeL:0,largeT:0,zoom:2,zoomMin:1.1,zoomMax:5,mode:'outside',eventType:'click',status:0,zoomAttached:false,zoomable:customUserOptions.zoomable!==undefined?customUserOptions.zoomable:false,onthumbenter:customUserOptions.onthumbenter!==undefined?customUserOptions.onthumbenter:null,onthumbmove:customUserOptions.onthumbmove!==undefined?customUserOptions.onthumbmove:null,onthumbleave:customUserOptions.onthumbleave!==undefined?customUserOptions.onthumbleave:null,onzoom:customUserOptions.onzoom!==undefined?customUserOptions.onzoom:null},pos={t:0,l:0,x:0,y:0},gId=0,status=0,curIdx='',curLens=null,curLarge=null,lensbg=customUserOptions.bg!==undefined?customUserOptions.lensbg:true,gZoom=customUserOptions.zoom!==undefined?customUserOptions.zoom:magnifierOptions.zoom,gZoomMin=customUserOptions.zoomMin!==undefined?customUserOptions.zoomMin:magnifierOptions.zoomMin,gZoomMax=customUserOptions.zoomMax!==undefined?customUserOptions.zoomMax:magnifierOptions.zoomMax,gMode=customUserOptions.mode||magnifierOptions.mode,gEventType=customUserOptions.eventType||magnifierOptions.eventType,data={},inBounds=false,isOverThumb=false,rate=1,paddingX=0,paddingY=0,enabled=true,showWrapper=true;var MagnifyCls={magnifyHidden:'magnify-hidden',magnifyOpaque:'magnify-opaque',magnifyFull:'magnify-fullimage'};that.update=function(){updateLensOnLoad();};that.init=function(){_init($box,options);};function _toBoolean(str){if(typeof str==='string'){if(str==='true'){return true;}else if(str==='false'||''){return false;}\nconsole.warn('Wrong type: can\\'t be transformed to Boolean');}else if(typeof str==='boolean'){return str;}}\nfunction createLens(thumb){if($(thumb).siblings('.magnify-lens').length){return false;}\nvar lens=$('<div class=\"magnify-lens magnify-hidden\" data-gallery-role=\"magnifier-zoom\"></div>');$(thumb).parent().append(lens);}\nfunction updateLensOnLoad(idSelectorMainImg,thumb,largeImgInMagnifyLens,largeWrapper){var magnifyLensElement=$box.find('.magnify-lens'),textWrapper;if(data[idSelectorMainImg].status===1){textWrapper=$('<div class=\"magnifier-loader-text\"></div>');magnifyLensElement.className='magnifier-loader magnify-hidden';textWrapper.html('Loading...');magnifyLensElement.html('').append(textWrapper);}else if(data[idSelectorMainImg].status===2){magnifyLensElement.addClass(MagnifyCls.magnifyHidden);magnifyLensElement.html('');largeImgInMagnifyLens.id=idSelectorMainImg+'-large';largeImgInMagnifyLens.style.width=data[idSelectorMainImg].largeImgInMagnifyLensWidth+'px';largeImgInMagnifyLens.style.height=data[idSelectorMainImg].largeImgInMagnifyLensHeight+'px';largeImgInMagnifyLens.className='magnifier-large magnify-hidden';if(data[idSelectorMainImg].mode==='inside'){magnifyLensElement.append(largeImgInMagnifyLens);}else{largeWrapper.html('').append(largeImgInMagnifyLens);}}\ndata[idSelectorMainImg].lensH=data[idSelectorMainImg].lensH>$thumb.height()?$thumb.height():data[idSelectorMainImg].lensH;if(Math.round(data[idSelectorMainImg].lensW)===0){magnifyLensElement.css('display','none');}else{magnifyLensElement.css({width:Math.round(data[idSelectorMainImg].lensW)+'px',height:Math.round(data[idSelectorMainImg].lensH)+'px',display:''});}}\nfunction getMousePos(){var xPos=pos.x-magnifierOptions.x,yPos=pos.y-magnifierOptions.y,t,l;inBounds=xPos<0||yPos<0||xPos>magnifierOptions.w||yPos>magnifierOptions.h?false:true;l=xPos-magnifierOptions.lensW / 2;t=yPos-magnifierOptions.lensH / 2;if(xPos<magnifierOptions.lensW / 2){l=0;}\nif(yPos<magnifierOptions.lensH / 2){t=0;}\nif(xPos-magnifierOptions.w+Math.ceil(magnifierOptions.lensW / 2)>0){l=magnifierOptions.w-Math.ceil(magnifierOptions.lensW+2);}\nif(yPos-magnifierOptions.h+Math.ceil(magnifierOptions.lensH / 2)>0){t=magnifierOptions.h-Math.ceil(magnifierOptions.lensH);}\npos.l=l;pos.t=t;magnifierOptions.lensBgX=pos.l;magnifierOptions.lensBgY=pos.t;if(magnifierOptions.mode==='inside'){magnifierOptions.largeL=Math.round(xPos*(magnifierOptions.zoom-magnifierOptions.lensW / magnifierOptions.w));magnifierOptions.largeT=Math.round(yPos*(magnifierOptions.zoom-magnifierOptions.lensH / magnifierOptions.h));}else{magnifierOptions.largeL=Math.round(magnifierOptions.lensBgX*magnifierOptions.zoom*(magnifierOptions.largeWrapperW / magnifierOptions.w));magnifierOptions.largeT=Math.round(magnifierOptions.lensBgY*magnifierOptions.zoom*(magnifierOptions.largeWrapperH / magnifierOptions.h));}}\nfunction onThumbEnter(){if(_toBoolean(enabled)){magnifierOptions=data[curIdx];curLens=$box.find('.magnify-lens');if(magnifierOptions.status===2){curLens.removeClass(MagnifyCls.magnifyOpaque);curLarge=$('#'+curIdx+'-large');curLarge.removeClass(MagnifyCls.magnifyHidden);}else if(magnifierOptions.status===1){curLens.className='magnifier-loader';}}}\nfunction onThumbLeave(){if(magnifierOptions.status>0){var handler=magnifierOptions.onthumbleave;if(handler!==null){handler({thumb:curThumb,lens:curLens,large:curLarge,x:pos.x,y:pos.y});}\nif(!curLens.hasClass(MagnifyCls.magnifyHidden)){curLens.addClass(MagnifyCls.magnifyHidden);if(curLarge!==null){curLarge.addClass(MagnifyCls.magnifyHidden);}}}}\nfunction move(){if(_toBoolean(enabled)){if(status!==magnifierOptions.status){onThumbEnter();}\nif(magnifierOptions.status>0){curThumb.className=magnifierOptions.thumbCssClass+' magnify-opaque';if(magnifierOptions.status===1){curLens.className='magnifier-loader';}else if(magnifierOptions.status===2){curLens.removeClass(MagnifyCls.magnifyHidden);curLarge.removeClass(MagnifyCls.magnifyHidden);curLarge.css({left:'-'+magnifierOptions.largeL+'px',top:'-'+magnifierOptions.largeT+'px'});}\nvar borderOffset=2;pos.t=pos.t<=0?0:pos.t-borderOffset;curLens.css({left:pos.l+paddingX+'px',top:pos.t+paddingY+'px'});if(lensbg){curLens.css({'background-color':'rgba(f,f,f,.5)'});}else{curLens.get(0).style.backgroundPosition='-'+\nmagnifierOptions.lensBgX+'px -'+\nmagnifierOptions.lensBgY+'px';}\nvar handler=magnifierOptions.onthumbmove;if(handler!==null){handler({thumb:curThumb,lens:curLens,large:curLarge,x:pos.x,y:pos.y});}}\nstatus=magnifierOptions.status;}}\nfunction setThumbData(mainImage,mainImageData){var thumbBounds=mainImage.getBoundingClientRect(),w=0,h=0;mainImageData.x=Math.round(thumbBounds.left);mainImageData.y=Math.round(thumbBounds.top);mainImageData.w=Math.round(thumbBounds.right-mainImageData.x);mainImageData.h=Math.round(thumbBounds.bottom-mainImageData.y);if(mainImageData.mode==='inside'){w=mainImageData.w;h=mainImageData.h;}else{w=mainImageData.largeWrapperW;h=mainImageData.largeWrapperH;}\nmainImageData.largeImgInMagnifyLensWidth=Math.round(mainImageData.zoom*w);mainImageData.largeImgInMagnifyLensHeight=Math.round(mainImageData.zoom*h);mainImageData.lensW=Math.round(mainImageData.w / mainImageData.zoom);mainImageData.lensH=Math.round(mainImageData.h / mainImageData.zoom);}\nfunction _init($box,options){var opts={};if(options.thumb===undefined){return false;}\n$thumb=$box.find(options.thumb);if($thumb.length){for(var key in options){opts[key]=options[key];}\nopts.thumb=$thumb;enabled=opts.enabled;if(_toBoolean(enabled)){$magnifierPreview.show().css('display','');$magnifierPreview.addClass(MagnifyCls.magnifyHidden);set(opts);}else{$magnifierPreview.empty().hide();}}\nreturn that;}\nfunction hoverEvents(thumb){$(thumb).on('mouseover',function(e){if(showWrapper){if(magnifierOptions.status!==0){onThumbLeave();}\nhandleEvents(e);isOverThumb=inBounds;}}).trigger('mouseover');}\nfunction clickEvents(thumb){$(thumb).on('click',function(e){if(showWrapper){if(!isOverThumb){if(magnifierOptions.status!==0){onThumbLeave();}\nhandleEvents(e);isOverThumb=true;}}});}\nfunction bindEvents(eType,thumb){var eventFlag='hasBoundEvent_'+eType;if(thumb[eventFlag]){return;}\nthumb[eventFlag]=true;switch(eType){case'hover':hoverEvents(thumb);break;case'click':clickEvents(thumb);break;}}\nfunction handleEvents(e){var src=e.target;curIdx=src.id;curThumb=src;onThumbEnter(src);setThumbData(curThumb,magnifierOptions);pos.x=e.clientX;pos.y=e.clientY;getMousePos();move();var handler=magnifierOptions.onthumbenter;if(handler!==null){handler({thumb:curThumb,lens:curLens,large:curLarge,x:pos.x,y:pos.y});}}\nfunction set(options){if(data[options.thumb.id]!==undefined){curThumb=options.thumb;return false;}\nvar thumbObj=new Image(),largeObj=new Image(),$thumb=options.thumb,thumb=$thumb.get(0),idx=thumb.id,largeUrl,largeWrapper=$(options.largeWrapper),zoom=options.zoom||thumb.getAttribute('data-zoom')||gZoom,zoomMin=options.zoomMin||gZoomMin,zoomMax=options.zoomMax||gZoomMax,mode=options.mode||thumb.getAttribute('data-mode')||gMode,eventType=options.eventType||thumb.getAttribute('data-eventType')||gEventType,onthumbenter=options.onthumbenter!==undefined?options.onthumbenter:magnifierOptions.onthumbenter,onthumbleave=options.onthumbleave!==undefined?options.onthumbleave:magnifierOptions.onthumbleave,onthumbmove=options.onthumbmove!==undefined?options.onthumbmove:magnifierOptions.onthumbmove;largeUrl=$thumb.data('original')||customUserOptions.full||$thumb.attr('src');if(thumb.id===''){idx=thumb.id='magnifier-item-'+gId;gId+=1;}\ncreateLens(thumb,idx);if(options.width){largeWrapper.width(options.width);}\nif(options.height){largeWrapper.height(options.height);}\nif(options.top){if(typeof options.top=='function'){var top=options.top()+'px';}else{var top=options.top+'px';}\nif(largeWrapper.length){largeWrapper[0].style.top=top.replace('%px','%');}}\nif(options.left){if(typeof options.left=='function'){var left=options.left()+'px';}else{var left=options.left+'px';}\nif(largeWrapper.length){largeWrapper[0].style.left=left.replace('%px','%');}}\ndata[idx]={zoom:zoom,zoomMin:zoomMin,zoomMax:zoomMax,mode:mode,eventType:eventType,thumbCssClass:thumb.className,zoomAttached:false,status:0,largeUrl:largeUrl,largeWrapperId:mode==='outside'?largeWrapper.attr('id'):null,largeWrapperW:mode==='outside'?largeWrapper.width():null,largeWrapperH:mode==='outside'?largeWrapper.height():null,onthumbenter:onthumbenter,onthumbleave:onthumbleave,onthumbmove:onthumbmove};paddingX=($thumb.parent().width()-$thumb.width())/ 2;paddingY=($thumb.parent().height()-$thumb.height())/ 2;showWrapper=false;$(thumbObj).on('load',function(){if(data.length>0){data[idx].status=1;$(largeObj).on('load',function(){if(largeObj.width>largeWrapper.width()||largeObj.height>largeWrapper.height()){showWrapper=true;bindEvents(eventType,thumb);data[idx].status=2;if(largeObj.width>largeObj.height){data[idx].zoom=largeObj.width / largeWrapper.width();}else{data[idx].zoom=largeObj.height / largeWrapper.height();}\nsetThumbData(thumb,data[idx]);updateLensOnLoad(idx,thumb,largeObj,largeWrapper);}});largeObj.src=data[idx].largeUrl;}});thumbObj.src=thumb.src;}\nfunction onMouseLeave(){onThumbLeave();isOverThumb=false;$magnifierPreview.addClass(MagnifyCls.magnifyHidden);}\nfunction onMousemove(e){pos.x=e.clientX;pos.y=e.clientY;getMousePos();if(gEventType==='hover'){isOverThumb=inBounds;}\nif(inBounds&&isOverThumb){if(gMode==='outside'){$magnifierPreview.removeClass(MagnifyCls.magnifyHidden);}\nmove();}}\nfunction onScroll(){if(curThumb!==null){setThumbData(curThumb,magnifierOptions);}}\n$(window).on('scroll',onScroll);$(window).on('resize',function(){_init($box,customUserOptions);});$box.on('mousemove',onMousemove);$box.on('mouseleave',onMouseLeave);_init($box,customUserOptions);}}(jQuery));","magnifier/magnify.min.js":"define(['jquery','underscore','magnifier/magnifier'],function($,_){'use strict';return function(config,element){var isTouchEnabled='ontouchstart'in document.documentElement,gallerySelector='[data-gallery-role=\"gallery\"]',magnifierSelector='[data-gallery-role=\"magnifier\"]',magnifierZoomSelector='[data-gallery-role=\"magnifier-zoom\"]',zoomInButtonSelector='[data-gallery-role=\"fotorama__zoom-in\"]',zoomOutButtonSelector='[data-gallery-role=\"fotorama__zoom-out\"]',fullscreenImageSelector='[data-gallery-role=\"stage-shaft\"] [data-active=\"true\"] .fotorama__img--full',imageDraggableClass='fotorama__img--draggable',imageZoommable='fotorama__img--zoommable',zoomInLoaded='zoom-in-loaded',zoomOutLoaded='zoom-out-loaded',zoomInDisabled='fotorama__zoom-in--disabled',zoomOutDisabled='fotorama__zoom-out--disabled',keyboardNavigation,videoContainerClass='fotorama-video-container',hideMagnifier,dragFlag,endX,transitionEnabled,transitionActive=false,tapFlag=0,allowZoomOut=false,allowZoomIn=true;transitionEnabled=document.documentElement.style.transition!==undefined||document.documentElement.style.WebkitTransition!==undefined||document.documentElement.style.MozTransition!==undefined||document.documentElement.style.MsTransition!==undefined||document.documentElement.style.OTransition!==undefined;function getImageSize(img){return{rw:img.naturalWidth,rh:img.naturalHeight};}\nfunction calculateMinSize($image){var minHeight,minWidth,height=$image.height(),width=$image.width(),parentHeight=$image.parent().height(),parentWidth=$image.parent().width();if(width>parentWidth||height>parentHeight){if(width / height<parentWidth / parentHeight){minHeight=parentHeight;minWidth=width*(parentHeight / height);}else{minWidth=parentWidth;minHeight=height*parentWidth / width;}\n$image.css({'min-width':minWidth,'min-height':minHeight});}}\nfunction toggleZoomable($image,flag){if(flag){$image.css({'min-width':$image.width(),'min-height':$image.height(),'width':$image.width(),'height':$image.height()}).addClass(imageZoommable);}else{$image.css({width:'',height:'',top:'',left:'',right:'',bottom:''}).removeClass(imageZoommable);calculateMinSize($image);}}\nfunction resetVars($image){allowZoomIn=true;allowZoomOut=dragFlag=transitionActive=false;$image.hasClass(imageDraggableClass)&&$image.removeClass(imageDraggableClass);toggleZoomable($image,false);}\nfunction hideZoomControls(isHide){if(isHide){$(zoomInButtonSelector).addClass(zoomInDisabled);$(zoomOutButtonSelector).addClass(zoomOutDisabled);}else{$(zoomInButtonSelector).removeClass(zoomInDisabled);$(zoomOutButtonSelector).removeClass(zoomOutDisabled);}}\nfunction asyncToggleZoomButtons(path,$image){var img=new Image();img.onload=function(){this.height>$image.parent().height()||this.width>$image.parent().width()?hideZoomControls(false):hideZoomControls(true);};img.src=path;}\nfunction toggleZoomButtons($image,isTouchScreen,isVideoActiveFrame){var path=$image.attr('src');if(path&&!isTouchScreen&&!isVideoActiveFrame){asyncToggleZoomButtons(path,$image);}else{hideZoomControls(true);}}\nfunction resizeHandler(e,$image){var imageSize,parentWidth,parentHeight,isImageSmall,isImageFit;if(!e.data.$image||!e.data.$image.length)\nreturn;imageSize=getImageSize($(fullscreenImageSelector)[0]);parentWidth=e.data.$image.parent().width();parentHeight=e.data.$image.parent().height();isImageSmall=parentWidth>=imageSize.rw&&parentHeight>=imageSize.rh;isImageFit=parentWidth>e.data.$image.width()&&parentHeight>e.data.$image.height();toggleZoomButtons(e.data.$image,isTouchEnabled,checkForVideo(e.data.fotorama.activeFrame.$stageFrame));calculateMinSize(e.data.$image);if(e.data.$image.hasClass(imageZoommable)&&!allowZoomOut||isImageSmall||isImageFit){resetVars(e.data.$image);}\nif(!isImageSmall){toggleStandartNavigation();}}\nfunction getTopValue($image,topProp,step,height,containerHeight){var top;if(parseInt($image.css('marginTop'))||parseInt($image.css('marginLeft'))){top=dragFlag?topProp-step / 4:0;top=top<containerHeight-height?containerHeight-height:top;top=top>height-containerHeight?height-containerHeight:top;}else{top=topProp+step / 2;top=top<containerHeight-height?containerHeight-height:top;top=top>0?0:top;if(!dragFlag&&step<0){top=top<(containerHeight-height)/ 2?(containerHeight-height)/ 2:top;}}\nreturn top;}\nfunction getLeftValue(leftProp,step,width,containerWidth){var left;left=leftProp+step / 2;left=left<containerWidth-width?containerWidth-width:left;left=left>0?0:left;if(!dragFlag&&step<0){left=left<(containerWidth-width)/ 2?(containerWidth-width)/ 2:left;}\nreturn left;}\nfunction checkFullscreenImagePosition($image,dimentions,widthStep,heightStep){var $imageContainer,containerWidth,containerHeight,settings,top,left,right,bottom,ratio;if($(gallerySelector).data('fotorama').fullScreen){transitionActive=true;$imageContainer=$image.parent();containerWidth=$imageContainer.width();containerHeight=$imageContainer.height();top=$image.position().top;left=$image.position().left;ratio=$image.width()/ $image.height();dimentions.height=isNaN(dimentions.height)?dimentions.width / ratio:dimentions.height;dimentions.width=isNaN(dimentions.width)?dimentions.height*ratio:dimentions.width;top=dimentions.height>=containerHeight?getTopValue($image,top,heightStep,dimentions.height,containerHeight):0;left=dimentions.width>=containerWidth?getLeftValue(left,widthStep,dimentions.width,containerWidth):0;right=dragFlag&&left<(containerWidth-dimentions.width)/ 2?0:left;bottom=dragFlag?0:top;settings=$.extend(dimentions,{top:top,left:left,right:right});$image.css(settings);}}\nfunction toggleStandartNavigation(){var $selectable=$('a[href], area[href], input, select, textarea, button, iframe, object, embed, *[tabindex], *[contenteditable]').not('[tabindex=-1], [disabled], :hidden'),fotorama=$(gallerySelector).data('fotorama'),$focus=$(':focus'),index;if(fotorama.fullScreen){$selectable.each(function(number){if($(this).is($focus)){index=number;}});fotorama.setOptions({swipe:!allowZoomOut,keyboard:!allowZoomOut});if(_.isNumber(index)){$selectable.eq(index).trigger('focus');}}}\nfunction zoomIn(e,xStep,yStep){var $image,imgOriginalSize,imageWidth,imageHeight,zoomWidthStep,zoomHeightStep,widthResult,heightResult,ratio,dimentions={};if(allowZoomIn&&(!transitionEnabled||!transitionActive)&&(isTouchEnabled||!$(zoomInButtonSelector).hasClass(zoomInDisabled))){$image=$(fullscreenImageSelector);imgOriginalSize=getImageSize($image[0]);imageWidth=$image.width();imageHeight=$image.height();ratio=imageWidth / imageHeight;allowZoomOut=true;toggleStandartNavigation();if(!$image.hasClass(imageZoommable)){toggleZoomable($image,true);}\ne.preventDefault();if(imageWidth>=imageHeight){zoomWidthStep=xStep||Math.ceil(imageWidth*parseFloat(config.magnifierOpts.fullscreenzoom)/ 100);widthResult=imageWidth+zoomWidthStep;if(widthResult>=imgOriginalSize.rw){widthResult=imgOriginalSize.rw;zoomWidthStep=xStep||widthResult-imageWidth;allowZoomIn=false;}\nheightResult=widthResult / ratio;zoomHeightStep=yStep||heightResult-imageHeight;}else{zoomHeightStep=yStep||Math.ceil(imageHeight*parseFloat(config.magnifierOpts.fullscreenzoom)/ 100);heightResult=imageHeight+zoomHeightStep;if(heightResult>=imgOriginalSize.rh){heightResult=imgOriginalSize.rh;zoomHeightStep=yStep||heightResult-imageHeight;allowZoomIn=false;}\nwidthResult=heightResult*ratio;zoomWidthStep=xStep||widthResult-imageWidth;}\nif(imageWidth>=imageHeight&&imageWidth!==imgOriginalSize.rw){dimentions=$.extend(dimentions,{width:widthResult,height:'auto'});checkFullscreenImagePosition($image,dimentions,-zoomWidthStep,-zoomHeightStep);}else if(imageWidth<imageHeight&&imageHeight!==imgOriginalSize.rh){dimentions=$.extend(dimentions,{width:'auto',height:heightResult});checkFullscreenImagePosition($image,dimentions,-zoomWidthStep,-zoomHeightStep);}}\nreturn false;}\nfunction zoomOut(e,xStep,yStep){var $image,widthResult,heightResult,dimentions,parentWidth,parentHeight,imageWidth,imageHeight,zoomWidthStep,zoomHeightStep,ratio,fitIntoParent;if(allowZoomOut&&(!transitionEnabled||!transitionActive)&&(isTouchEnabled||!$(zoomOutButtonSelector).hasClass(zoomOutDisabled))){allowZoomIn=true;$image=$(fullscreenImageSelector);parentWidth=$image.parent().width();parentHeight=$image.parent().height();imageWidth=$image.width();imageHeight=$image.height();ratio=imageWidth / imageHeight;e.preventDefault();if(imageWidth>=imageHeight){zoomWidthStep=xStep||Math.ceil(imageWidth*parseFloat(config.magnifierOpts.fullscreenzoom)/ 100);widthResult=imageWidth-zoomWidthStep;heightResult=widthResult / ratio;zoomHeightStep=yStep||imageHeight-heightResult;}else{zoomHeightStep=yStep||Math.ceil(imageHeight*parseFloat(config.magnifierOpts.fullscreenzoom)/ 100);heightResult=imageHeight-zoomHeightStep;widthResult=heightResult*ratio;zoomWidthStep=xStep||imageWidth-widthResult;}\nfitIntoParent=function(){if(ratio>parentWidth / parentHeight){widthResult=parentWidth;zoomWidthStep=imageWidth-widthResult;heightResult=widthResult / ratio;zoomHeightStep=imageHeight-heightResult;dimentions={width:widthResult,height:'auto'};}else{heightResult=parentHeight;zoomHeightStep=imageHeight-heightResult;widthResult=heightResult*ratio;zoomWidthStep=imageWidth-widthResult;dimentions={width:'auto',height:heightResult};}\ncheckFullscreenImagePosition($image,dimentions,zoomWidthStep,zoomHeightStep);};if(imageWidth>=imageHeight){if(widthResult>parentWidth){dimentions={width:widthResult,height:'auto'};checkFullscreenImagePosition($image,dimentions,zoomWidthStep,zoomHeightStep);}else if(heightResult>parentHeight){dimentions={width:widthResult,height:'auto'};checkFullscreenImagePosition($image,dimentions,zoomWidthStep,zoomHeightStep);}else{allowZoomOut=dragFlag=false;toggleStandartNavigation();fitIntoParent();}}else if(heightResult>parentHeight){dimentions={width:'auto',height:heightResult};checkFullscreenImagePosition($image,dimentions,zoomWidthStep,zoomHeightStep);}else if(widthResult>parentWidth){dimentions={width:'auto',height:heightResult};checkFullscreenImagePosition($image,dimentions,zoomWidthStep,zoomHeightStep);}else{allowZoomOut=dragFlag=false;toggleStandartNavigation();fitIntoParent();}}\nreturn false;}\nfunction mousewheel(e,fotorama,element){var $fotoramaStage=fotorama.activeFrame.$stageFrame,fotoramaStage=$fotoramaStage.get(0);function onWheel(e){var delta=e.deltaY||e.wheelDelta,ev=e||window.event;if($(gallerySelector).data('fotorama').fullScreen){if(e.deltaY){if(delta>0){zoomOut(ev);}else{zoomIn(ev);}}else if(delta>0){zoomIn(ev);}else{zoomOut(ev);}\ne.preventDefault?e.preventDefault():e.returnValue=false;}}\nif(!$fotoramaStage.hasClass('magnify-wheel-loaded')){if(fotoramaStage&&fotoramaStage.addEventListener){if('onwheel'in document){fotoramaStage.addEventListener('wheel',onWheel,{passive:true});}else if('onmousewheel'in document){fotoramaStage.addEventListener('mousewheel',onWheel);}else{fotoramaStage.addEventListener('MozMousePixelScroll',onWheel);}\n$fotoramaStage.addClass('magnify-wheel-loaded');}}}\nfunction magnifierFullscreen(fotorama){var isDragActive=false,startX,startY,imagePosX,imagePosY,touch,swipeSlide,$gallery=$(gallerySelector),$image=$(fullscreenImageSelector,$gallery),$imageContainer=$('[data-gallery-role=\"stage-shaft\"] [data-active=\"true\"]'),gallery=$gallery.data('fotorama'),pinchDimention;swipeSlide=_.throttle(function(direction){$(gallerySelector).data('fotorama').show(direction);},500,{trailing:false});function getTop($el){return parseInt($el.get(0).style.top);}\nfunction shiftImage(dx,dy,e){var top=+imagePosY+dy,left=+imagePosX+dx,swipeCondition=$image.width()/ 10+20;dragFlag=true;if($image.offset().left===$imageContainer.offset().left+$imageContainer.width()-$image.width()&&e.keyCode===39||endX-1<$imageContainer.offset().left+$imageContainer.width()-$image.width()&&dx<0&&_.isNumber(endX)&&(e.type==='mousemove'||e.type==='touchmove'||e.type==='pointermove'||e.type==='MSPointerMove')){endX=null;swipeSlide('>');return;}\nif($image.offset().left===$imageContainer.offset().left&&dx!==0&&e.keyCode===37||endX===$imageContainer.offset().left&&dx>0&&(e.type==='mousemove'||e.type==='touchmove'||e.type==='pointermove'||e.type==='MSPointerMove')){endX=null;swipeSlide('<');return;}\nif($image.height()>$imageContainer.height()){if($imageContainer.height()>$image.height()+top){$image.css('top',$imageContainer.height()-$image.height());}else{top=$image.height()-getTop($image)-$imageContainer.height();dy=dy<top?dy:top;$image.css('top',getTop($image)+dy);}}\nif($image.width()>$imageContainer.width()){if($imageContainer.offset().left+$imageContainer.width()>left+$image.width()){left=$imageContainer.offset().left+$imageContainer.width()-$image.width();}else{left=$imageContainer.offset().left<left?$imageContainer.offset().left:left;}\n$image.offset({'left':left});$image.css('right','');}else if(Math.abs(dy)<1&&allowZoomOut&&!(e.type==='mousemove'||e.type==='touchmove'||e.type==='pointermove'||e.type==='MSPointerMove')){dx<0?$(gallerySelector).data('fotorama').show('>'):$(gallerySelector).data('fotorama').show('<');}\nif($image.width()<=$imageContainer.width()&&allowZoomOut&&(e.type==='mousemove'||e.type==='touchmove'||e.type==='pointermove'||e.type==='MSPointerMove')&&Math.abs(dx)>Math.abs(dy)&&Math.abs(dx)>swipeCondition){dx<0?swipeSlide('>'):swipeSlide('<');}}\nfunction dblClickHandler(e){var imgOriginalSize=getImageSize($image[0]),proportions;if(imgOriginalSize.rh<$image.parent().height()&&imgOriginalSize.rw<$image.parent().width()){return;}\nproportions=imgOriginalSize.rw / imgOriginalSize.rh;if(allowZoomIn){zoomIn(e,imgOriginalSize.rw-$image.width(),imgOriginalSize.rh-$image.height());}else if(proportions>$imageContainer.width()/ $imageContainer.height()){zoomOut(e,imgOriginalSize.rw-$imageContainer.width(),imgOriginalSize.rw / proportions);}else{zoomOut(e,imgOriginalSize.rw*proportions,imgOriginalSize.rh-$imageContainer.height());}}\nfunction detectDoubleTap(e){var now=new Date().getTime(),timesince=now-tapFlag;if(timesince<400&&timesince>0){transitionActive=false;tapFlag=0;dblClickHandler(e);}else{tapFlag=new Date().getTime();}}\nif(isTouchEnabled){$image.off('tap');$image.on('tap',function(e){if(e.originalEvent.originalEvent.touches.length===0){detectDoubleTap(e);}});}else{$image.off('dblclick');$image.on('dblclick',dblClickHandler);}\nif(gallery.fullScreen){toggleZoomButtons($image,isTouchEnabled,checkForVideo(fotorama.activeFrame.$stageFrame));}\nfunction getDimention(event){return Math.sqrt((event.touches[0].clientX-event.touches[1].clientX)*(event.touches[0].clientX-event.touches[1].clientX)+\n(event.touches[0].clientY-event.touches[1].clientY)*(event.touches[0].clientY-event.touches[1].clientY));}\n$image.off(isTouchEnabled?'touchstart':'pointerdown mousedown MSPointerDown');$image.on(isTouchEnabled?'touchstart':'pointerdown mousedown MSPointerDown',function(e){if(e&&e.originalEvent.touches&&e.originalEvent.touches.length>=2){e.preventDefault();pinchDimention=getDimention(e.originalEvent);isDragActive=false;if($image.hasClass(imageDraggableClass)){$image.removeClass(imageDraggableClass);}}else if(gallery.fullScreen&&(!transitionEnabled||!transitionActive)){imagePosY=getTop($image);imagePosX=$image.offset().left;if(isTouchEnabled){touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];e.clientX=touch.pageX;e.clientY=touch.pageY;}\nstartX=e.clientX||e.originalEvent.clientX;startY=e.clientY||e.originalEvent.clientY;isDragActive=true;}\nif($image.offset()&&$image.width()>$imageContainer.width()){endX=$image.offset().left;}});$image.off(isTouchEnabled?'touchmove':'mousemove pointermove MSPointerMove');$image.on(isTouchEnabled?'touchmove':'mousemove pointermove MSPointerMove',function(e){if(e&&e.originalEvent.touches&&e.originalEvent.touches.length>=2){e.preventDefault();var currentDimention=getDimention(e.originalEvent);if($image.hasClass(imageDraggableClass)){$image.removeClass(imageDraggableClass);}\nif(currentDimention<pinchDimention){zoomOut(e);pinchDimention=currentDimention;}else if(currentDimention>pinchDimention){zoomIn(e);pinchDimention=currentDimention;}}else{var clientX,clientY;if(gallery.fullScreen&&isDragActive&&(!transitionEnabled||!transitionActive)){if(allowZoomOut&&!$image.hasClass(imageDraggableClass)){$image.addClass(imageDraggableClass);}\nclientX=e.clientX||e.originalEvent.clientX;clientY=e.clientY||e.originalEvent.clientY;e.preventDefault();if(isTouchEnabled){touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];clientX=touch.pageX;clientY=touch.pageY;}\nif(allowZoomOut){imagePosY=getTop($(fullscreenImageSelector,$gallery));shiftImage(clientX-startX,clientY-startY,e);}}}});$image.off('transitionend webkitTransitionEnd mozTransitionEnd msTransitionEnd ');$image.on('transitionend webkitTransitionEnd mozTransitionEnd msTransitionEnd',function(){transitionActive=false;});if(keyboardNavigation){$(document).off('keydown',keyboardNavigation);}\nkeyboardNavigation=function(e){var step=40,$focus=$(':focus'),isFullScreen=$(gallerySelector).data('fotorama').fullScreen,initVars=function(){imagePosX=$(fullscreenImageSelector,$gallery).offset().left;imagePosY=getTop($(fullscreenImageSelector,$gallery));};if(($focus.attr('data-gallery-role')||!$focus.length)&&allowZoomOut){if(isFullScreen){imagePosX=$(fullscreenImageSelector,$(gallerySelector)).offset().left;imagePosY=getTop($(fullscreenImageSelector,$(gallerySelector)));}\nif(e.keyCode===39){if(isFullScreen){initVars();shiftImage(-step,0,e);}}\nif(e.keyCode===38){if(isFullScreen){initVars();shiftImage(0,step,e);}}\nif(e.keyCode===37){if(isFullScreen){initVars();shiftImage(step,0,e);}}\nif(e.keyCode===40){if(isFullScreen){e.preventDefault();initVars();shiftImage(0,-step,e);}}}\nif(e.keyCode===27&&isFullScreen&&allowZoomOut){$(gallerySelector).data('fotorama').cancelFullScreen();}};$(document).on('keydown',keyboardNavigation);$(document).on(isTouchEnabled?'touchend':'mouseup pointerup MSPointerUp',function(e){if(gallery.fullScreen){if($image.offset()&&$image.width()>$imageContainer.width()){endX=$image.offset().left;}\nisDragActive=false;$image.removeClass(imageDraggableClass);}});$(window).off('resize',resizeHandler);$(window).on('resize',{$image:$image,fotorama:fotorama},resizeHandler);}\nhideMagnifier=function(){$(magnifierSelector).empty().hide();$(magnifierZoomSelector).remove();};function checkForVideo($stageFrame){return $stageFrame.hasClass(videoContainerClass);}\nfunction behaveOnDrag(e,initPos){var pos=[e.pageX,e.pageY],isArrow=$(e.target).data('gallery-role')==='arrow',isClick=initPos[0]===pos[0]&&initPos[1]===pos[1],isImg=$(e.target).parent().data('active');if(isArrow||isImg&&!isClick){hideMagnifier();}}\nif(config.magnifierOpts.enabled){$(element).on('pointerdown mousedown MSPointerDown',function(e){var pos=[e.pageX,e.pageY];$(element).on('mousemove pointermove MSPointerMove',function(ev){navigator.msPointerEnabled?hideMagnifier():behaveOnDrag(ev,pos);});$(document).on('mouseup pointerup MSPointerUp',function(){$(element).off('mousemove pointermove MSPointerMove');});});}\n$.extend(config.magnifierOpts,{zoomable:false,thumb:'.fotorama__img',largeWrapper:'[data-gallery-role=\"magnifier\"]',height:config.magnifierOpts.height||function(){return $('[data-active=\"true\"]').height();},width:config.magnifierOpts.width||function(){var productMedia=$(gallerySelector).parent().parent();return productMedia.parent().width()-productMedia.width()-20;},left:config.magnifierOpts.left||function(){return $(gallerySelector).offset().left+$(gallerySelector).width()+20;},top:config.magnifierOpts.top||function(){return $(gallerySelector).offset().top;}});$(element).on('fotorama:load fotorama:showend fotorama:fullscreenexit fotorama:ready',function(e,fotorama){var $activeStageFrame=$(gallerySelector).data('fotorama').activeFrame.$stageFrame;if(!$activeStageFrame.find(magnifierZoomSelector).length){hideMagnifier();if(config.magnifierOpts){config.magnifierOpts.large=$(gallerySelector).data('fotorama').activeFrame.img;config.magnifierOpts.full=fotorama.data[fotorama.activeIndex].original;!checkForVideo($activeStageFrame)&&$($activeStageFrame).magnify(config.magnifierOpts);}}});$(element).on('gallery:loaded',function(e){var $prevImage;$(element).find(gallerySelector).on('fotorama:ready',function(e,fotorama){var $zoomIn=$(zoomInButtonSelector),$zoomOut=$(zoomOutButtonSelector);if(!$zoomIn.hasClass(zoomInLoaded)){$zoomIn.on('click touchstart',zoomIn);$zoomIn.on('mousedown',function(e){e.stopPropagation();});$zoomIn.on('keyup',function(e){if(e.keyCode===13){zoomIn(e);}});$(window).on('keyup',function(e){if(e.keyCode===107||fotorama.fullscreen){zoomIn(e);}});$zoomIn.addClass(zoomInLoaded);}\nif(!$zoomOut.hasClass(zoomOutLoaded)){$zoomOut.on('click touchstart',zoomOut);$zoomOut.on('mousedown',function(e){e.stopPropagation();});$zoomOut.on('keyup',function(e){if(e.keyCode===13){zoomOut(e);}});$(window).on('keyup',function(e){if(e.keyCode===109||fotorama.fullscreen){zoomOut(e);}});$zoomOut.addClass(zoomOutLoaded);}}).on('fotorama:fullscreenenter fotorama:showend',function(e,fotorama){hideMagnifier();if(!$(fullscreenImageSelector).is($prevImage)){resetVars($(fullscreenImageSelector));}\nmagnifierFullscreen(fotorama);mousewheel(e,fotorama,element);if($prevImage){calculateMinSize($prevImage);if(!$(fullscreenImageSelector).is($prevImage)){resetVars($prevImage);}}\ntoggleStandartNavigation();}).on('fotorama:load',function(e,fotorama){if($(gallerySelector).data('fotorama').fullScreen){toggleZoomButtons($(fullscreenImageSelector),isTouchEnabled,checkForVideo(fotorama.activeFrame.$stageFrame));}\nmagnifierFullscreen(fotorama);}).on('fotorama:show',function(e,fotorama){$prevImage=_.clone($(fullscreenImageSelector));hideMagnifier();}).on('fotorama:fullscreenexit',function(e,fotorama){resetVars($(fullscreenImageSelector));hideMagnifier();hideZoomControls(true);});});return config;};});","js/navigation-menu.min.js":"define(['jquery','matchMedia','mage/template','mage/dropdowns','mage/terms'],function($,mediaCheck,mageTemplate){'use strict';$.widget('mage.navigationMenu',{options:{itemsContainer:'> ul',topLevel:'li.level0',topLevelSubmenu:'> .submenu',topLevelHoverClass:'hover',expandedTopLevel:'.more',hoverInTimeout:300,hoverOutTimeout:500,submenuAnimationSpeed:200,collapsable:true,collapsableDropdownTemplate:'<script type=\"text/x-magento-template\">'+'<li class=\"level0 level-top more parent\">'+'<div class=\"submenu\">'+'<ul><%= elems %></ul>'+'</div>'+'</li>'+'</script>'},_create:function(){this.itemsContainer=$(this.options.itemsContainer,this.element);this.topLevel=$(this.options.topLevel,this.element);this.topLevelSubmenu=$(this.options.topLevelSubmenu,this.topLevel);this._bind();},_init:function(){if(this.options.collapsable){setTimeout($.proxy(function(){this._checkToCollapseOrExpand();},this),100);}},_bind:function(){this._on({'mouseenter > ul > li.level0':function(e){if(!this.entered){this.timeoutId&&clearTimeout(this.timeoutId);this.timeoutId=setTimeout($.proxy(function(){this._openSubmenu(e);},this),this.options.hoverInTimeout);this.entered=true;}},'mouseleave > ul > li.level0':function(e){this.entered=null;this.timeoutId&&clearTimeout(this.timeoutId);this.timeoutId=setTimeout($.proxy(function(){this._closeSubmenu(e.currentTarget);},this),this.options.hoverOutTimeout);},'click':function(e){e.stopPropagation();}});$(document).on('click.hideMenu',$.proxy(function(){var isOpened=this.topLevel.filter(function(){return $(this).data('opened');});if(isOpened){this._closeSubmenu(null,false);}},this));$(window).on('resize',$.proxy(function(){this.timeoutOnResize&&clearTimeout(this.timeoutOnResize);this.timeoutOnResize=setTimeout($.proxy(function(){if(this.options.collapsable){if($(this.options.expandedTopLevel,this.element).length){this._expandMenu();}\nthis._checkToCollapseOrExpand();}},this),300);},this));},_openSubmenu:function(e){var menuItem=e.currentTarget;if(!$(menuItem).data('opened')){this._closeSubmenu(menuItem,true,true);$(this.options.topLevelSubmenu,menuItem).slideDown(this.options.submenuAnimationSpeed,$.proxy(function(){$(menuItem).addClass(this.options.topLevelHoverClass);$(menuItem).data('opened',true);},this));}else if($(e.target).closest(this.options.topLevel)){$(e.target).addClass(this.options.topLevelHoverClass).siblings(this.options.topLevel).removeClass(this.options.topLevelHoverClass);}},_closeSubmenu:function(menuItem,excludeCurrent,fast){var topLevel=$(this.options.topLevel,this.element),activeSubmenu=$(this.options.topLevelSubmenu,menuItem||null);$(this.options.topLevelSubmenu,topLevel).filter(function(){return excludeCurrent?$(this).not(activeSubmenu):true;}).slideUp(fast?0:this.options.submenuAnimationSpeed);topLevel.removeClass(this.options.topLevelHoverClass).data('opened',false);},_checkToCollapseOrExpand:function(){var navWidth,totalWidth,startCollapseIndex;if($('html').hasClass('lt-640')||$('html').hasClass('w-640')){return;}\nnavWidth=this.itemsContainer.width();totalWidth=0;startCollapseIndex=0;$.each($(this.options.topLevel,this.element),function(index,item){totalWidth+=$(item).outerWidth(true);if(totalWidth>navWidth&&!startCollapseIndex){startCollapseIndex=index-2;}});this[startCollapseIndex?'_collapseMenu':'_expandMenu'](startCollapseIndex);},_collapseMenu:function(startCollapseIndex){this.elemsToCollapse=this.topLevel.filter(function(index){return index>startCollapseIndex;});this.elemsToCollapseClone=$('<div></div>').append(this.elemsToCollapse.clone()).html();this.collapsableDropdown=$(mageTemplate(this.options.collapsableDropdownTemplate,{elems:this.elemsToCollapseClone}));this.itemsContainer.append(this.collapsableDropdown);this.elemsToCollapse.detach();},_expandMenu:function(){this.elemsToCollapse&&this.elemsToCollapse.appendTo(this.itemsContainer);this.collapsableDropdown&&this.collapsableDropdown.remove();},_destroy:function(){this._expandMenu();}});$.widget('mage.navigationMenu',$.mage.navigationMenu,{options:{parentLevel:'> ul > li.level0',submenuAnimationSpeed:150,submenuContiniumEffect:false},_init:function(){this._super();this._applySubmenuStyles();},_applySubmenuStyles:function(){$(this.options.topLevelSubmenu,$(this.options.topLevel,this.element)).removeAttr('style');$(this.options.topLevelSubmenu,$(this.options.parentLevel,this.element)).css({display:'block',height:0,overflow:'hidden'});},_openSubmenu:function(e){var menuItem=e.currentTarget,submenu=$(this.options.topLevelSubmenu,menuItem),openedItems=$(this.options.topLevel,this.element).filter(function(){return $(this).data('opened');});if(submenu.length){this.heightToAnimate=$(this.options.itemsContainer,submenu).outerHeight(true);if(openedItems.length){this._closeSubmenu(menuItem,true,this.heightToAnimate,$.proxy(function(){submenu.css({height:'auto'});$(menuItem).addClass(this.options.topLevelHoverClass);},this),e);}else{submenu.animate({height:this.heightToAnimate},this.options.submenuAnimationSpeed,$.proxy(function(){$(menuItem).addClass(this.options.topLevelHoverClass);},this));}\n$(menuItem).data('opened',true);}else{this._closeSubmenu(menuItem);}},_closeSubmenu:function(menuItem,excludeCurrent,heightToAnimate,callback){var topLevel=$(this.options.topLevel,this.itemsContainer),prevOpenedItem,prevOpenedSubmenu;if(!excludeCurrent){$(this.options.topLevelSubmenu,$(this.options.parentLevel,this.element)).animate({height:0});topLevel.data('opened',false).removeClass(this.options.topLevelHoverClass);}else{prevOpenedItem=topLevel.filter(function(){return $(this).data('opened');});prevOpenedSubmenu=$(this.options.topLevelSubmenu,prevOpenedItem);prevOpenedSubmenu.animate({height:heightToAnimate},this.options.submenuAnimationSpeed,'linear',function(){$(this).css({height:0});callback&&callback();});prevOpenedItem.data('opened',false).removeClass(this.options.topLevelHoverClass);}},_collapseMenu:function(){this._superApply(arguments);this._applySubmenuStyles();}});$.widget('mage.navigationMenu',$.mage.navigationMenu,{options:{responsive:false,origNavPlaceholder:'.page-header',mainContainer:'body',pageWrapper:'.page-wrapper',openedMenuClass:'opened',toggleActionPlaceholder:'.block-search',itemWithSubmenu:'li.parent',titleWithSubmenu:'li.parent > a',submenu:'li.parent > .submenu',toggleActionTemplate:'<script type=\"text/x-magento-template\">'+'<span data-action=\"toggle-nav\" class=\"action toggle nav\">Toggle Nav</span>'+'</script>',submenuActionsTemplate:'<script type=\"text/x-magento-template\">'+'<li class=\"action all\">'+'<a href=\"<%= categoryURL %>\"><span>All <%= category %></span></a>'+'</li>'+'</script>',navigationSectionsWrapperTemplate:'<script type=\"text/x-magento-template\">'+'<dl class=\"navigation-tabs\" data-sections=\"tabs\">'+'</dl>'+'</script>',navigationItemWrapperTemplate:'<script type=\"text/x-magento-template\">'+'<dt class=\"item title <% if (active) { %>active<% } %>\" data-section=\"title\">'+'<a class=\"switch\" data-toggle=\"switch\" href=\"#TODO\"><%= title %></a>'+'</dt>'+'<dd class=\"item content <% if (active) { %>active<%}%>\" data-section=\"content\">'+'</dd>'+'</script>'},_init:function(){this._super();this.mainContainer=$(this.options.mainContainer);this.pageWrapper=$(this.options.pageWrapper);this.toggleAction=$(mageTemplate(this.options.toggleActionTemplate,{}));if(this.options.responsive){mediaCheck({media:'(min-width: 768px)',entry:$.proxy(function(){this._toggleDesktopMode();},this),exit:$.proxy(function(){this._toggleMobileMode();},this)});}},_bind:function(){this._super();this._bindDocumentEvents();},_bindDocumentEvents:function(){if(!this.eventsBound){$(document).on('click.toggleMenu','.action.toggle.nav',$.proxy(function(e){if($(this.element).data('opened')){this._hideMenu();}else{this._showMenu();}\ne.stopPropagation();this.mobileNav.scrollTop(0);this._fixedBackLink();},this)).on('click.hideMenu',this.options.pageWrapper,$.proxy(function(){if($(this.element).data('opened')){this._hideMenu();this.mobileNav.scrollTop(0);this._fixedBackLink();}},this)).on('click.showSubmenu',this.options.titleWithSubmenu,$.proxy(function(e){this._showSubmenu(e);e.preventDefault();this.mobileNav.scrollTop(0);this._fixedBackLink();},this)).on('click.hideSubmenu','.action.back',$.proxy(function(e){this._hideSubmenu(e);this.mobileNav.scrollTop(0);this._fixedBackLink();},this));this.eventsBound=true;}},_showMenu:function(){$(this.element).data('opened',true);this.mainContainer.add('html').addClass(this.options.openedMenuClass);},_hideMenu:function(){$(this.element).data('opened',false);this.mainContainer.add('html').removeClass(this.options.openedMenuClass);},_showSubmenu:function(e){var submenu;$(e.currentTarget).addClass('action back');submenu=$(e.currentTarget).siblings('.submenu');submenu.addClass('opened');},_hideSubmenu:function(e){var submenuSelector='.submenu',submenu=$(e.currentTarget).next(submenuSelector);$(e.currentTarget).removeClass('action back');submenu.removeClass('opened');},_renderSubmenuActions:function(){$.each($(this.options.itemWithSubmenu),$.proxy(function(index,item){var actions=$(mageTemplate(this.options.submenuActionsTemplate,{category:$('> a > span',item).text(),categoryURL:$('> a',item).attr('href')})),submenu=$('> .submenu',item),items=$('> ul',submenu);items.prepend(actions);},this));},_toggleMobileMode:function(){this._expandMenu();$(this.options.topLevelSubmenu,$(this.options.topLevel,this.element)).removeAttr('style');this.toggleAction.insertBefore(this.options.toggleActionPlaceholder);this.mobileNav=$(this.element).detach().clone();this.mainContainer.prepend(this.mobileNav);this.mobileNav.find('> ul').addClass('nav');this._insertExtraItems();this._wrapItemsInSections();this.mobileNav.scroll($.proxy(function(){this._fixedBackLink();},this));this._renderSubmenuActions();this._bindDocumentEvents();},_toggleDesktopMode:function(){this.mobileNav&&this.mobileNav.remove();this.toggleAction.detach();$(this.element).insertAfter(this.options.origNavPlaceholder);$(document).off('click.toggleMenu','.action.toggle.nav').off('click.hideMenu',this.options.pageWrapper).off('click.showSubmenu',this.options.titleWithSubmenu).off('click.hideSubmenu','.action.back');this.eventsBound=false;this._applySubmenuStyles();},_insertExtraItems:function(){var settings,footerSettings,account;if($('.header.panel .switcher').length){settings=$('.header.panel .switcher').clone().addClass('settings');this.mobileNav.prepend(settings);}\nif($('.footer .switcher').length){footerSettings=$('.footer .switcher').clone().addClass('settings');this.mobileNav.prepend(footerSettings);}\nif($('.header.panel .header.links li').length){account=$('.header.panel > .header.links').clone().addClass('account');this.mobileNav.prepend(account);}},_wrapItemsInSections:function(){var account=$('> .account',this.mobileNav),settings=$('> .settings',this.mobileNav),nav=$('> .nav',this.mobileNav),navigationSectionsWrapper=$(mageTemplate(this.options.navigationSectionsWrapperTemplate,{})),navigationItemWrapper;this.mobileNav.append(navigationSectionsWrapper);if(nav.length){navigationItemWrapper=$(mageTemplate(this.options.navigationItemWrapperTemplate,{title:'Menu'}));navigationSectionsWrapper.append(navigationItemWrapper);navigationItemWrapper.eq(1).append(nav);}\nif(account.length){navigationItemWrapper=$(mageTemplate(this.options.navigationItemWrapperTemplate,{title:'Account'}));navigationSectionsWrapper.append(navigationItemWrapper);navigationItemWrapper.eq(1).append(account);}\nif(settings.length){navigationItemWrapper=$(mageTemplate(this.options.navigationItemWrapperTemplate,{title:'Settings'}));navigationSectionsWrapper.append(navigationItemWrapper);navigationItemWrapper.eq(1).append(settings);}\nnavigationSectionsWrapper.addClass('navigation-tabs-'+navigationSectionsWrapper.find('[data-section=\"title\"]').length);navigationSectionsWrapper.terms();},_fixedBackLink:function(){var linksBack=this.mobileNav.find('.submenu .action.back'),linkBack=this.mobileNav.find('.submenu.opened > ul > .action.back').last(),subMenu,navOffset,linkBackHeight;linksBack.removeClass('fixed');if(linkBack.length){subMenu=linkBack.parent();navOffset=this.mobileNav.find('.nav').position().top;linkBackHeight=linkBack.height();if(navOffset<=0){linkBack.addClass('fixed');subMenu.css({paddingTop:linkBackHeight});}else{linkBack.removeClass('fixed');subMenu.css({paddingTop:0});}}}});return $.mage.navigationMenu;});","knockoutjs/knockout.min.js":"/*!\n * Knockout JavaScript library v3.5.1\n * (c) The Knockout.js team - http://knockoutjs.com/\n * License: MIT (http://www.opensource.org/licenses/mit-license.php)\n */\n(function(){var DEBUG=true;(function(undefined){var window=this||(0,eval)('this'),document=window['document'],navigator=window['navigator'],jQueryInstance=window[\"jQuery\"],JSON=window[\"JSON\"];if(!jQueryInstance&&typeof jQuery!==\"undefined\"){jQueryInstance=jQuery;}\n(function(factory){if(typeof define==='function'&&define['amd']){define(['exports','require'],factory);}else if(typeof exports==='object'&&typeof module==='object'){factory(module['exports']||exports);}else{factory(window['ko']={});}}(function(koExports,amdRequire){var ko=typeof koExports!=='undefined'?koExports:{};ko.exportSymbol=function(koPath,object){var tokens=koPath.split(\".\");var target=ko;for(var i=0;i<tokens.length-1;i++)\ntarget=target[tokens[i]];target[tokens[tokens.length-1]]=object;};ko.exportProperty=function(owner,publicName,object){owner[publicName]=object;};ko.version=\"3.5.1\";ko.exportSymbol('version',ko.version);ko.options={'deferUpdates':false,'useOnlyNativeEvents':false,'foreachHidesDestroyed':false};ko.utils=(function(){var hasOwnProperty=Object.prototype.hasOwnProperty;function objectForEach(obj,action){for(var prop in obj){if(hasOwnProperty.call(obj,prop)){action(prop,obj[prop]);}}}\nfunction extend(target,source){if(source){for(var prop in source){if(hasOwnProperty.call(source,prop)){target[prop]=source[prop];}}}\nreturn target;}\nfunction setPrototypeOf(obj,proto){obj.__proto__=proto;return obj;}\nvar canSetPrototype=({__proto__:[]}instanceof Array);var canUseSymbols=!DEBUG&&typeof Symbol==='function';var knownEvents={},knownEventTypesByEventName={};var keyEventTypeName=(navigator&&/Firefox\\/2/i.test(navigator.userAgent))?'KeyboardEvent':'UIEvents';knownEvents[keyEventTypeName]=['keyup','keydown','keypress'];knownEvents['MouseEvents']=['click','dblclick','mousedown','mouseup','mousemove','mouseover','mouseout','mouseenter','mouseleave'];objectForEach(knownEvents,function(eventType,knownEventsForType){if(knownEventsForType.length){for(var i=0,j=knownEventsForType.length;i<j;i++)\nknownEventTypesByEventName[knownEventsForType[i]]=eventType;}});var eventsThatMustBeRegisteredUsingAttachEvent={'propertychange':true};var ieVersion=document&&(function(){var version=3,div=document.createElement('div'),iElems=div.getElementsByTagName('i');while(div.innerHTML='<!--[if gt IE '+(++version)+']><i></i><![endif]-->',iElems[0]){}\nreturn version>4?version:undefined;}());var isIe6=ieVersion===6,isIe7=ieVersion===7;function isClickOnCheckableElement(element,eventType){if((ko.utils.tagNameLower(element)!==\"input\")||!element.type)return false;if(eventType.toLowerCase()!=\"click\")return false;var inputType=element.type;return(inputType==\"checkbox\")||(inputType==\"radio\");}\nvar cssClassNameRegex=/\\S+/g;var jQueryEventAttachName;function toggleDomNodeCssClass(node,classNames,shouldHaveClass){var addOrRemoveFn;if(classNames){if(typeof node.classList==='object'){addOrRemoveFn=node.classList[shouldHaveClass?'add':'remove'];ko.utils.arrayForEach(classNames.match(cssClassNameRegex),function(className){addOrRemoveFn.call(node.classList,className);});}else if(typeof node.className['baseVal']==='string'){toggleObjectClassPropertyString(node.className,'baseVal',classNames,shouldHaveClass);}else{toggleObjectClassPropertyString(node,'className',classNames,shouldHaveClass);}}}\nfunction toggleObjectClassPropertyString(obj,prop,classNames,shouldHaveClass){var currentClassNames=obj[prop].match(cssClassNameRegex)||[];ko.utils.arrayForEach(classNames.match(cssClassNameRegex),function(className){ko.utils.addOrRemoveItem(currentClassNames,className,shouldHaveClass);});obj[prop]=currentClassNames.join(\" \");}\nreturn{fieldsIncludedWithJsonPost:['authenticity_token',/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(array,action,actionOwner){for(var i=0,j=array.length;i<j;i++){action.call(actionOwner,array[i],i,array);}},arrayIndexOf:typeof Array.prototype.indexOf==\"function\"?function(array,item){return Array.prototype.indexOf.call(array,item);}:function(array,item){for(var i=0,j=array.length;i<j;i++){if(array[i]===item)\nreturn i;}\nreturn-1;},arrayFirst:function(array,predicate,predicateOwner){for(var i=0,j=array.length;i<j;i++){if(predicate.call(predicateOwner,array[i],i,array))\nreturn array[i];}\nreturn undefined;},arrayRemoveItem:function(array,itemToRemove){var index=ko.utils.arrayIndexOf(array,itemToRemove);if(index>0){array.splice(index,1);}\nelse if(index===0){array.shift();}},arrayGetDistinctValues:function(array){var result=[];if(array){ko.utils.arrayForEach(array,function(item){if(ko.utils.arrayIndexOf(result,item)<0)\nresult.push(item);});}\nreturn result;},arrayMap:function(array,mapping,mappingOwner){var result=[];if(array){for(var i=0,j=array.length;i<j;i++)\nresult.push(mapping.call(mappingOwner,array[i],i));}\nreturn result;},arrayFilter:function(array,predicate,predicateOwner){var result=[];if(array){for(var i=0,j=array.length;i<j;i++)\nif(predicate.call(predicateOwner,array[i],i))\nresult.push(array[i]);}\nreturn result;},arrayPushAll:function(array,valuesToPush){if(valuesToPush instanceof Array)\narray.push.apply(array,valuesToPush);else\nfor(var i=0,j=valuesToPush.length;i<j;i++)\narray.push(valuesToPush[i]);return array;},addOrRemoveItem:function(array,value,included){var existingEntryIndex=ko.utils.arrayIndexOf(ko.utils.peekObservable(array),value);if(existingEntryIndex<0){if(included)\narray.push(value);}else{if(!included)\narray.splice(existingEntryIndex,1);}},canSetPrototype:canSetPrototype,extend:extend,setPrototypeOf:setPrototypeOf,setPrototypeOfOrExtend:canSetPrototype?setPrototypeOf:extend,objectForEach:objectForEach,objectMap:function(source,mapping,mappingOwner){if(!source)\nreturn source;var target={};for(var prop in source){if(hasOwnProperty.call(source,prop)){target[prop]=mapping.call(mappingOwner,source[prop],prop,source);}}\nreturn target;},emptyDomNode:function(domNode){while(domNode.firstChild){ko.removeNode(domNode.firstChild);}},moveCleanedNodesToContainerElement:function(nodes){var nodesArray=ko.utils.makeArray(nodes);var templateDocument=(nodesArray[0]&&nodesArray[0].ownerDocument)||document;var container=templateDocument.createElement('div');for(var i=0,j=nodesArray.length;i<j;i++){container.appendChild(ko.cleanNode(nodesArray[i]));}\nreturn container;},cloneNodes:function(nodesArray,shouldCleanNodes){for(var i=0,j=nodesArray.length,newNodesArray=[];i<j;i++){var clonedNode=nodesArray[i].cloneNode(true);newNodesArray.push(shouldCleanNodes?ko.cleanNode(clonedNode):clonedNode);}\nreturn newNodesArray;},setDomNodeChildren:function(domNode,childNodes){ko.utils.emptyDomNode(domNode);if(childNodes){for(var i=0,j=childNodes.length;i<j;i++)\ndomNode.appendChild(childNodes[i]);}},replaceDomNodes:function(nodeToReplaceOrNodeArray,newNodesArray){var nodesToReplaceArray=nodeToReplaceOrNodeArray.nodeType?[nodeToReplaceOrNodeArray]:nodeToReplaceOrNodeArray;if(nodesToReplaceArray.length>0){var insertionPoint=nodesToReplaceArray[0];var parent=insertionPoint.parentNode;for(var i=0,j=newNodesArray.length;i<j;i++)\nparent.insertBefore(newNodesArray[i],insertionPoint);for(var i=0,j=nodesToReplaceArray.length;i<j;i++){ko.removeNode(nodesToReplaceArray[i]);}}},fixUpContinuousNodeArray:function(continuousNodeArray,parentNode){if(continuousNodeArray.length){parentNode=(parentNode.nodeType===8&&parentNode.parentNode)||parentNode;while(continuousNodeArray.length&&continuousNodeArray[0].parentNode!==parentNode)\ncontinuousNodeArray.splice(0,1);while(continuousNodeArray.length>1&&continuousNodeArray[continuousNodeArray.length-1].parentNode!==parentNode)\ncontinuousNodeArray.length--;if(continuousNodeArray.length>1){var current=continuousNodeArray[0],last=continuousNodeArray[continuousNodeArray.length-1];continuousNodeArray.length=0;while(current!==last){continuousNodeArray.push(current);current=current.nextSibling;}\ncontinuousNodeArray.push(last);}}\nreturn continuousNodeArray;},setOptionNodeSelectionState:function(optionNode,isSelected){if(ieVersion<7)\noptionNode.setAttribute(\"selected\",isSelected);else\noptionNode.selected=isSelected;},stringTrim:function(string){return string===null||string===undefined?'':string.trim?string.trim():string.toString().replace(/^[\\s\\xa0]+|[\\s\\xa0]+$/g,'');},stringStartsWith:function(string,startsWith){string=string||\"\";if(startsWith.length>string.length)\nreturn false;return string.substring(0,startsWith.length)===startsWith;},domNodeIsContainedBy:function(node,containedByNode){if(node===containedByNode)\nreturn true;if(node.nodeType===11)\nreturn false;if(containedByNode.contains)\nreturn containedByNode.contains(node.nodeType!==1?node.parentNode:node);if(containedByNode.compareDocumentPosition)\nreturn(containedByNode.compareDocumentPosition(node)&16)==16;while(node&&node!=containedByNode){node=node.parentNode;}\nreturn!!node;},domNodeIsAttachedToDocument:function(node){return ko.utils.domNodeIsContainedBy(node,node.ownerDocument.documentElement);},anyDomNodeIsAttachedToDocument:function(nodes){return!!ko.utils.arrayFirst(nodes,ko.utils.domNodeIsAttachedToDocument);},tagNameLower:function(element){return element&&element.tagName&&element.tagName.toLowerCase();},catchFunctionErrors:function(delegate){return ko['onError']?function(){try{return delegate.apply(this,arguments);}catch(e){ko['onError']&&ko['onError'](e);throw e;}}:delegate;},setTimeout:function(handler,timeout){return setTimeout(ko.utils.catchFunctionErrors(handler),timeout);},deferError:function(error){setTimeout(function(){ko['onError']&&ko['onError'](error);throw error;},0);},registerEventHandler:function(element,eventType,handler){var wrappedHandler=ko.utils.catchFunctionErrors(handler);var mustUseAttachEvent=eventsThatMustBeRegisteredUsingAttachEvent[eventType];if(!ko.options['useOnlyNativeEvents']&&!mustUseAttachEvent&&jQueryInstance){if(!jQueryEventAttachName){jQueryEventAttachName=(typeof jQueryInstance(element)['on']=='function')?'on':'bind';}\njQueryInstance(element)[jQueryEventAttachName](eventType,wrappedHandler);}else if(!mustUseAttachEvent&&typeof element.addEventListener==\"function\")\nelement.addEventListener(eventType,wrappedHandler,false);else if(typeof element.attachEvent!=\"undefined\"){var attachEventHandler=function(event){wrappedHandler.call(element,event);},attachEventName=\"on\"+eventType;element.attachEvent(attachEventName,attachEventHandler);ko.utils.domNodeDisposal.addDisposeCallback(element,function(){element.detachEvent(attachEventName,attachEventHandler);});}else\nthrow new Error(\"Browser doesn't support addEventListener or attachEvent\");},triggerEvent:function(element,eventType){if(!(element&&element.nodeType))\nthrow new Error(\"element must be a DOM node when calling triggerEvent\");var useClickWorkaround=isClickOnCheckableElement(element,eventType);if(!ko.options['useOnlyNativeEvents']&&jQueryInstance&&!useClickWorkaround){jQueryInstance(element)['trigger'](eventType);}else if(typeof document.createEvent==\"function\"){if(typeof element.dispatchEvent==\"function\"){var eventCategory=knownEventTypesByEventName[eventType]||\"HTMLEvents\";var event=document.createEvent(eventCategory);event.initEvent(eventType,true,true,window,0,0,0,0,0,false,false,false,false,0,element);element.dispatchEvent(event);}\nelse\nthrow new Error(\"The supplied element doesn't support dispatchEvent\");}else if(useClickWorkaround&&element.click){element.click();}else if(typeof element.fireEvent!=\"undefined\"){element.fireEvent(\"on\"+eventType);}else{throw new Error(\"Browser doesn't support triggering events\");}},unwrapObservable:function(value){return ko.isObservable(value)?value():value;},peekObservable:function(value){return ko.isObservable(value)?value.peek():value;},toggleDomNodeCssClass:toggleDomNodeCssClass,setTextContent:function(element,textContent){var value=ko.utils.unwrapObservable(textContent);if((value===null)||(value===undefined))\nvalue=\"\";var innerTextNode=ko.virtualElements.firstChild(element);if(!innerTextNode||innerTextNode.nodeType!=3||ko.virtualElements.nextSibling(innerTextNode)){ko.virtualElements.setDomNodeChildren(element,[element.ownerDocument.createTextNode(value)]);}else{innerTextNode.data=value;}\nko.utils.forceRefresh(element);},setElementName:function(element,name){element.name=name;if(ieVersion<=7){try{var escapedName=element.name.replace(/[&<>'\"]/g,function(r){return\"&#\"+r.charCodeAt(0)+\";\";});element.mergeAttributes(document.createElement(\"<input name='\"+escapedName+\"'/>\"),false);}\ncatch(e){}}},forceRefresh:function(node){if(ieVersion>=9){var elem=node.nodeType==1?node:node.parentNode;if(elem.style)\nelem.style.zoom=elem.style.zoom;}},ensureSelectElementIsRenderedCorrectly:function(selectElement){if(ieVersion){var originalWidth=selectElement.style.width;selectElement.style.width=0;selectElement.style.width=originalWidth;}},range:function(min,max){min=ko.utils.unwrapObservable(min);max=ko.utils.unwrapObservable(max);var result=[];for(var i=min;i<=max;i++)\nresult.push(i);return result;},makeArray:function(arrayLikeObject){var result=[];for(var i=0,j=arrayLikeObject.length;i<j;i++){result.push(arrayLikeObject[i]);};return result;},createSymbolOrString:function(identifier){return canUseSymbols?Symbol(identifier):identifier;},isIe6:isIe6,isIe7:isIe7,ieVersion:ieVersion,getFormFields:function(form,fieldName){var fields=ko.utils.makeArray(form.getElementsByTagName(\"input\")).concat(ko.utils.makeArray(form.getElementsByTagName(\"textarea\")));var isMatchingField=(typeof fieldName=='string')?function(field){return field.name===fieldName}:function(field){return fieldName.test(field.name)};var matches=[];for(var i=fields.length-1;i>=0;i--){if(isMatchingField(fields[i]))\nmatches.push(fields[i]);};return matches;},parseJson:function(jsonString){if(typeof jsonString==\"string\"){jsonString=ko.utils.stringTrim(jsonString);if(jsonString){if(JSON&&JSON.parse)\nreturn JSON.parse(jsonString);return(new Function(\"return \"+jsonString))();}}\nreturn null;},stringifyJson:function(data,replacer,space){if(!JSON||!JSON.stringify)\nthrow new Error(\"Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js\");return JSON.stringify(ko.utils.unwrapObservable(data),replacer,space);},postJson:function(urlOrForm,data,options){options=options||{};var params=options['params']||{};var includeFields=options['includeFields']||this.fieldsIncludedWithJsonPost;var url=urlOrForm;if((typeof urlOrForm=='object')&&(ko.utils.tagNameLower(urlOrForm)===\"form\")){var originalForm=urlOrForm;url=originalForm.action;for(var i=includeFields.length-1;i>=0;i--){var fields=ko.utils.getFormFields(originalForm,includeFields[i]);for(var j=fields.length-1;j>=0;j--)\nparams[fields[j].name]=fields[j].value;}}\ndata=ko.utils.unwrapObservable(data);var form=document.createElement(\"form\");form.style.display=\"none\";form.action=url;form.method=\"post\";for(var key in data){var input=document.createElement(\"input\");input.type=\"hidden\";input.name=key;input.value=ko.utils.stringifyJson(ko.utils.unwrapObservable(data[key]));form.appendChild(input);}\nobjectForEach(params,function(key,value){var input=document.createElement(\"input\");input.type=\"hidden\";input.name=key;input.value=value;form.appendChild(input);});document.body.appendChild(form);options['submitter']?options['submitter'](form):form.submit();setTimeout(function(){form.parentNode.removeChild(form);},0);}}}());ko.exportSymbol('utils',ko.utils);ko.exportSymbol('utils.arrayForEach',ko.utils.arrayForEach);ko.exportSymbol('utils.arrayFirst',ko.utils.arrayFirst);ko.exportSymbol('utils.arrayFilter',ko.utils.arrayFilter);ko.exportSymbol('utils.arrayGetDistinctValues',ko.utils.arrayGetDistinctValues);ko.exportSymbol('utils.arrayIndexOf',ko.utils.arrayIndexOf);ko.exportSymbol('utils.arrayMap',ko.utils.arrayMap);ko.exportSymbol('utils.arrayPushAll',ko.utils.arrayPushAll);ko.exportSymbol('utils.arrayRemoveItem',ko.utils.arrayRemoveItem);ko.exportSymbol('utils.cloneNodes',ko.utils.cloneNodes);ko.exportSymbol('utils.createSymbolOrString',ko.utils.createSymbolOrString);ko.exportSymbol('utils.extend',ko.utils.extend);ko.exportSymbol('utils.fieldsIncludedWithJsonPost',ko.utils.fieldsIncludedWithJsonPost);ko.exportSymbol('utils.getFormFields',ko.utils.getFormFields);ko.exportSymbol('utils.objectMap',ko.utils.objectMap);ko.exportSymbol('utils.peekObservable',ko.utils.peekObservable);ko.exportSymbol('utils.postJson',ko.utils.postJson);ko.exportSymbol('utils.parseJson',ko.utils.parseJson);ko.exportSymbol('utils.registerEventHandler',ko.utils.registerEventHandler);ko.exportSymbol('utils.stringifyJson',ko.utils.stringifyJson);ko.exportSymbol('utils.range',ko.utils.range);ko.exportSymbol('utils.toggleDomNodeCssClass',ko.utils.toggleDomNodeCssClass);ko.exportSymbol('utils.triggerEvent',ko.utils.triggerEvent);ko.exportSymbol('utils.unwrapObservable',ko.utils.unwrapObservable);ko.exportSymbol('utils.objectForEach',ko.utils.objectForEach);ko.exportSymbol('utils.addOrRemoveItem',ko.utils.addOrRemoveItem);ko.exportSymbol('utils.setTextContent',ko.utils.setTextContent);ko.exportSymbol('unwrap',ko.utils.unwrapObservable);if(!Function.prototype['bind']){Function.prototype['bind']=function(object){var originalFunction=this;if(arguments.length===1){return function(){return originalFunction.apply(object,arguments);};}else{var partialArgs=Array.prototype.slice.call(arguments,1);return function(){var args=partialArgs.slice(0);args.push.apply(args,arguments);return originalFunction.apply(object,args);};}};}\nko.utils.domData=new(function(){var uniqueId=0;var dataStoreKeyExpandoPropertyName=\"__ko__\"+(new Date).getTime();var dataStore={};var getDataForNode,clear;if(!ko.utils.ieVersion){getDataForNode=function(node,createIfNotFound){var dataForNode=node[dataStoreKeyExpandoPropertyName];if(!dataForNode&&createIfNotFound){dataForNode=node[dataStoreKeyExpandoPropertyName]={};}\nreturn dataForNode;};clear=function(node){if(node[dataStoreKeyExpandoPropertyName]){delete node[dataStoreKeyExpandoPropertyName];return true;}\nreturn false;};}else{getDataForNode=function(node,createIfNotFound){var dataStoreKey=node[dataStoreKeyExpandoPropertyName];var hasExistingDataStore=dataStoreKey&&(dataStoreKey!==\"null\")&&dataStore[dataStoreKey];if(!hasExistingDataStore){if(!createIfNotFound)\nreturn undefined;dataStoreKey=node[dataStoreKeyExpandoPropertyName]=\"ko\"+uniqueId++;dataStore[dataStoreKey]={};}\nreturn dataStore[dataStoreKey];};clear=function(node){var dataStoreKey=node[dataStoreKeyExpandoPropertyName];if(dataStoreKey){delete dataStore[dataStoreKey];node[dataStoreKeyExpandoPropertyName]=null;return true;}\nreturn false;};}\nreturn{get:function(node,key){var dataForNode=getDataForNode(node,false);return dataForNode&&dataForNode[key];},set:function(node,key,value){var dataForNode=getDataForNode(node,value!==undefined);dataForNode&&(dataForNode[key]=value);},getOrSet:function(node,key,value){var dataForNode=getDataForNode(node,true);return dataForNode[key]||(dataForNode[key]=value);},clear:clear,nextKey:function(){return(uniqueId++)+dataStoreKeyExpandoPropertyName;}};})();ko.exportSymbol('utils.domData',ko.utils.domData);ko.exportSymbol('utils.domData.clear',ko.utils.domData.clear);ko.utils.domNodeDisposal=new(function(){var domDataKey=ko.utils.domData.nextKey();var cleanableNodeTypes={1:true,8:true,9:true};var cleanableNodeTypesWithDescendants={1:true,9:true};function getDisposeCallbacksCollection(node,createIfNotFound){var allDisposeCallbacks=ko.utils.domData.get(node,domDataKey);if((allDisposeCallbacks===undefined)&&createIfNotFound){allDisposeCallbacks=[];ko.utils.domData.set(node,domDataKey,allDisposeCallbacks);}\nreturn allDisposeCallbacks;}\nfunction destroyCallbacksCollection(node){ko.utils.domData.set(node,domDataKey,undefined);}\nfunction cleanSingleNode(node){var callbacks=getDisposeCallbacksCollection(node,false);if(callbacks){callbacks=callbacks.slice(0);for(var i=0;i<callbacks.length;i++)\ncallbacks[i](node);}\nko.utils.domData.clear(node);ko.utils.domNodeDisposal[\"cleanExternalData\"](node);if(cleanableNodeTypesWithDescendants[node.nodeType]){cleanNodesInList(node.childNodes,true);}}\nfunction cleanNodesInList(nodeList,onlyComments){var cleanedNodes=[],lastCleanedNode;for(var i=0;i<nodeList.length;i++){if(!onlyComments||nodeList[i].nodeType===8){cleanSingleNode(cleanedNodes[cleanedNodes.length]=lastCleanedNode=nodeList[i]);if(nodeList[i]!==lastCleanedNode){while(i--&&ko.utils.arrayIndexOf(cleanedNodes,nodeList[i])==-1){}}}}}\nreturn{addDisposeCallback:function(node,callback){if(typeof callback!=\"function\")\nthrow new Error(\"Callback must be a function\");getDisposeCallbacksCollection(node,true).push(callback);},removeDisposeCallback:function(node,callback){var callbacksCollection=getDisposeCallbacksCollection(node,false);if(callbacksCollection){ko.utils.arrayRemoveItem(callbacksCollection,callback);if(callbacksCollection.length==0)\ndestroyCallbacksCollection(node);}},cleanNode:function(node){ko.dependencyDetection.ignore(function(){if(cleanableNodeTypes[node.nodeType]){cleanSingleNode(node);if(cleanableNodeTypesWithDescendants[node.nodeType]){cleanNodesInList(node.getElementsByTagName(\"*\"));}}});return node;},removeNode:function(node){ko.cleanNode(node);if(node.parentNode)\nnode.parentNode.removeChild(node);},\"cleanExternalData\":function(node){if(jQueryInstance&&(typeof jQueryInstance['cleanData']==\"function\"))\njQueryInstance['cleanData']([node]);}};})();ko.cleanNode=ko.utils.domNodeDisposal.cleanNode;ko.removeNode=ko.utils.domNodeDisposal.removeNode;ko.exportSymbol('cleanNode',ko.cleanNode);ko.exportSymbol('removeNode',ko.removeNode);ko.exportSymbol('utils.domNodeDisposal',ko.utils.domNodeDisposal);ko.exportSymbol('utils.domNodeDisposal.addDisposeCallback',ko.utils.domNodeDisposal.addDisposeCallback);ko.exportSymbol('utils.domNodeDisposal.removeDisposeCallback',ko.utils.domNodeDisposal.removeDisposeCallback);(function(){var none=[0,\"\",\"\"],table=[1,\"<table>\",\"</table>\"],tbody=[2,\"<table><tbody>\",\"</tbody></table>\"],tr=[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],select=[1,\"<select multiple='multiple'>\",\"</select>\"],lookup={'thead':table,'tbody':table,'tfoot':table,'tr':tbody,'td':tr,'th':tr,'option':select,'optgroup':select},mayRequireCreateElementHack=ko.utils.ieVersion<=8;function getWrap(tags){var m=tags.match(/^(?:<!--.*?-->\\s*?)*?<([a-z]+)[\\s>]/);return(m&&lookup[m[1]])||none;}\nfunction simpleHtmlParse(html,documentContext){documentContext||(documentContext=document);var windowContext=documentContext['parentWindow']||documentContext['defaultView']||window;var tags=ko.utils.stringTrim(html).toLowerCase(),div=documentContext.createElement(\"div\"),wrap=getWrap(tags),depth=wrap[0];var markup=\"ignored<div>\"+wrap[1]+html+wrap[2]+\"</div>\";if(typeof windowContext['innerShiv']==\"function\"){div.appendChild(windowContext['innerShiv'](markup));}else{if(mayRequireCreateElementHack){documentContext.body.appendChild(div);}\ndiv.innerHTML=markup;if(mayRequireCreateElementHack){div.parentNode.removeChild(div);}}\nwhile(depth--)\ndiv=div.lastChild;return ko.utils.makeArray(div.lastChild.childNodes);}\nfunction jQueryHtmlParse(html,documentContext){if(jQueryInstance['parseHTML']){return jQueryInstance['parseHTML'](html,documentContext)||[];}else{var elems=jQueryInstance['clean']([html],documentContext);if(elems&&elems[0]){var elem=elems[0];while(elem.parentNode&&elem.parentNode.nodeType!==11)\nelem=elem.parentNode;if(elem.parentNode)\nelem.parentNode.removeChild(elem);}\nreturn elems;}}\nko.utils.parseHtmlFragment=function(html,documentContext){return jQueryInstance?jQueryHtmlParse(html,documentContext):simpleHtmlParse(html,documentContext);};ko.utils.parseHtmlForTemplateNodes=function(html,documentContext){var nodes=ko.utils.parseHtmlFragment(html,documentContext);return(nodes.length&&nodes[0].parentElement)||ko.utils.moveCleanedNodesToContainerElement(nodes);};ko.utils.setHtml=function(node,html){ko.utils.emptyDomNode(node);html=ko.utils.unwrapObservable(html);if((html!==null)&&(html!==undefined)){if(typeof html!='string')\nhtml=html.toString();if(jQueryInstance){jQueryInstance(node)['html'](html);}else{var parsedNodes=ko.utils.parseHtmlFragment(html,node.ownerDocument);for(var i=0;i<parsedNodes.length;i++)\nnode.appendChild(parsedNodes[i]);}}};})();ko.exportSymbol('utils.parseHtmlFragment',ko.utils.parseHtmlFragment);ko.exportSymbol('utils.setHtml',ko.utils.setHtml);ko.memoization=(function(){var memos={};function randomMax8HexChars(){return(((1+Math.random())*0x100000000)|0).toString(16).substring(1);}\nfunction generateRandomId(){return randomMax8HexChars()+randomMax8HexChars();}\nfunction findMemoNodes(rootNode,appendToArray){if(!rootNode)\nreturn;if(rootNode.nodeType==8){var memoId=ko.memoization.parseMemoText(rootNode.nodeValue);if(memoId!=null)\nappendToArray.push({domNode:rootNode,memoId:memoId});}else if(rootNode.nodeType==1){for(var i=0,childNodes=rootNode.childNodes,j=childNodes.length;i<j;i++)\nfindMemoNodes(childNodes[i],appendToArray);}}\nreturn{memoize:function(callback){if(typeof callback!=\"function\")\nthrow new Error(\"You can only pass a function to ko.memoization.memoize()\");var memoId=generateRandomId();memos[memoId]=callback;return\"<!--[ko_memo:\"+memoId+\"]-->\";},unmemoize:function(memoId,callbackParams){var callback=memos[memoId];if(callback===undefined)\nthrow new Error(\"Couldn't find any memo with ID \"+memoId+\". Perhaps it's already been unmemoized.\");try{callback.apply(null,callbackParams||[]);return true;}\nfinally{delete memos[memoId];}},unmemoizeDomNodeAndDescendants:function(domNode,extraCallbackParamsArray){var memos=[];findMemoNodes(domNode,memos);for(var i=0,j=memos.length;i<j;i++){var node=memos[i].domNode;var combinedParams=[node];if(extraCallbackParamsArray)\nko.utils.arrayPushAll(combinedParams,extraCallbackParamsArray);ko.memoization.unmemoize(memos[i].memoId,combinedParams);node.nodeValue=\"\";if(node.parentNode)\nnode.parentNode.removeChild(node);}},parseMemoText:function(memoText){var match=memoText.match(/^\\[ko_memo\\:(.*?)\\]$/);return match?match[1]:null;}};})();ko.exportSymbol('memoization',ko.memoization);ko.exportSymbol('memoization.memoize',ko.memoization.memoize);ko.exportSymbol('memoization.unmemoize',ko.memoization.unmemoize);ko.exportSymbol('memoization.parseMemoText',ko.memoization.parseMemoText);ko.exportSymbol('memoization.unmemoizeDomNodeAndDescendants',ko.memoization.unmemoizeDomNodeAndDescendants);ko.tasks=(function(){var scheduler,taskQueue=[],taskQueueLength=0,nextHandle=1,nextIndexToProcess=0;if(window['MutationObserver']){scheduler=(function(callback){var div=document.createElement(\"div\");new MutationObserver(callback).observe(div,{attributes:true});return function(){div.classList.toggle(\"foo\");};})(scheduledProcess);}else if(document&&\"onreadystatechange\"in document.createElement(\"script\")){scheduler=function(callback){var script=document.createElement(\"script\");script.onreadystatechange=function(){script.onreadystatechange=null;document.documentElement.removeChild(script);script=null;callback();};document.documentElement.appendChild(script);};}else{scheduler=function(callback){setTimeout(callback,0);};}\nfunction processTasks(){if(taskQueueLength){var mark=taskQueueLength,countMarks=0;for(var task;nextIndexToProcess<taskQueueLength;){if(task=taskQueue[nextIndexToProcess++]){if(nextIndexToProcess>mark){if(++countMarks>=5000){nextIndexToProcess=taskQueueLength;ko.utils.deferError(Error(\"'Too much recursion' after processing \"+countMarks+\" task groups.\"));break;}\nmark=taskQueueLength;}\ntry{task();}catch(ex){ko.utils.deferError(ex);}}}}}\nfunction scheduledProcess(){processTasks();nextIndexToProcess=taskQueueLength=taskQueue.length=0;}\nfunction scheduleTaskProcessing(){ko.tasks['scheduler'](scheduledProcess);}\nvar tasks={'scheduler':scheduler,schedule:function(func){if(!taskQueueLength){scheduleTaskProcessing();}\ntaskQueue[taskQueueLength++]=func;return nextHandle++;},cancel:function(handle){var index=handle-(nextHandle-taskQueueLength);if(index>=nextIndexToProcess&&index<taskQueueLength){taskQueue[index]=null;}},'resetForTesting':function(){var length=taskQueueLength-nextIndexToProcess;nextIndexToProcess=taskQueueLength=taskQueue.length=0;return length;},runEarly:processTasks};return tasks;})();ko.exportSymbol('tasks',ko.tasks);ko.exportSymbol('tasks.schedule',ko.tasks.schedule);ko.exportSymbol('tasks.runEarly',ko.tasks.runEarly);ko.extenders={'throttle':function(target,timeout){target['throttleEvaluation']=timeout;var writeTimeoutInstance=null;return ko.dependentObservable({'read':target,'write':function(value){clearTimeout(writeTimeoutInstance);writeTimeoutInstance=ko.utils.setTimeout(function(){target(value);},timeout);}});},'rateLimit':function(target,options){var timeout,method,limitFunction;if(typeof options=='number'){timeout=options;}else{timeout=options['timeout'];method=options['method'];}\ntarget._deferUpdates=false;limitFunction=typeof method=='function'?method:method=='notifyWhenChangesStop'?debounce:throttle;target.limit(function(callback){return limitFunction(callback,timeout,options);});},'deferred':function(target,options){if(options!==true){throw new Error('The \\'deferred\\' extender only accepts the value \\'true\\', because it is not supported to turn deferral off once enabled.')}\nif(!target._deferUpdates){target._deferUpdates=true;target.limit(function(callback){var handle,ignoreUpdates=false;return function(){if(!ignoreUpdates){ko.tasks.cancel(handle);handle=ko.tasks.schedule(callback);try{ignoreUpdates=true;target['notifySubscribers'](undefined,'dirty');}finally{ignoreUpdates=false;}}};});}},'notify':function(target,notifyWhen){target[\"equalityComparer\"]=notifyWhen==\"always\"?null:valuesArePrimitiveAndEqual;}};var primitiveTypes={'undefined':1,'boolean':1,'number':1,'string':1};function valuesArePrimitiveAndEqual(a,b){var oldValueIsPrimitive=(a===null)||(typeof(a)in primitiveTypes);return oldValueIsPrimitive?(a===b):false;}\nfunction throttle(callback,timeout){var timeoutInstance;return function(){if(!timeoutInstance){timeoutInstance=ko.utils.setTimeout(function(){timeoutInstance=undefined;callback();},timeout);}};}\nfunction debounce(callback,timeout){var timeoutInstance;return function(){clearTimeout(timeoutInstance);timeoutInstance=ko.utils.setTimeout(callback,timeout);};}\nfunction applyExtenders(requestedExtenders){var target=this;if(requestedExtenders){ko.utils.objectForEach(requestedExtenders,function(key,value){var extenderHandler=ko.extenders[key];if(typeof extenderHandler=='function'){target=extenderHandler(target,value)||target;}});}\nreturn target;}\nko.exportSymbol('extenders',ko.extenders);ko.subscription=function(target,callback,disposeCallback){this._target=target;this._callback=callback;this._disposeCallback=disposeCallback;this._isDisposed=false;this._node=null;this._domNodeDisposalCallback=null;ko.exportProperty(this,'dispose',this.dispose);ko.exportProperty(this,'disposeWhenNodeIsRemoved',this.disposeWhenNodeIsRemoved);};ko.subscription.prototype.dispose=function(){var self=this;if(!self._isDisposed){if(self._domNodeDisposalCallback){ko.utils.domNodeDisposal.removeDisposeCallback(self._node,self._domNodeDisposalCallback);}\nself._isDisposed=true;self._disposeCallback();self._target=self._callback=self._disposeCallback=self._node=self._domNodeDisposalCallback=null;}};ko.subscription.prototype.disposeWhenNodeIsRemoved=function(node){this._node=node;ko.utils.domNodeDisposal.addDisposeCallback(node,this._domNodeDisposalCallback=this.dispose.bind(this));};ko.subscribable=function(){ko.utils.setPrototypeOfOrExtend(this,ko_subscribable_fn);ko_subscribable_fn.init(this);}\nvar defaultEvent=\"change\";function limitNotifySubscribers(value,event){if(!event||event===defaultEvent){this._limitChange(value);}else if(event==='beforeChange'){this._limitBeforeChange(value);}else{this._origNotifySubscribers(value,event);}}\nvar ko_subscribable_fn={init:function(instance){instance._subscriptions={\"change\":[]};instance._versionNumber=1;},subscribe:function(callback,callbackTarget,event){var self=this;event=event||defaultEvent;var boundCallback=callbackTarget?callback.bind(callbackTarget):callback;var subscription=new ko.subscription(self,boundCallback,function(){ko.utils.arrayRemoveItem(self._subscriptions[event],subscription);if(self.afterSubscriptionRemove)\nself.afterSubscriptionRemove(event);});if(self.beforeSubscriptionAdd)\nself.beforeSubscriptionAdd(event);if(!self._subscriptions[event])\nself._subscriptions[event]=[];self._subscriptions[event].push(subscription);return subscription;},\"notifySubscribers\":function(valueToNotify,event){event=event||defaultEvent;if(event===defaultEvent){this.updateVersion();}\nif(this.hasSubscriptionsForEvent(event)){var subs=event===defaultEvent&&this._changeSubscriptions||this._subscriptions[event].slice(0);try{ko.dependencyDetection.begin();for(var i=0,subscription;subscription=subs[i];++i){if(!subscription._isDisposed)\nsubscription._callback(valueToNotify);}}finally{ko.dependencyDetection.end();}}},getVersion:function(){return this._versionNumber;},hasChanged:function(versionToCheck){return this.getVersion()!==versionToCheck;},updateVersion:function(){++this._versionNumber;},limit:function(limitFunction){var self=this,selfIsObservable=ko.isObservable(self),ignoreBeforeChange,notifyNextChange,previousValue,pendingValue,didUpdate,beforeChange='beforeChange';if(!self._origNotifySubscribers){self._origNotifySubscribers=self[\"notifySubscribers\"];self[\"notifySubscribers\"]=limitNotifySubscribers;}\nvar finish=limitFunction(function(){self._notificationIsPending=false;if(selfIsObservable&&pendingValue===self){pendingValue=self._evalIfChanged?self._evalIfChanged():self();}\nvar shouldNotify=notifyNextChange||(didUpdate&&self.isDifferent(previousValue,pendingValue));didUpdate=notifyNextChange=ignoreBeforeChange=false;if(shouldNotify){self._origNotifySubscribers(previousValue=pendingValue);}});self._limitChange=function(value,isDirty){if(!isDirty||!self._notificationIsPending){didUpdate=!isDirty;}\nself._changeSubscriptions=self._subscriptions[defaultEvent].slice(0);self._notificationIsPending=ignoreBeforeChange=true;pendingValue=value;finish();};self._limitBeforeChange=function(value){if(!ignoreBeforeChange){previousValue=value;self._origNotifySubscribers(value,beforeChange);}};self._recordUpdate=function(){didUpdate=true;};self._notifyNextChangeIfValueIsDifferent=function(){if(self.isDifferent(previousValue,self.peek(true))){notifyNextChange=true;}};},hasSubscriptionsForEvent:function(event){return this._subscriptions[event]&&this._subscriptions[event].length;},getSubscriptionsCount:function(event){if(event){return this._subscriptions[event]&&this._subscriptions[event].length||0;}else{var total=0;ko.utils.objectForEach(this._subscriptions,function(eventName,subscriptions){if(eventName!=='dirty')\ntotal+=subscriptions.length;});return total;}},isDifferent:function(oldValue,newValue){return!this['equalityComparer']||!this['equalityComparer'](oldValue,newValue);},toString:function(){return'[object Object]'},extend:applyExtenders};ko.exportProperty(ko_subscribable_fn,'init',ko_subscribable_fn.init);ko.exportProperty(ko_subscribable_fn,'subscribe',ko_subscribable_fn.subscribe);ko.exportProperty(ko_subscribable_fn,'extend',ko_subscribable_fn.extend);ko.exportProperty(ko_subscribable_fn,'getSubscriptionsCount',ko_subscribable_fn.getSubscriptionsCount);if(ko.utils.canSetPrototype){ko.utils.setPrototypeOf(ko_subscribable_fn,Function.prototype);}\nko.subscribable['fn']=ko_subscribable_fn;ko.isSubscribable=function(instance){return instance!=null&&typeof instance.subscribe==\"function\"&&typeof instance[\"notifySubscribers\"]==\"function\";};ko.exportSymbol('subscribable',ko.subscribable);ko.exportSymbol('isSubscribable',ko.isSubscribable);ko.computedContext=ko.dependencyDetection=(function(){var outerFrames=[],currentFrame,lastId=0;function getId(){return++lastId;}\nfunction begin(options){outerFrames.push(currentFrame);currentFrame=options;}\nfunction end(){currentFrame=outerFrames.pop();}\nreturn{begin:begin,end:end,registerDependency:function(subscribable){if(currentFrame){if(!ko.isSubscribable(subscribable))\nthrow new Error(\"Only subscribable things can act as dependencies\");currentFrame.callback.call(currentFrame.callbackTarget,subscribable,subscribable._id||(subscribable._id=getId()));}},ignore:function(callback,callbackTarget,callbackArgs){try{begin();return callback.apply(callbackTarget,callbackArgs||[]);}finally{end();}},getDependenciesCount:function(){if(currentFrame)\nreturn currentFrame.computed.getDependenciesCount();},getDependencies:function(){if(currentFrame)\nreturn currentFrame.computed.getDependencies();},isInitial:function(){if(currentFrame)\nreturn currentFrame.isInitial;},computed:function(){if(currentFrame)\nreturn currentFrame.computed;}};})();ko.exportSymbol('computedContext',ko.computedContext);ko.exportSymbol('computedContext.getDependenciesCount',ko.computedContext.getDependenciesCount);ko.exportSymbol('computedContext.getDependencies',ko.computedContext.getDependencies);ko.exportSymbol('computedContext.isInitial',ko.computedContext.isInitial);ko.exportSymbol('computedContext.registerDependency',ko.computedContext.registerDependency);ko.exportSymbol('ignoreDependencies',ko.ignoreDependencies=ko.dependencyDetection.ignore);var observableLatestValue=ko.utils.createSymbolOrString('_latestValue');ko.observable=function(initialValue){function observable(){if(arguments.length>0){if(observable.isDifferent(observable[observableLatestValue],arguments[0])){observable.valueWillMutate();observable[observableLatestValue]=arguments[0];observable.valueHasMutated();}\nreturn this;}\nelse{ko.dependencyDetection.registerDependency(observable);return observable[observableLatestValue];}}\nobservable[observableLatestValue]=initialValue;if(!ko.utils.canSetPrototype){ko.utils.extend(observable,ko.subscribable['fn']);}\nko.subscribable['fn'].init(observable);ko.utils.setPrototypeOfOrExtend(observable,observableFn);if(ko.options['deferUpdates']){ko.extenders['deferred'](observable,true);}\nreturn observable;}\nvar observableFn={'equalityComparer':valuesArePrimitiveAndEqual,peek:function(){return this[observableLatestValue];},valueHasMutated:function(){this['notifySubscribers'](this[observableLatestValue],'spectate');this['notifySubscribers'](this[observableLatestValue]);},valueWillMutate:function(){this['notifySubscribers'](this[observableLatestValue],'beforeChange');}};if(ko.utils.canSetPrototype){ko.utils.setPrototypeOf(observableFn,ko.subscribable['fn']);}\nvar protoProperty=ko.observable.protoProperty='__ko_proto__';observableFn[protoProperty]=ko.observable;ko.isObservable=function(instance){var proto=typeof instance=='function'&&instance[protoProperty];if(proto&&proto!==observableFn[protoProperty]&&proto!==ko.computed['fn'][protoProperty]){throw Error(\"Invalid object that looks like an observable; possibly from another Knockout instance\");}\nreturn!!proto;};ko.isWriteableObservable=function(instance){return(typeof instance=='function'&&((instance[protoProperty]===observableFn[protoProperty])||(instance[protoProperty]===ko.computed['fn'][protoProperty]&&instance.hasWriteFunction)));};ko.exportSymbol('observable',ko.observable);ko.exportSymbol('isObservable',ko.isObservable);ko.exportSymbol('isWriteableObservable',ko.isWriteableObservable);ko.exportSymbol('isWritableObservable',ko.isWriteableObservable);ko.exportSymbol('observable.fn',observableFn);ko.exportProperty(observableFn,'peek',observableFn.peek);ko.exportProperty(observableFn,'valueHasMutated',observableFn.valueHasMutated);ko.exportProperty(observableFn,'valueWillMutate',observableFn.valueWillMutate);ko.observableArray=function(initialValues){initialValues=initialValues||[];if(typeof initialValues!='object'||!('length'in initialValues))\nthrow new Error(\"The argument passed when initializing an observable array must be an array, or null, or undefined.\");var result=ko.observable(initialValues);ko.utils.setPrototypeOfOrExtend(result,ko.observableArray['fn']);return result.extend({'trackArrayChanges':true});};ko.observableArray['fn']={'remove':function(valueOrPredicate){var underlyingArray=this.peek();var removedValues=[];var predicate=typeof valueOrPredicate==\"function\"&&!ko.isObservable(valueOrPredicate)?valueOrPredicate:function(value){return value===valueOrPredicate;};for(var i=0;i<underlyingArray.length;i++){var value=underlyingArray[i];if(predicate(value)){if(removedValues.length===0){this.valueWillMutate();}\nif(underlyingArray[i]!==value){throw Error(\"Array modified during remove; cannot remove item\");}\nremovedValues.push(value);underlyingArray.splice(i,1);i--;}}\nif(removedValues.length){this.valueHasMutated();}\nreturn removedValues;},'removeAll':function(arrayOfValues){if(arrayOfValues===undefined){var underlyingArray=this.peek();var allValues=underlyingArray.slice(0);this.valueWillMutate();underlyingArray.splice(0,underlyingArray.length);this.valueHasMutated();return allValues;}\nif(!arrayOfValues)\nreturn[];return this['remove'](function(value){return ko.utils.arrayIndexOf(arrayOfValues,value)>=0;});},'destroy':function(valueOrPredicate){var underlyingArray=this.peek();var predicate=typeof valueOrPredicate==\"function\"&&!ko.isObservable(valueOrPredicate)?valueOrPredicate:function(value){return value===valueOrPredicate;};this.valueWillMutate();for(var i=underlyingArray.length-1;i>=0;i--){var value=underlyingArray[i];if(predicate(value))\nvalue[\"_destroy\"]=true;}\nthis.valueHasMutated();},'destroyAll':function(arrayOfValues){if(arrayOfValues===undefined)\nreturn this['destroy'](function(){return true});if(!arrayOfValues)\nreturn[];return this['destroy'](function(value){return ko.utils.arrayIndexOf(arrayOfValues,value)>=0;});},'indexOf':function(item){var underlyingArray=this();return ko.utils.arrayIndexOf(underlyingArray,item);},'replace':function(oldItem,newItem){var index=this['indexOf'](oldItem);if(index>=0){this.valueWillMutate();this.peek()[index]=newItem;this.valueHasMutated();}},'sorted':function(compareFunction){var arrayCopy=this().slice(0);return compareFunction?arrayCopy.sort(compareFunction):arrayCopy.sort();},'reversed':function(){return this().slice(0).reverse();}};if(ko.utils.canSetPrototype){ko.utils.setPrototypeOf(ko.observableArray['fn'],ko.observable['fn']);}\nko.utils.arrayForEach([\"pop\",\"push\",\"reverse\",\"shift\",\"sort\",\"splice\",\"unshift\"],function(methodName){ko.observableArray['fn'][methodName]=function(){var underlyingArray=this.peek();this.valueWillMutate();this.cacheDiffForKnownOperation(underlyingArray,methodName,arguments);var methodCallResult=underlyingArray[methodName].apply(underlyingArray,arguments);this.valueHasMutated();return methodCallResult===underlyingArray?this:methodCallResult;};});ko.utils.arrayForEach([\"slice\"],function(methodName){ko.observableArray['fn'][methodName]=function(){var underlyingArray=this();return underlyingArray[methodName].apply(underlyingArray,arguments);};});ko.isObservableArray=function(instance){return ko.isObservable(instance)&&typeof instance[\"remove\"]==\"function\"&&typeof instance[\"push\"]==\"function\";};ko.exportSymbol('observableArray',ko.observableArray);ko.exportSymbol('isObservableArray',ko.isObservableArray);var arrayChangeEventName='arrayChange';ko.extenders['trackArrayChanges']=function(target,options){target.compareArrayOptions={};if(options&&typeof options==\"object\"){ko.utils.extend(target.compareArrayOptions,options);}\ntarget.compareArrayOptions['sparse']=true;if(target.cacheDiffForKnownOperation){return;}\nvar trackingChanges=false,cachedDiff=null,changeSubscription,spectateSubscription,pendingChanges=0,previousContents,underlyingBeforeSubscriptionAddFunction=target.beforeSubscriptionAdd,underlyingAfterSubscriptionRemoveFunction=target.afterSubscriptionRemove;target.beforeSubscriptionAdd=function(event){if(underlyingBeforeSubscriptionAddFunction){underlyingBeforeSubscriptionAddFunction.call(target,event);}\nif(event===arrayChangeEventName){trackChanges();}};target.afterSubscriptionRemove=function(event){if(underlyingAfterSubscriptionRemoveFunction){underlyingAfterSubscriptionRemoveFunction.call(target,event);}\nif(event===arrayChangeEventName&&!target.hasSubscriptionsForEvent(arrayChangeEventName)){if(changeSubscription){changeSubscription.dispose();}\nif(spectateSubscription){spectateSubscription.dispose();}\nspectateSubscription=changeSubscription=null;trackingChanges=false;previousContents=undefined;}};function trackChanges(){if(trackingChanges){notifyChanges();return;}\ntrackingChanges=true;spectateSubscription=target.subscribe(function(){++pendingChanges;},null,\"spectate\");previousContents=[].concat(target.peek()||[]);cachedDiff=null;changeSubscription=target.subscribe(notifyChanges);function notifyChanges(){if(pendingChanges){var currentContents=[].concat(target.peek()||[]),changes;if(target.hasSubscriptionsForEvent(arrayChangeEventName)){changes=getChanges(previousContents,currentContents);}\npreviousContents=currentContents;cachedDiff=null;pendingChanges=0;if(changes&&changes.length){target['notifySubscribers'](changes,arrayChangeEventName);}}}}\nfunction getChanges(previousContents,currentContents){if(!cachedDiff||pendingChanges>1){cachedDiff=ko.utils.compareArrays(previousContents,currentContents,target.compareArrayOptions);}\nreturn cachedDiff;}\ntarget.cacheDiffForKnownOperation=function(rawArray,operationName,args){if(!trackingChanges||pendingChanges){return;}\nvar diff=[],arrayLength=rawArray.length,argsLength=args.length,offset=0;function pushDiff(status,value,index){return diff[diff.length]={'status':status,'value':value,'index':index};}\nswitch(operationName){case'push':offset=arrayLength;case'unshift':for(var index=0;index<argsLength;index++){pushDiff('added',args[index],offset+index);}\nbreak;case'pop':offset=arrayLength-1;case'shift':if(arrayLength){pushDiff('deleted',rawArray[offset],offset);}\nbreak;case'splice':var startIndex=Math.min(Math.max(0,args[0]<0?arrayLength+args[0]:args[0]),arrayLength),endDeleteIndex=argsLength===1?arrayLength:Math.min(startIndex+(args[1]||0),arrayLength),endAddIndex=startIndex+argsLength-2,endIndex=Math.max(endDeleteIndex,endAddIndex),additions=[],deletions=[];for(var index=startIndex,argsIndex=2;index<endIndex;++index,++argsIndex){if(index<endDeleteIndex)\ndeletions.push(pushDiff('deleted',rawArray[index],index));if(index<endAddIndex)\nadditions.push(pushDiff('added',args[argsIndex],index));}\nko.utils.findMovesInArrayComparison(deletions,additions);break;default:return;}\ncachedDiff=diff;};};var computedState=ko.utils.createSymbolOrString('_state');ko.computed=ko.dependentObservable=function(evaluatorFunctionOrOptions,evaluatorFunctionTarget,options){if(typeof evaluatorFunctionOrOptions===\"object\"){options=evaluatorFunctionOrOptions;}else{options=options||{};if(evaluatorFunctionOrOptions){options[\"read\"]=evaluatorFunctionOrOptions;}}\nif(typeof options[\"read\"]!=\"function\")\nthrow Error(\"Pass a function that returns the value of the ko.computed\");var writeFunction=options[\"write\"];var state={latestValue:undefined,isStale:true,isDirty:true,isBeingEvaluated:false,suppressDisposalUntilDisposeWhenReturnsFalse:false,isDisposed:false,pure:false,isSleeping:false,readFunction:options[\"read\"],evaluatorFunctionTarget:evaluatorFunctionTarget||options[\"owner\"],disposeWhenNodeIsRemoved:options[\"disposeWhenNodeIsRemoved\"]||options.disposeWhenNodeIsRemoved||null,disposeWhen:options[\"disposeWhen\"]||options.disposeWhen,domNodeDisposalCallback:null,dependencyTracking:{},dependenciesCount:0,evaluationTimeoutInstance:null};function computedObservable(){if(arguments.length>0){if(typeof writeFunction===\"function\"){writeFunction.apply(state.evaluatorFunctionTarget,arguments);}else{throw new Error(\"Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.\");}\nreturn this;}else{if(!state.isDisposed){ko.dependencyDetection.registerDependency(computedObservable);}\nif(state.isDirty||(state.isSleeping&&computedObservable.haveDependenciesChanged())){computedObservable.evaluateImmediate();}\nreturn state.latestValue;}}\ncomputedObservable[computedState]=state;computedObservable.hasWriteFunction=typeof writeFunction===\"function\";if(!ko.utils.canSetPrototype){ko.utils.extend(computedObservable,ko.subscribable['fn']);}\nko.subscribable['fn'].init(computedObservable);ko.utils.setPrototypeOfOrExtend(computedObservable,computedFn);if(options['pure']){state.pure=true;state.isSleeping=true;ko.utils.extend(computedObservable,pureComputedOverrides);}else if(options['deferEvaluation']){ko.utils.extend(computedObservable,deferEvaluationOverrides);}\nif(ko.options['deferUpdates']){ko.extenders['deferred'](computedObservable,true);}\nif(DEBUG){computedObservable[\"_options\"]=options;}\nif(state.disposeWhenNodeIsRemoved){state.suppressDisposalUntilDisposeWhenReturnsFalse=true;if(!state.disposeWhenNodeIsRemoved.nodeType){state.disposeWhenNodeIsRemoved=null;}}\nif(!state.isSleeping&&!options['deferEvaluation']){computedObservable.evaluateImmediate();}\nif(state.disposeWhenNodeIsRemoved&&computedObservable.isActive()){ko.utils.domNodeDisposal.addDisposeCallback(state.disposeWhenNodeIsRemoved,state.domNodeDisposalCallback=function(){computedObservable.dispose();});}\nreturn computedObservable;};function computedDisposeDependencyCallback(id,entryToDispose){if(entryToDispose!==null&&entryToDispose.dispose){entryToDispose.dispose();}}\nfunction computedBeginDependencyDetectionCallback(subscribable,id){var computedObservable=this.computedObservable,state=computedObservable[computedState];if(!state.isDisposed){if(this.disposalCount&&this.disposalCandidates[id]){computedObservable.addDependencyTracking(id,subscribable,this.disposalCandidates[id]);this.disposalCandidates[id]=null;--this.disposalCount;}else if(!state.dependencyTracking[id]){computedObservable.addDependencyTracking(id,subscribable,state.isSleeping?{_target:subscribable}:computedObservable.subscribeToDependency(subscribable));}\nif(subscribable._notificationIsPending){subscribable._notifyNextChangeIfValueIsDifferent();}}}\nvar computedFn={\"equalityComparer\":valuesArePrimitiveAndEqual,getDependenciesCount:function(){return this[computedState].dependenciesCount;},getDependencies:function(){var dependencyTracking=this[computedState].dependencyTracking,dependentObservables=[];ko.utils.objectForEach(dependencyTracking,function(id,dependency){dependentObservables[dependency._order]=dependency._target;});return dependentObservables;},hasAncestorDependency:function(obs){if(!this[computedState].dependenciesCount){return false;}\nvar dependencies=this.getDependencies();if(ko.utils.arrayIndexOf(dependencies,obs)!==-1){return true;}\nreturn!!ko.utils.arrayFirst(dependencies,function(dep){return dep.hasAncestorDependency&&dep.hasAncestorDependency(obs);});},addDependencyTracking:function(id,target,trackingObj){if(this[computedState].pure&&target===this){throw Error(\"A 'pure' computed must not be called recursively\");}\nthis[computedState].dependencyTracking[id]=trackingObj;trackingObj._order=this[computedState].dependenciesCount++;trackingObj._version=target.getVersion();},haveDependenciesChanged:function(){var id,dependency,dependencyTracking=this[computedState].dependencyTracking;for(id in dependencyTracking){if(Object.prototype.hasOwnProperty.call(dependencyTracking,id)){dependency=dependencyTracking[id];if((this._evalDelayed&&dependency._target._notificationIsPending)||dependency._target.hasChanged(dependency._version)){return true;}}}},markDirty:function(){if(this._evalDelayed&&!this[computedState].isBeingEvaluated){this._evalDelayed(false);}},isActive:function(){var state=this[computedState];return state.isDirty||state.dependenciesCount>0;},respondToChange:function(){if(!this._notificationIsPending){this.evaluatePossiblyAsync();}else if(this[computedState].isDirty){this[computedState].isStale=true;}},subscribeToDependency:function(target){if(target._deferUpdates){var dirtySub=target.subscribe(this.markDirty,this,'dirty'),changeSub=target.subscribe(this.respondToChange,this);return{_target:target,dispose:function(){dirtySub.dispose();changeSub.dispose();}};}else{return target.subscribe(this.evaluatePossiblyAsync,this);}},evaluatePossiblyAsync:function(){var computedObservable=this,throttleEvaluationTimeout=computedObservable['throttleEvaluation'];if(throttleEvaluationTimeout&&throttleEvaluationTimeout>=0){clearTimeout(this[computedState].evaluationTimeoutInstance);this[computedState].evaluationTimeoutInstance=ko.utils.setTimeout(function(){computedObservable.evaluateImmediate(true);},throttleEvaluationTimeout);}else if(computedObservable._evalDelayed){computedObservable._evalDelayed(true);}else{computedObservable.evaluateImmediate(true);}},evaluateImmediate:function(notifyChange){var computedObservable=this,state=computedObservable[computedState],disposeWhen=state.disposeWhen,changed=false;if(state.isBeingEvaluated){return;}\nif(state.isDisposed){return;}\nif(state.disposeWhenNodeIsRemoved&&!ko.utils.domNodeIsAttachedToDocument(state.disposeWhenNodeIsRemoved)||disposeWhen&&disposeWhen()){if(!state.suppressDisposalUntilDisposeWhenReturnsFalse){computedObservable.dispose();return;}}else{state.suppressDisposalUntilDisposeWhenReturnsFalse=false;}\nstate.isBeingEvaluated=true;try{changed=this.evaluateImmediate_CallReadWithDependencyDetection(notifyChange);}finally{state.isBeingEvaluated=false;}\nreturn changed;},evaluateImmediate_CallReadWithDependencyDetection:function(notifyChange){var computedObservable=this,state=computedObservable[computedState],changed=false;var isInitial=state.pure?undefined:!state.dependenciesCount,dependencyDetectionContext={computedObservable:computedObservable,disposalCandidates:state.dependencyTracking,disposalCount:state.dependenciesCount};ko.dependencyDetection.begin({callbackTarget:dependencyDetectionContext,callback:computedBeginDependencyDetectionCallback,computed:computedObservable,isInitial:isInitial});state.dependencyTracking={};state.dependenciesCount=0;var newValue=this.evaluateImmediate_CallReadThenEndDependencyDetection(state,dependencyDetectionContext);if(!state.dependenciesCount){computedObservable.dispose();changed=true;}else{changed=computedObservable.isDifferent(state.latestValue,newValue);}\nif(changed){if(!state.isSleeping){computedObservable[\"notifySubscribers\"](state.latestValue,\"beforeChange\");}else{computedObservable.updateVersion();}\nstate.latestValue=newValue;if(DEBUG)computedObservable._latestValue=newValue;computedObservable[\"notifySubscribers\"](state.latestValue,\"spectate\");if(!state.isSleeping&&notifyChange){computedObservable[\"notifySubscribers\"](state.latestValue);}\nif(computedObservable._recordUpdate){computedObservable._recordUpdate();}}\nif(isInitial){computedObservable[\"notifySubscribers\"](state.latestValue,\"awake\");}\nreturn changed;},evaluateImmediate_CallReadThenEndDependencyDetection:function(state,dependencyDetectionContext){try{var readFunction=state.readFunction;return state.evaluatorFunctionTarget?readFunction.call(state.evaluatorFunctionTarget):readFunction();}finally{ko.dependencyDetection.end();if(dependencyDetectionContext.disposalCount&&!state.isSleeping){ko.utils.objectForEach(dependencyDetectionContext.disposalCandidates,computedDisposeDependencyCallback);}\nstate.isStale=state.isDirty=false;}},peek:function(evaluate){var state=this[computedState];if((state.isDirty&&(evaluate||!state.dependenciesCount))||(state.isSleeping&&this.haveDependenciesChanged())){this.evaluateImmediate();}\nreturn state.latestValue;},limit:function(limitFunction){ko.subscribable['fn'].limit.call(this,limitFunction);this._evalIfChanged=function(){if(!this[computedState].isSleeping){if(this[computedState].isStale){this.evaluateImmediate();}else{this[computedState].isDirty=false;}}\nreturn this[computedState].latestValue;};this._evalDelayed=function(isChange){this._limitBeforeChange(this[computedState].latestValue);this[computedState].isDirty=true;if(isChange){this[computedState].isStale=true;}\nthis._limitChange(this,!isChange);};},dispose:function(){var state=this[computedState];if(!state.isSleeping&&state.dependencyTracking){ko.utils.objectForEach(state.dependencyTracking,function(id,dependency){if(dependency.dispose)\ndependency.dispose();});}\nif(state.disposeWhenNodeIsRemoved&&state.domNodeDisposalCallback){ko.utils.domNodeDisposal.removeDisposeCallback(state.disposeWhenNodeIsRemoved,state.domNodeDisposalCallback);}\nstate.dependencyTracking=undefined;state.dependenciesCount=0;state.isDisposed=true;state.isStale=false;state.isDirty=false;state.isSleeping=false;state.disposeWhenNodeIsRemoved=undefined;state.disposeWhen=undefined;state.readFunction=undefined;if(!this.hasWriteFunction){state.evaluatorFunctionTarget=undefined;}}};var pureComputedOverrides={beforeSubscriptionAdd:function(event){var computedObservable=this,state=computedObservable[computedState];if(!state.isDisposed&&state.isSleeping&&event=='change'){state.isSleeping=false;if(state.isStale||computedObservable.haveDependenciesChanged()){state.dependencyTracking=null;state.dependenciesCount=0;if(computedObservable.evaluateImmediate()){computedObservable.updateVersion();}}else{var dependenciesOrder=[];ko.utils.objectForEach(state.dependencyTracking,function(id,dependency){dependenciesOrder[dependency._order]=id;});ko.utils.arrayForEach(dependenciesOrder,function(id,order){var dependency=state.dependencyTracking[id],subscription=computedObservable.subscribeToDependency(dependency._target);subscription._order=order;subscription._version=dependency._version;state.dependencyTracking[id]=subscription;});if(computedObservable.haveDependenciesChanged()){if(computedObservable.evaluateImmediate()){computedObservable.updateVersion();}}}\nif(!state.isDisposed){computedObservable[\"notifySubscribers\"](state.latestValue,\"awake\");}}},afterSubscriptionRemove:function(event){var state=this[computedState];if(!state.isDisposed&&event=='change'&&!this.hasSubscriptionsForEvent('change')){ko.utils.objectForEach(state.dependencyTracking,function(id,dependency){if(dependency.dispose){state.dependencyTracking[id]={_target:dependency._target,_order:dependency._order,_version:dependency._version};dependency.dispose();}});state.isSleeping=true;this[\"notifySubscribers\"](undefined,\"asleep\");}},getVersion:function(){var state=this[computedState];if(state.isSleeping&&(state.isStale||this.haveDependenciesChanged())){this.evaluateImmediate();}\nreturn ko.subscribable['fn'].getVersion.call(this);}};var deferEvaluationOverrides={beforeSubscriptionAdd:function(event){if(event=='change'||event=='beforeChange'){this.peek();}}};if(ko.utils.canSetPrototype){ko.utils.setPrototypeOf(computedFn,ko.subscribable['fn']);}\nvar protoProp=ko.observable.protoProperty;computedFn[protoProp]=ko.computed;ko.isComputed=function(instance){return(typeof instance=='function'&&instance[protoProp]===computedFn[protoProp]);};ko.isPureComputed=function(instance){return ko.isComputed(instance)&&instance[computedState]&&instance[computedState].pure;};ko.exportSymbol('computed',ko.computed);ko.exportSymbol('dependentObservable',ko.computed);ko.exportSymbol('isComputed',ko.isComputed);ko.exportSymbol('isPureComputed',ko.isPureComputed);ko.exportSymbol('computed.fn',computedFn);ko.exportProperty(computedFn,'peek',computedFn.peek);ko.exportProperty(computedFn,'dispose',computedFn.dispose);ko.exportProperty(computedFn,'isActive',computedFn.isActive);ko.exportProperty(computedFn,'getDependenciesCount',computedFn.getDependenciesCount);ko.exportProperty(computedFn,'getDependencies',computedFn.getDependencies);ko.pureComputed=function(evaluatorFunctionOrOptions,evaluatorFunctionTarget){if(typeof evaluatorFunctionOrOptions==='function'){return ko.computed(evaluatorFunctionOrOptions,evaluatorFunctionTarget,{'pure':true});}else{evaluatorFunctionOrOptions=ko.utils.extend({},evaluatorFunctionOrOptions);evaluatorFunctionOrOptions['pure']=true;return ko.computed(evaluatorFunctionOrOptions,evaluatorFunctionTarget);}}\nko.exportSymbol('pureComputed',ko.pureComputed);(function(){var maxNestedObservableDepth=10;ko.toJS=function(rootObject){if(arguments.length==0)\nthrow new Error(\"When calling ko.toJS, pass the object you want to convert.\");return mapJsObjectGraph(rootObject,function(valueToMap){for(var i=0;ko.isObservable(valueToMap)&&(i<maxNestedObservableDepth);i++)\nvalueToMap=valueToMap();return valueToMap;});};ko.toJSON=function(rootObject,replacer,space){var plainJavaScriptObject=ko.toJS(rootObject);return ko.utils.stringifyJson(plainJavaScriptObject,replacer,space);};function mapJsObjectGraph(rootObject,mapInputCallback,visitedObjects){visitedObjects=visitedObjects||new objectLookup();rootObject=mapInputCallback(rootObject);var canHaveProperties=(typeof rootObject==\"object\")&&(rootObject!==null)&&(rootObject!==undefined)&&(!(rootObject instanceof RegExp))&&(!(rootObject instanceof Date))&&(!(rootObject instanceof String))&&(!(rootObject instanceof Number))&&(!(rootObject instanceof Boolean));if(!canHaveProperties)\nreturn rootObject;var outputProperties=rootObject instanceof Array?[]:{};visitedObjects.save(rootObject,outputProperties);visitPropertiesOrArrayEntries(rootObject,function(indexer){var propertyValue=mapInputCallback(rootObject[indexer]);switch(typeof propertyValue){case\"boolean\":case\"number\":case\"string\":case\"function\":outputProperties[indexer]=propertyValue;break;case\"object\":case\"undefined\":var previouslyMappedValue=visitedObjects.get(propertyValue);outputProperties[indexer]=(previouslyMappedValue!==undefined)?previouslyMappedValue:mapJsObjectGraph(propertyValue,mapInputCallback,visitedObjects);break;}});return outputProperties;}\nfunction visitPropertiesOrArrayEntries(rootObject,visitorCallback){if(rootObject instanceof Array){for(var i=0;i<rootObject.length;i++)\nvisitorCallback(i);if(typeof rootObject['toJSON']=='function')\nvisitorCallback('toJSON');}else{for(var propertyName in rootObject){visitorCallback(propertyName);}}};function objectLookup(){this.keys=[];this.values=[];};objectLookup.prototype={constructor:objectLookup,save:function(key,value){var existingIndex=ko.utils.arrayIndexOf(this.keys,key);if(existingIndex>=0)\nthis.values[existingIndex]=value;else{this.keys.push(key);this.values.push(value);}},get:function(key){var existingIndex=ko.utils.arrayIndexOf(this.keys,key);return(existingIndex>=0)?this.values[existingIndex]:undefined;}};})();ko.exportSymbol('toJS',ko.toJS);ko.exportSymbol('toJSON',ko.toJSON);ko.when=function(predicate,callback,context){function kowhen(resolve){var observable=ko.pureComputed(predicate,context).extend({notify:'always'});var subscription=observable.subscribe(function(value){if(value){subscription.dispose();resolve(value);}});observable['notifySubscribers'](observable.peek());return subscription;}\nif(typeof Promise===\"function\"&&!callback){return new Promise(kowhen);}else{return kowhen(callback.bind(context));}};ko.exportSymbol('when',ko.when);(function(){var hasDomDataExpandoProperty='__ko__hasDomDataOptionValue__';ko.selectExtensions={readValue:function(element){switch(ko.utils.tagNameLower(element)){case'option':if(element[hasDomDataExpandoProperty]===true)\nreturn ko.utils.domData.get(element,ko.bindingHandlers.options.optionValueDomDataKey);return ko.utils.ieVersion<=7?(element.getAttributeNode('value')&&element.getAttributeNode('value').specified?element.value:element.text):element.value;case'select':return element.selectedIndex>=0?ko.selectExtensions.readValue(element.options[element.selectedIndex]):undefined;default:return element.value;}},writeValue:function(element,value,allowUnset){switch(ko.utils.tagNameLower(element)){case'option':if(typeof value===\"string\"){ko.utils.domData.set(element,ko.bindingHandlers.options.optionValueDomDataKey,undefined);if(hasDomDataExpandoProperty in element){delete element[hasDomDataExpandoProperty];}\nelement.value=value;}\nelse{ko.utils.domData.set(element,ko.bindingHandlers.options.optionValueDomDataKey,value);element[hasDomDataExpandoProperty]=true;element.value=typeof value===\"number\"?value:\"\";}\nbreak;case'select':if(value===\"\"||value===null)\nvalue=undefined;var selection=-1;for(var i=0,n=element.options.length,optionValue;i<n;++i){optionValue=ko.selectExtensions.readValue(element.options[i]);if(optionValue==value||(optionValue===\"\"&&value===undefined)){selection=i;break;}}\nif(allowUnset||selection>=0||(value===undefined&&element.size>1)){element.selectedIndex=selection;if(ko.utils.ieVersion===6){ko.utils.setTimeout(function(){element.selectedIndex=selection;},0);}}\nbreak;default:if((value===null)||(value===undefined))\nvalue=\"\";element.value=value;break;}}};})();ko.exportSymbol('selectExtensions',ko.selectExtensions);ko.exportSymbol('selectExtensions.readValue',ko.selectExtensions.readValue);ko.exportSymbol('selectExtensions.writeValue',ko.selectExtensions.writeValue);ko.expressionRewriting=(function(){var javaScriptReservedWords=[\"true\",\"false\",\"null\",\"undefined\"];var javaScriptAssignmentTarget=/^(?:[$_a-z][$\\w]*|(.+)(\\.\\s*[$_a-z][$\\w]*|\\[.+\\]))$/i;function getWriteableValue(expression){if(ko.utils.arrayIndexOf(javaScriptReservedWords,expression)>=0)\nreturn false;var match=expression.match(javaScriptAssignmentTarget);return match===null?false:match[1]?('Object('+match[1]+')'+match[2]):expression;}\nvar specials=',\"\\'`{}()/:[\\\\]',bindingToken=RegExp(['\"(?:\\\\\\\\.|[^\"])*\"',\"'(?:\\\\\\\\.|[^'])*'\",\"`(?:\\\\\\\\.|[^`])*`\",\"/\\\\*(?:[^*]|\\\\*+[^*/])*\\\\*+/\",\"//.*\\n\",'/(?:\\\\\\\\.|[^/])+/\\w*','[^\\\\s:,/][^'+specials+']*[^\\\\s'+specials+']','[^\\\\s]'].join('|'),'g'),divisionLookBehind=/[\\])\"'A-Za-z0-9_$]+$/,keywordRegexLookBehind={'in':1,'return':1,'typeof':1};function parseObjectLiteral(objectLiteralString){var str=ko.utils.stringTrim(objectLiteralString);if(str.charCodeAt(0)===123)str=str.slice(1,-1);str+=\"\\n,\";var result=[],toks=str.match(bindingToken),key,values=[],depth=0;if(toks.length>1){for(var i=0,tok;tok=toks[i];++i){var c=tok.charCodeAt(0);if(c===44){if(depth<=0){result.push((key&&values.length)?{key:key,value:values.join('')}:{'unknown':key||values.join('')});key=depth=0;values=[];continue;}}else if(c===58){if(!depth&&!key&&values.length===1){key=values.pop();continue;}}else if(c===47&&tok.length>1&&(tok.charCodeAt(1)===47||tok.charCodeAt(1)===42)){continue;}else if(c===47&&i&&tok.length>1){var match=toks[i-1].match(divisionLookBehind);if(match&&!keywordRegexLookBehind[match[0]]){str=str.substr(str.indexOf(tok)+1);toks=str.match(bindingToken);i=-1;tok='/';}}else if(c===40||c===123||c===91){++depth;}else if(c===41||c===125||c===93){--depth;}else if(!key&&!values.length&&(c===34||c===39)){tok=tok.slice(1,-1);}\nvalues.push(tok);}\nif(depth>0){throw Error(\"Unbalanced parentheses, braces, or brackets\");}}\nreturn result;}\nvar twoWayBindings={};function preProcessBindings(bindingsStringOrKeyValueArray,bindingOptions){bindingOptions=bindingOptions||{};function processKeyValue(key,val){var writableVal;function callPreprocessHook(obj){return(obj&&obj['preprocess'])?(val=obj['preprocess'](val,key,processKeyValue)):true;}\nif(!bindingParams){if(!callPreprocessHook(ko['getBindingHandler'](key)))\nreturn;if(twoWayBindings[key]&&(writableVal=getWriteableValue(val))){var writeKey=typeof twoWayBindings[key]=='string'?twoWayBindings[key]:key;propertyAccessorResultStrings.push(\"'\"+writeKey+\"':function(_z){\"+writableVal+\"=_z}\");}}\nif(makeValueAccessors){val='function(){return '+val+' }';}\nresultStrings.push(\"'\"+key+\"':\"+val);}\nvar resultStrings=[],propertyAccessorResultStrings=[],makeValueAccessors=bindingOptions['valueAccessors'],bindingParams=bindingOptions['bindingParams'],keyValueArray=typeof bindingsStringOrKeyValueArray===\"string\"?parseObjectLiteral(bindingsStringOrKeyValueArray):bindingsStringOrKeyValueArray;ko.utils.arrayForEach(keyValueArray,function(keyValue){processKeyValue(keyValue.key||keyValue['unknown'],keyValue.value);});if(propertyAccessorResultStrings.length)\nprocessKeyValue('_ko_property_writers',\"{\"+propertyAccessorResultStrings.join(\",\")+\" }\");return resultStrings.join(\",\");}\nreturn{bindingRewriteValidators:[],twoWayBindings:twoWayBindings,parseObjectLiteral:parseObjectLiteral,preProcessBindings:preProcessBindings,keyValueArrayContainsKey:function(keyValueArray,key){for(var i=0;i<keyValueArray.length;i++)\nif(keyValueArray[i]['key']==key)\nreturn true;return false;},writeValueToProperty:function(property,allBindings,key,value,checkIfDifferent){if(!property||!ko.isObservable(property)){var propWriters=allBindings.get('_ko_property_writers');if(propWriters&&propWriters[key])\npropWriters[key](value);}else if(ko.isWriteableObservable(property)&&(!checkIfDifferent||property.peek()!==value)){property(value);}}};})();ko.exportSymbol('expressionRewriting',ko.expressionRewriting);ko.exportSymbol('expressionRewriting.bindingRewriteValidators',ko.expressionRewriting.bindingRewriteValidators);ko.exportSymbol('expressionRewriting.parseObjectLiteral',ko.expressionRewriting.parseObjectLiteral);ko.exportSymbol('expressionRewriting.preProcessBindings',ko.expressionRewriting.preProcessBindings);ko.exportSymbol('expressionRewriting._twoWayBindings',ko.expressionRewriting.twoWayBindings);ko.exportSymbol('jsonExpressionRewriting',ko.expressionRewriting);ko.exportSymbol('jsonExpressionRewriting.insertPropertyAccessorsIntoJson',ko.expressionRewriting.preProcessBindings);(function(){var commentNodesHaveTextProperty=document&&document.createComment(\"test\").text===\"<!--test-->\";var startCommentRegex=commentNodesHaveTextProperty?/^<!--\\s*ko(?:\\s+([\\s\\S]+))?\\s*-->$/:/^\\s*ko(?:\\s+([\\s\\S]+))?\\s*$/;var endCommentRegex=commentNodesHaveTextProperty?/^<!--\\s*\\/ko\\s*-->$/:/^\\s*\\/ko\\s*$/;var htmlTagsWithOptionallyClosingChildren={'ul':true,'ol':true};function isStartComment(node){return(node.nodeType==8)&&startCommentRegex.test(commentNodesHaveTextProperty?node.text:node.nodeValue);}\nfunction isEndComment(node){return(node.nodeType==8)&&endCommentRegex.test(commentNodesHaveTextProperty?node.text:node.nodeValue);}\nfunction isUnmatchedEndComment(node){return isEndComment(node)&&!(ko.utils.domData.get(node,matchedEndCommentDataKey));}\nvar matchedEndCommentDataKey=\"__ko_matchedEndComment__\"\nfunction getVirtualChildren(startComment,allowUnbalanced){var currentNode=startComment;var depth=1;var children=[];while(currentNode=currentNode.nextSibling){if(isEndComment(currentNode)){ko.utils.domData.set(currentNode,matchedEndCommentDataKey,true);depth--;if(depth===0)\nreturn children;}\nchildren.push(currentNode);if(isStartComment(currentNode))\ndepth++;}\nif(!allowUnbalanced)\nthrow new Error(\"Cannot find closing comment tag to match: \"+startComment.nodeValue);return null;}\nfunction getMatchingEndComment(startComment,allowUnbalanced){var allVirtualChildren=getVirtualChildren(startComment,allowUnbalanced);if(allVirtualChildren){if(allVirtualChildren.length>0)\nreturn allVirtualChildren[allVirtualChildren.length-1].nextSibling;return startComment.nextSibling;}else\nreturn null;}\nfunction getUnbalancedChildTags(node){var childNode=node.firstChild,captureRemaining=null;if(childNode){do{if(captureRemaining)\ncaptureRemaining.push(childNode);else if(isStartComment(childNode)){var matchingEndComment=getMatchingEndComment(childNode,true);if(matchingEndComment)\nchildNode=matchingEndComment;else\ncaptureRemaining=[childNode];}else if(isEndComment(childNode)){captureRemaining=[childNode];}}while(childNode=childNode.nextSibling);}\nreturn captureRemaining;}\nko.virtualElements={allowedBindings:{},childNodes:function(node){return isStartComment(node)?getVirtualChildren(node):node.childNodes;},emptyNode:function(node){if(!isStartComment(node))\nko.utils.emptyDomNode(node);else{var virtualChildren=ko.virtualElements.childNodes(node);for(var i=0,j=virtualChildren.length;i<j;i++)\nko.removeNode(virtualChildren[i]);}},setDomNodeChildren:function(node,childNodes){if(!isStartComment(node))\nko.utils.setDomNodeChildren(node,childNodes);else{ko.virtualElements.emptyNode(node);var endCommentNode=node.nextSibling;for(var i=0,j=childNodes.length;i<j;i++)\nendCommentNode.parentNode.insertBefore(childNodes[i],endCommentNode);}},prepend:function(containerNode,nodeToPrepend){var insertBeforeNode;if(isStartComment(containerNode)){insertBeforeNode=containerNode.nextSibling;containerNode=containerNode.parentNode;}else{insertBeforeNode=containerNode.firstChild;}\nif(!insertBeforeNode){containerNode.appendChild(nodeToPrepend);}else if(nodeToPrepend!==insertBeforeNode){containerNode.insertBefore(nodeToPrepend,insertBeforeNode);}},insertAfter:function(containerNode,nodeToInsert,insertAfterNode){if(!insertAfterNode){ko.virtualElements.prepend(containerNode,nodeToInsert);}else{var insertBeforeNode=insertAfterNode.nextSibling;if(isStartComment(containerNode)){containerNode=containerNode.parentNode;}\nif(!insertBeforeNode){containerNode.appendChild(nodeToInsert);}else if(nodeToInsert!==insertBeforeNode){containerNode.insertBefore(nodeToInsert,insertBeforeNode);}}},firstChild:function(node){if(!isStartComment(node)){if(node.firstChild&&isEndComment(node.firstChild)){throw new Error(\"Found invalid end comment, as the first child of \"+node);}\nreturn node.firstChild;}else if(!node.nextSibling||isEndComment(node.nextSibling)){return null;}else{return node.nextSibling;}},nextSibling:function(node){if(isStartComment(node)){node=getMatchingEndComment(node);}\nif(node.nextSibling&&isEndComment(node.nextSibling)){if(isUnmatchedEndComment(node.nextSibling)){throw Error(\"Found end comment without a matching opening comment, as child of \"+node);}else{return null;}}else{return node.nextSibling;}},hasBindingValue:isStartComment,virtualNodeBindingValue:function(node){var regexMatch=(commentNodesHaveTextProperty?node.text:node.nodeValue).match(startCommentRegex);return regexMatch?regexMatch[1]:null;},normaliseVirtualElementDomStructure:function(elementVerified){if(!htmlTagsWithOptionallyClosingChildren[ko.utils.tagNameLower(elementVerified)])\nreturn;var childNode=elementVerified.firstChild;if(childNode){do{if(childNode.nodeType===1){var unbalancedTags=getUnbalancedChildTags(childNode);if(unbalancedTags){var nodeToInsertBefore=childNode.nextSibling;for(var i=0;i<unbalancedTags.length;i++){if(nodeToInsertBefore)\nelementVerified.insertBefore(unbalancedTags[i],nodeToInsertBefore);else\nelementVerified.appendChild(unbalancedTags[i]);}}}}while(childNode=childNode.nextSibling);}}};})();ko.exportSymbol('virtualElements',ko.virtualElements);ko.exportSymbol('virtualElements.allowedBindings',ko.virtualElements.allowedBindings);ko.exportSymbol('virtualElements.emptyNode',ko.virtualElements.emptyNode);ko.exportSymbol('virtualElements.insertAfter',ko.virtualElements.insertAfter);ko.exportSymbol('virtualElements.prepend',ko.virtualElements.prepend);ko.exportSymbol('virtualElements.setDomNodeChildren',ko.virtualElements.setDomNodeChildren);(function(){var defaultBindingAttributeName=\"data-bind\";ko.bindingProvider=function(){this.bindingCache={};};ko.utils.extend(ko.bindingProvider.prototype,{'nodeHasBindings':function(node){switch(node.nodeType){case 1:return node.getAttribute(defaultBindingAttributeName)!=null||ko.components['getComponentNameForNode'](node);case 8:return ko.virtualElements.hasBindingValue(node);default:return false;}},'getBindings':function(node,bindingContext){var bindingsString=this['getBindingsString'](node,bindingContext),parsedBindings=bindingsString?this['parseBindingsString'](bindingsString,bindingContext,node):null;return ko.components.addBindingsForCustomElement(parsedBindings,node,bindingContext,false);},'getBindingAccessors':function(node,bindingContext){var bindingsString=this['getBindingsString'](node,bindingContext),parsedBindings=bindingsString?this['parseBindingsString'](bindingsString,bindingContext,node,{'valueAccessors':true}):null;return ko.components.addBindingsForCustomElement(parsedBindings,node,bindingContext,true);},'getBindingsString':function(node,bindingContext){switch(node.nodeType){case 1:return node.getAttribute(defaultBindingAttributeName);case 8:return ko.virtualElements.virtualNodeBindingValue(node);default:return null;}},'parseBindingsString':function(bindingsString,bindingContext,node,options){try{var bindingFunction=createBindingsStringEvaluatorViaCache(bindingsString,this.bindingCache,options);return bindingFunction(bindingContext,node);}catch(ex){ex.message=\"Unable to parse bindings.\\nBindings value: \"+bindingsString+\"\\nMessage: \"+ex.message;throw ex;}}});ko.bindingProvider['instance']=new ko.bindingProvider();function createBindingsStringEvaluatorViaCache(bindingsString,cache,options){var cacheKey=bindingsString+(options&&options['valueAccessors']||'');return cache[cacheKey]||(cache[cacheKey]=createBindingsStringEvaluator(bindingsString,options));}\nfunction createBindingsStringEvaluator(bindingsString,options){var rewrittenBindings=ko.expressionRewriting.preProcessBindings(bindingsString,options),functionBody=\"with($context){with($data||{}){return{\"+rewrittenBindings+\"}}}\";return new Function(\"$context\",\"$element\",functionBody);}})();ko.exportSymbol('bindingProvider',ko.bindingProvider);(function(){var contextSubscribable=ko.utils.createSymbolOrString('_subscribable');var contextAncestorBindingInfo=ko.utils.createSymbolOrString('_ancestorBindingInfo');var contextDataDependency=ko.utils.createSymbolOrString('_dataDependency');ko.bindingHandlers={};var bindingDoesNotRecurseIntoElementTypes={'script':true,'textarea':true,'template':true};ko['getBindingHandler']=function(bindingKey){return ko.bindingHandlers[bindingKey];};var inheritParentVm={};ko.bindingContext=function(dataItemOrAccessor,parentContext,dataItemAlias,extendCallback,options){function updateContext(){var dataItemOrObservable=isFunc?realDataItemOrAccessor():realDataItemOrAccessor,dataItem=ko.utils.unwrapObservable(dataItemOrObservable);if(parentContext){ko.utils.extend(self,parentContext);if(contextAncestorBindingInfo in parentContext){self[contextAncestorBindingInfo]=parentContext[contextAncestorBindingInfo];}}else{self['$parents']=[];self['$root']=dataItem;self['ko']=ko;}\nself[contextSubscribable]=subscribable;if(shouldInheritData){dataItem=self['$data'];}else{self['$rawData']=dataItemOrObservable;self['$data']=dataItem;}\nif(dataItemAlias)\nself[dataItemAlias]=dataItem;if(extendCallback)\nextendCallback(self,parentContext,dataItem);if(parentContext&&parentContext[contextSubscribable]&&!ko.computedContext.computed().hasAncestorDependency(parentContext[contextSubscribable])){parentContext[contextSubscribable]();}\nif(dataDependency){self[contextDataDependency]=dataDependency;}\nreturn self['$data'];}\nvar self=this,shouldInheritData=dataItemOrAccessor===inheritParentVm,realDataItemOrAccessor=shouldInheritData?undefined:dataItemOrAccessor,isFunc=typeof(realDataItemOrAccessor)==\"function\"&&!ko.isObservable(realDataItemOrAccessor),nodes,subscribable,dataDependency=options&&options['dataDependency'];if(options&&options['exportDependencies']){updateContext();}else{subscribable=ko.pureComputed(updateContext);subscribable.peek();if(subscribable.isActive()){subscribable['equalityComparer']=null;}else{self[contextSubscribable]=undefined;}}}\nko.bindingContext.prototype['createChildContext']=function(dataItemOrAccessor,dataItemAlias,extendCallback,options){if(!options&&dataItemAlias&&typeof dataItemAlias==\"object\"){options=dataItemAlias;dataItemAlias=options['as'];extendCallback=options['extend'];}\nif(dataItemAlias&&options&&options['noChildContext']){var isFunc=typeof(dataItemOrAccessor)==\"function\"&&!ko.isObservable(dataItemOrAccessor);return new ko.bindingContext(inheritParentVm,this,null,function(self){if(extendCallback)\nextendCallback(self);self[dataItemAlias]=isFunc?dataItemOrAccessor():dataItemOrAccessor;},options);}\nreturn new ko.bindingContext(dataItemOrAccessor,this,dataItemAlias,function(self,parentContext){self['$parentContext']=parentContext;self['$parent']=parentContext['$data'];self['$parents']=(parentContext['$parents']||[]).slice(0);self['$parents'].unshift(self['$parent']);if(extendCallback)\nextendCallback(self);},options);};ko.bindingContext.prototype['extend']=function(properties,options){return new ko.bindingContext(inheritParentVm,this,null,function(self,parentContext){ko.utils.extend(self,typeof(properties)==\"function\"?properties(self):properties);},options);};var boundElementDomDataKey=ko.utils.domData.nextKey();function asyncContextDispose(node){var bindingInfo=ko.utils.domData.get(node,boundElementDomDataKey),asyncContext=bindingInfo&&bindingInfo.asyncContext;if(asyncContext){bindingInfo.asyncContext=null;asyncContext.notifyAncestor();}}\nfunction AsyncCompleteContext(node,bindingInfo,ancestorBindingInfo){this.node=node;this.bindingInfo=bindingInfo;this.asyncDescendants=[];this.childrenComplete=false;if(!bindingInfo.asyncContext){ko.utils.domNodeDisposal.addDisposeCallback(node,asyncContextDispose);}\nif(ancestorBindingInfo&&ancestorBindingInfo.asyncContext){ancestorBindingInfo.asyncContext.asyncDescendants.push(node);this.ancestorBindingInfo=ancestorBindingInfo;}}\nAsyncCompleteContext.prototype.notifyAncestor=function(){if(this.ancestorBindingInfo&&this.ancestorBindingInfo.asyncContext){this.ancestorBindingInfo.asyncContext.descendantComplete(this.node);}};AsyncCompleteContext.prototype.descendantComplete=function(node){ko.utils.arrayRemoveItem(this.asyncDescendants,node);if(!this.asyncDescendants.length&&this.childrenComplete){this.completeChildren();}};AsyncCompleteContext.prototype.completeChildren=function(){this.childrenComplete=true;if(this.bindingInfo.asyncContext&&!this.asyncDescendants.length){this.bindingInfo.asyncContext=null;ko.utils.domNodeDisposal.removeDisposeCallback(this.node,asyncContextDispose);ko.bindingEvent.notify(this.node,ko.bindingEvent.descendantsComplete);this.notifyAncestor();}};ko.bindingEvent={childrenComplete:\"childrenComplete\",descendantsComplete:\"descendantsComplete\",subscribe:function(node,event,callback,context,options){var bindingInfo=ko.utils.domData.getOrSet(node,boundElementDomDataKey,{});if(!bindingInfo.eventSubscribable){bindingInfo.eventSubscribable=new ko.subscribable;}\nif(options&&options['notifyImmediately']&&bindingInfo.notifiedEvents[event]){ko.dependencyDetection.ignore(callback,context,[node]);}\nreturn bindingInfo.eventSubscribable.subscribe(callback,context,event);},notify:function(node,event){var bindingInfo=ko.utils.domData.get(node,boundElementDomDataKey);if(bindingInfo){bindingInfo.notifiedEvents[event]=true;if(bindingInfo.eventSubscribable){bindingInfo.eventSubscribable['notifySubscribers'](node,event);}\nif(event==ko.bindingEvent.childrenComplete){if(bindingInfo.asyncContext){bindingInfo.asyncContext.completeChildren();}else if(bindingInfo.asyncContext===undefined&&bindingInfo.eventSubscribable&&bindingInfo.eventSubscribable.hasSubscriptionsForEvent(ko.bindingEvent.descendantsComplete)){throw new Error(\"descendantsComplete event not supported for bindings on this node\");}}}},startPossiblyAsyncContentBinding:function(node,bindingContext){var bindingInfo=ko.utils.domData.getOrSet(node,boundElementDomDataKey,{});if(!bindingInfo.asyncContext){bindingInfo.asyncContext=new AsyncCompleteContext(node,bindingInfo,bindingContext[contextAncestorBindingInfo]);}\nif(bindingContext[contextAncestorBindingInfo]==bindingInfo){return bindingContext;}\nreturn bindingContext['extend'](function(ctx){ctx[contextAncestorBindingInfo]=bindingInfo;});}};function makeValueAccessor(value){return function(){return value;};}\nfunction evaluateValueAccessor(valueAccessor){return valueAccessor();}\nfunction makeAccessorsFromFunction(callback){return ko.utils.objectMap(ko.dependencyDetection.ignore(callback),function(value,key){return function(){return callback()[key];};});}\nfunction makeBindingAccessors(bindings,context,node){if(typeof bindings==='function'){return makeAccessorsFromFunction(bindings.bind(null,context,node));}else{return ko.utils.objectMap(bindings,makeValueAccessor);}}\nfunction getBindingsAndMakeAccessors(node,context){return makeAccessorsFromFunction(this['getBindings'].bind(this,node,context));}\nfunction validateThatBindingIsAllowedForVirtualElements(bindingName){var validator=ko.virtualElements.allowedBindings[bindingName];if(!validator)\nthrow new Error(\"The binding '\"+bindingName+\"' cannot be used with virtual elements\")}\nfunction applyBindingsToDescendantsInternal(bindingContext,elementOrVirtualElement){var nextInQueue=ko.virtualElements.firstChild(elementOrVirtualElement);if(nextInQueue){var currentChild,provider=ko.bindingProvider['instance'],preprocessNode=provider['preprocessNode'];if(preprocessNode){while(currentChild=nextInQueue){nextInQueue=ko.virtualElements.nextSibling(currentChild);preprocessNode.call(provider,currentChild);}\nnextInQueue=ko.virtualElements.firstChild(elementOrVirtualElement);}\nwhile(currentChild=nextInQueue){nextInQueue=ko.virtualElements.nextSibling(currentChild);applyBindingsToNodeAndDescendantsInternal(bindingContext,currentChild);}}\nko.bindingEvent.notify(elementOrVirtualElement,ko.bindingEvent.childrenComplete);}\nfunction applyBindingsToNodeAndDescendantsInternal(bindingContext,nodeVerified){var bindingContextForDescendants=bindingContext;var isElement=(nodeVerified.nodeType===1);if(isElement)\nko.virtualElements.normaliseVirtualElementDomStructure(nodeVerified);var shouldApplyBindings=isElement||ko.bindingProvider['instance']['nodeHasBindings'](nodeVerified);if(shouldApplyBindings)\nbindingContextForDescendants=applyBindingsToNodeInternal(nodeVerified,null,bindingContext)['bindingContextForDescendants'];if(bindingContextForDescendants&&!bindingDoesNotRecurseIntoElementTypes[ko.utils.tagNameLower(nodeVerified)]){applyBindingsToDescendantsInternal(bindingContextForDescendants,nodeVerified);}}\nfunction topologicalSortBindings(bindings){var result=[],bindingsConsidered={},cyclicDependencyStack=[];ko.utils.objectForEach(bindings,function pushBinding(bindingKey){if(!bindingsConsidered[bindingKey]){var binding=ko['getBindingHandler'](bindingKey);if(binding){if(binding['after']){cyclicDependencyStack.push(bindingKey);ko.utils.arrayForEach(binding['after'],function(bindingDependencyKey){if(bindings[bindingDependencyKey]){if(ko.utils.arrayIndexOf(cyclicDependencyStack,bindingDependencyKey)!==-1){throw Error(\"Cannot combine the following bindings, because they have a cyclic dependency: \"+cyclicDependencyStack.join(\", \"));}else{pushBinding(bindingDependencyKey);}}});cyclicDependencyStack.length--;}\nresult.push({key:bindingKey,handler:binding});}\nbindingsConsidered[bindingKey]=true;}});return result;}\nfunction applyBindingsToNodeInternal(node,sourceBindings,bindingContext){var bindingInfo=ko.utils.domData.getOrSet(node,boundElementDomDataKey,{});var alreadyBound=bindingInfo.alreadyBound;if(!sourceBindings){if(alreadyBound){throw Error(\"You cannot apply bindings multiple times to the same element.\");}\nbindingInfo.alreadyBound=true;}\nif(!alreadyBound){bindingInfo.context=bindingContext;}\nif(!bindingInfo.notifiedEvents){bindingInfo.notifiedEvents={};}\nvar bindings;if(sourceBindings&&typeof sourceBindings!=='function'){bindings=sourceBindings;}else{var provider=ko.bindingProvider['instance'],getBindings=provider['getBindingAccessors']||getBindingsAndMakeAccessors;var bindingsUpdater=ko.dependentObservable(function(){bindings=sourceBindings?sourceBindings(bindingContext,node):getBindings.call(provider,node,bindingContext);if(bindings){if(bindingContext[contextSubscribable]){bindingContext[contextSubscribable]();}\nif(bindingContext[contextDataDependency]){bindingContext[contextDataDependency]();}}\nreturn bindings;},null,{disposeWhenNodeIsRemoved:node});if(!bindings||!bindingsUpdater.isActive())\nbindingsUpdater=null;}\nvar contextToExtend=bindingContext;var bindingHandlerThatControlsDescendantBindings;if(bindings){var getValueAccessor=bindingsUpdater?function(bindingKey){return function(){return evaluateValueAccessor(bindingsUpdater()[bindingKey]);};}:function(bindingKey){return bindings[bindingKey];};function allBindings(){return ko.utils.objectMap(bindingsUpdater?bindingsUpdater():bindings,evaluateValueAccessor);}\nallBindings['get']=function(key){return bindings[key]&&evaluateValueAccessor(getValueAccessor(key));};allBindings['has']=function(key){return key in bindings;};if(ko.bindingEvent.childrenComplete in bindings){ko.bindingEvent.subscribe(node,ko.bindingEvent.childrenComplete,function(){var callback=evaluateValueAccessor(bindings[ko.bindingEvent.childrenComplete]);if(callback){var nodes=ko.virtualElements.childNodes(node);if(nodes.length){callback(nodes,ko.dataFor(nodes[0]));}}});}\nif(ko.bindingEvent.descendantsComplete in bindings){contextToExtend=ko.bindingEvent.startPossiblyAsyncContentBinding(node,bindingContext);ko.bindingEvent.subscribe(node,ko.bindingEvent.descendantsComplete,function(){var callback=evaluateValueAccessor(bindings[ko.bindingEvent.descendantsComplete]);if(callback&&ko.virtualElements.firstChild(node)){callback(node);}});}\nvar orderedBindings=topologicalSortBindings(bindings);ko.utils.arrayForEach(orderedBindings,function(bindingKeyAndHandler){var handlerInitFn=bindingKeyAndHandler.handler[\"init\"],handlerUpdateFn=bindingKeyAndHandler.handler[\"update\"],bindingKey=bindingKeyAndHandler.key;if(node.nodeType===8){validateThatBindingIsAllowedForVirtualElements(bindingKey);}\ntry{if(typeof handlerInitFn==\"function\"){ko.dependencyDetection.ignore(function(){var initResult=handlerInitFn(node,getValueAccessor(bindingKey),allBindings,contextToExtend['$data'],contextToExtend);if(initResult&&initResult['controlsDescendantBindings']){if(bindingHandlerThatControlsDescendantBindings!==undefined)\nthrow new Error(\"Multiple bindings (\"+bindingHandlerThatControlsDescendantBindings+\" and \"+bindingKey+\") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.\");bindingHandlerThatControlsDescendantBindings=bindingKey;}});}\nif(typeof handlerUpdateFn==\"function\"){ko.dependentObservable(function(){handlerUpdateFn(node,getValueAccessor(bindingKey),allBindings,contextToExtend['$data'],contextToExtend);},null,{disposeWhenNodeIsRemoved:node});}}catch(ex){ex.message=\"Unable to process binding \\\"\"+bindingKey+\": \"+bindings[bindingKey]+\"\\\"\\nMessage: \"+ex.message;throw ex;}});}\nvar shouldBindDescendants=bindingHandlerThatControlsDescendantBindings===undefined;return{'shouldBindDescendants':shouldBindDescendants,'bindingContextForDescendants':shouldBindDescendants&&contextToExtend};};ko.storedBindingContextForNode=function(node){var bindingInfo=ko.utils.domData.get(node,boundElementDomDataKey);return bindingInfo&&bindingInfo.context;}\nfunction getBindingContext(viewModelOrBindingContext,extendContextCallback){return viewModelOrBindingContext&&(viewModelOrBindingContext instanceof ko.bindingContext)?viewModelOrBindingContext:new ko.bindingContext(viewModelOrBindingContext,undefined,undefined,extendContextCallback);}\nko.applyBindingAccessorsToNode=function(node,bindings,viewModelOrBindingContext){if(node.nodeType===1)\nko.virtualElements.normaliseVirtualElementDomStructure(node);return applyBindingsToNodeInternal(node,bindings,getBindingContext(viewModelOrBindingContext));};ko.applyBindingsToNode=function(node,bindings,viewModelOrBindingContext){var context=getBindingContext(viewModelOrBindingContext);return ko.applyBindingAccessorsToNode(node,makeBindingAccessors(bindings,context,node),context);};ko.applyBindingsToDescendants=function(viewModelOrBindingContext,rootNode){if(rootNode.nodeType===1||rootNode.nodeType===8)\napplyBindingsToDescendantsInternal(getBindingContext(viewModelOrBindingContext),rootNode);};ko.applyBindings=function(viewModelOrBindingContext,rootNode,extendContextCallback){if(!jQueryInstance&&window['jQuery']){jQueryInstance=window['jQuery'];}\nif(arguments.length<2){rootNode=document.body;if(!rootNode){throw Error(\"ko.applyBindings: could not find document.body; has the document been loaded?\");}}else if(!rootNode||(rootNode.nodeType!==1&&rootNode.nodeType!==8)){throw Error(\"ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node\");}\napplyBindingsToNodeAndDescendantsInternal(getBindingContext(viewModelOrBindingContext,extendContextCallback),rootNode);};ko.contextFor=function(node){if(node&&(node.nodeType===1||node.nodeType===8)){return ko.storedBindingContextForNode(node);}\nreturn undefined;};ko.dataFor=function(node){var context=ko.contextFor(node);return context?context['$data']:undefined;};ko.exportSymbol('bindingHandlers',ko.bindingHandlers);ko.exportSymbol('bindingEvent',ko.bindingEvent);ko.exportSymbol('bindingEvent.subscribe',ko.bindingEvent.subscribe);ko.exportSymbol('bindingEvent.startPossiblyAsyncContentBinding',ko.bindingEvent.startPossiblyAsyncContentBinding);ko.exportSymbol('applyBindings',ko.applyBindings);ko.exportSymbol('applyBindingsToDescendants',ko.applyBindingsToDescendants);ko.exportSymbol('applyBindingAccessorsToNode',ko.applyBindingAccessorsToNode);ko.exportSymbol('applyBindingsToNode',ko.applyBindingsToNode);ko.exportSymbol('contextFor',ko.contextFor);ko.exportSymbol('dataFor',ko.dataFor);})();(function(undefined){var loadingSubscribablesCache={},loadedDefinitionsCache={};ko.components={get:function(componentName,callback){var cachedDefinition=getObjectOwnProperty(loadedDefinitionsCache,componentName);if(cachedDefinition){if(cachedDefinition.isSynchronousComponent){ko.dependencyDetection.ignore(function(){callback(cachedDefinition.definition);});}else{ko.tasks.schedule(function(){callback(cachedDefinition.definition);});}}else{loadComponentAndNotify(componentName,callback);}},clearCachedDefinition:function(componentName){delete loadedDefinitionsCache[componentName];},_getFirstResultFromLoaders:getFirstResultFromLoaders};function getObjectOwnProperty(obj,propName){return Object.prototype.hasOwnProperty.call(obj,propName)?obj[propName]:undefined;}\nfunction loadComponentAndNotify(componentName,callback){var subscribable=getObjectOwnProperty(loadingSubscribablesCache,componentName),completedAsync;if(!subscribable){subscribable=loadingSubscribablesCache[componentName]=new ko.subscribable();subscribable.subscribe(callback);beginLoadingComponent(componentName,function(definition,config){var isSynchronousComponent=!!(config&&config['synchronous']);loadedDefinitionsCache[componentName]={definition:definition,isSynchronousComponent:isSynchronousComponent};delete loadingSubscribablesCache[componentName];if(completedAsync||isSynchronousComponent){subscribable['notifySubscribers'](definition);}else{ko.tasks.schedule(function(){subscribable['notifySubscribers'](definition);});}});completedAsync=true;}else{subscribable.subscribe(callback);}}\nfunction beginLoadingComponent(componentName,callback){getFirstResultFromLoaders('getConfig',[componentName],function(config){if(config){getFirstResultFromLoaders('loadComponent',[componentName,config],function(definition){callback(definition,config);});}else{callback(null,null);}});}\nfunction getFirstResultFromLoaders(methodName,argsExceptCallback,callback,candidateLoaders){if(!candidateLoaders){candidateLoaders=ko.components['loaders'].slice(0);}\nvar currentCandidateLoader=candidateLoaders.shift();if(currentCandidateLoader){var methodInstance=currentCandidateLoader[methodName];if(methodInstance){var wasAborted=false,synchronousReturnValue=methodInstance.apply(currentCandidateLoader,argsExceptCallback.concat(function(result){if(wasAborted){callback(null);}else if(result!==null){callback(result);}else{getFirstResultFromLoaders(methodName,argsExceptCallback,callback,candidateLoaders);}}));if(synchronousReturnValue!==undefined){wasAborted=true;if(!currentCandidateLoader['suppressLoaderExceptions']){throw new Error('Component loaders must supply values by invoking the callback, not by returning values synchronously.');}}}else{getFirstResultFromLoaders(methodName,argsExceptCallback,callback,candidateLoaders);}}else{callback(null);}}\nko.components['loaders']=[];ko.exportSymbol('components',ko.components);ko.exportSymbol('components.get',ko.components.get);ko.exportSymbol('components.clearCachedDefinition',ko.components.clearCachedDefinition);})();(function(undefined){var defaultConfigRegistry={};ko.components.register=function(componentName,config){if(!config){throw new Error('Invalid configuration for '+componentName);}\nif(ko.components.isRegistered(componentName)){throw new Error('Component '+componentName+' is already registered');}\ndefaultConfigRegistry[componentName]=config;};ko.components.isRegistered=function(componentName){return Object.prototype.hasOwnProperty.call(defaultConfigRegistry,componentName);};ko.components.unregister=function(componentName){delete defaultConfigRegistry[componentName];ko.components.clearCachedDefinition(componentName);};ko.components.defaultLoader={'getConfig':function(componentName,callback){var result=ko.components.isRegistered(componentName)?defaultConfigRegistry[componentName]:null;callback(result);},'loadComponent':function(componentName,config,callback){var errorCallback=makeErrorCallback(componentName);possiblyGetConfigFromAmd(errorCallback,config,function(loadedConfig){resolveConfig(componentName,errorCallback,loadedConfig,callback);});},'loadTemplate':function(componentName,templateConfig,callback){resolveTemplate(makeErrorCallback(componentName),templateConfig,callback);},'loadViewModel':function(componentName,viewModelConfig,callback){resolveViewModel(makeErrorCallback(componentName),viewModelConfig,callback);}};var createViewModelKey='createViewModel';function resolveConfig(componentName,errorCallback,config,callback){var result={},makeCallBackWhenZero=2,tryIssueCallback=function(){if(--makeCallBackWhenZero===0){callback(result);}},templateConfig=config['template'],viewModelConfig=config['viewModel'];if(templateConfig){possiblyGetConfigFromAmd(errorCallback,templateConfig,function(loadedConfig){ko.components._getFirstResultFromLoaders('loadTemplate',[componentName,loadedConfig],function(resolvedTemplate){result['template']=resolvedTemplate;tryIssueCallback();});});}else{tryIssueCallback();}\nif(viewModelConfig){possiblyGetConfigFromAmd(errorCallback,viewModelConfig,function(loadedConfig){ko.components._getFirstResultFromLoaders('loadViewModel',[componentName,loadedConfig],function(resolvedViewModel){result[createViewModelKey]=resolvedViewModel;tryIssueCallback();});});}else{tryIssueCallback();}}\nfunction resolveTemplate(errorCallback,templateConfig,callback){if(typeof templateConfig==='string'){callback(ko.utils.parseHtmlFragment(templateConfig));}else if(templateConfig instanceof Array){callback(templateConfig);}else if(isDocumentFragment(templateConfig)){callback(ko.utils.makeArray(templateConfig.childNodes));}else if(templateConfig['element']){var element=templateConfig['element'];if(isDomElement(element)){callback(cloneNodesFromTemplateSourceElement(element));}else if(typeof element==='string'){var elemInstance=document.getElementById(element);if(elemInstance){callback(cloneNodesFromTemplateSourceElement(elemInstance));}else{errorCallback('Cannot find element with ID '+element);}}else{errorCallback('Unknown element type: '+element);}}else{errorCallback('Unknown template value: '+templateConfig);}}\nfunction resolveViewModel(errorCallback,viewModelConfig,callback){if(typeof viewModelConfig==='function'){callback(function(params){return new viewModelConfig(params);});}else if(typeof viewModelConfig[createViewModelKey]==='function'){callback(viewModelConfig[createViewModelKey]);}else if('instance'in viewModelConfig){var fixedInstance=viewModelConfig['instance'];callback(function(params,componentInfo){return fixedInstance;});}else if('viewModel'in viewModelConfig){resolveViewModel(errorCallback,viewModelConfig['viewModel'],callback);}else{errorCallback('Unknown viewModel value: '+viewModelConfig);}}\nfunction cloneNodesFromTemplateSourceElement(elemInstance){switch(ko.utils.tagNameLower(elemInstance)){case'script':return ko.utils.parseHtmlFragment(elemInstance.text);case'textarea':return ko.utils.parseHtmlFragment(elemInstance.value);case'template':if(isDocumentFragment(elemInstance.content)){return ko.utils.cloneNodes(elemInstance.content.childNodes);}}\nreturn ko.utils.cloneNodes(elemInstance.childNodes);}\nfunction isDomElement(obj){if(window['HTMLElement']){return obj instanceof HTMLElement;}else{return obj&&obj.tagName&&obj.nodeType===1;}}\nfunction isDocumentFragment(obj){if(window['DocumentFragment']){return obj instanceof DocumentFragment;}else{return obj&&obj.nodeType===11;}}\nfunction possiblyGetConfigFromAmd(errorCallback,config,callback){if(typeof config['require']==='string'){if(amdRequire||window['require']){(amdRequire||window['require'])([config['require']],function(module){if(module&&typeof module==='object'&&module.__esModule&&module.default){module=module.default;}\ncallback(module);});}else{errorCallback('Uses require, but no AMD loader is present');}}else{callback(config);}}\nfunction makeErrorCallback(componentName){return function(message){throw new Error('Component \\''+componentName+'\\': '+message);};}\nko.exportSymbol('components.register',ko.components.register);ko.exportSymbol('components.isRegistered',ko.components.isRegistered);ko.exportSymbol('components.unregister',ko.components.unregister);ko.exportSymbol('components.defaultLoader',ko.components.defaultLoader);ko.components['loaders'].push(ko.components.defaultLoader);ko.components._allRegisteredComponents=defaultConfigRegistry;})();(function(undefined){ko.components['getComponentNameForNode']=function(node){var tagNameLower=ko.utils.tagNameLower(node);if(ko.components.isRegistered(tagNameLower)){if(tagNameLower.indexOf('-')!=-1||(''+node)==\"[object HTMLUnknownElement]\"||(ko.utils.ieVersion<=8&&node.tagName===tagNameLower)){return tagNameLower;}}};ko.components.addBindingsForCustomElement=function(allBindings,node,bindingContext,valueAccessors){if(node.nodeType===1){var componentName=ko.components['getComponentNameForNode'](node);if(componentName){allBindings=allBindings||{};if(allBindings['component']){throw new Error('Cannot use the \"component\" binding on a custom element matching a component');}\nvar componentBindingValue={'name':componentName,'params':getComponentParamsFromCustomElement(node,bindingContext)};allBindings['component']=valueAccessors?function(){return componentBindingValue;}:componentBindingValue;}}\nreturn allBindings;}\nvar nativeBindingProviderInstance=new ko.bindingProvider();function getComponentParamsFromCustomElement(elem,bindingContext){var paramsAttribute=elem.getAttribute('params');if(paramsAttribute){var params=nativeBindingProviderInstance['parseBindingsString'](paramsAttribute,bindingContext,elem,{'valueAccessors':true,'bindingParams':true}),rawParamComputedValues=ko.utils.objectMap(params,function(paramValue,paramName){return ko.computed(paramValue,null,{disposeWhenNodeIsRemoved:elem});}),result=ko.utils.objectMap(rawParamComputedValues,function(paramValueComputed,paramName){var paramValue=paramValueComputed.peek();if(!paramValueComputed.isActive()){return paramValue;}else{return ko.computed({'read':function(){return ko.utils.unwrapObservable(paramValueComputed());},'write':ko.isWriteableObservable(paramValue)&&function(value){paramValueComputed()(value);},disposeWhenNodeIsRemoved:elem});}});if(!Object.prototype.hasOwnProperty.call(result,'$raw')){result['$raw']=rawParamComputedValues;}\nreturn result;}else{return{'$raw':{}};}}\nif(ko.utils.ieVersion<9){ko.components['register']=(function(originalFunction){return function(componentName){document.createElement(componentName);return originalFunction.apply(this,arguments);}})(ko.components['register']);document.createDocumentFragment=(function(originalFunction){return function(){var newDocFrag=originalFunction(),allComponents=ko.components._allRegisteredComponents;for(var componentName in allComponents){if(Object.prototype.hasOwnProperty.call(allComponents,componentName)){newDocFrag.createElement(componentName);}}\nreturn newDocFrag;};})(document.createDocumentFragment);}})();(function(undefined){var componentLoadingOperationUniqueId=0;ko.bindingHandlers['component']={'init':function(element,valueAccessor,ignored1,ignored2,bindingContext){var currentViewModel,currentLoadingOperationId,afterRenderSub,disposeAssociatedComponentViewModel=function(){var currentViewModelDispose=currentViewModel&&currentViewModel['dispose'];if(typeof currentViewModelDispose==='function'){currentViewModelDispose.call(currentViewModel);}\nif(afterRenderSub){afterRenderSub.dispose();}\nafterRenderSub=null;currentViewModel=null;currentLoadingOperationId=null;},originalChildNodes=ko.utils.makeArray(ko.virtualElements.childNodes(element));ko.virtualElements.emptyNode(element);ko.utils.domNodeDisposal.addDisposeCallback(element,disposeAssociatedComponentViewModel);ko.computed(function(){var value=ko.utils.unwrapObservable(valueAccessor()),componentName,componentParams;if(typeof value==='string'){componentName=value;}else{componentName=ko.utils.unwrapObservable(value['name']);componentParams=ko.utils.unwrapObservable(value['params']);}\nif(!componentName){throw new Error('No component name specified');}\nvar asyncContext=ko.bindingEvent.startPossiblyAsyncContentBinding(element,bindingContext);var loadingOperationId=currentLoadingOperationId=++componentLoadingOperationUniqueId;ko.components.get(componentName,function(componentDefinition){if(currentLoadingOperationId!==loadingOperationId){return;}\ndisposeAssociatedComponentViewModel();if(!componentDefinition){throw new Error('Unknown component \\''+componentName+'\\'');}\ncloneTemplateIntoElement(componentName,componentDefinition,element);var componentInfo={'element':element,'templateNodes':originalChildNodes};var componentViewModel=createViewModel(componentDefinition,componentParams,componentInfo),childBindingContext=asyncContext['createChildContext'](componentViewModel,{'extend':function(ctx){ctx['$component']=componentViewModel;ctx['$componentTemplateNodes']=originalChildNodes;}});if(componentViewModel&&componentViewModel['koDescendantsComplete']){afterRenderSub=ko.bindingEvent.subscribe(element,ko.bindingEvent.descendantsComplete,componentViewModel['koDescendantsComplete'],componentViewModel);}\ncurrentViewModel=componentViewModel;ko.applyBindingsToDescendants(childBindingContext,element);});},null,{disposeWhenNodeIsRemoved:element});return{'controlsDescendantBindings':true};}};ko.virtualElements.allowedBindings['component']=true;function cloneTemplateIntoElement(componentName,componentDefinition,element){var template=componentDefinition['template'];if(!template){throw new Error('Component \\''+componentName+'\\' has no template');}\nvar clonedNodesArray=ko.utils.cloneNodes(template);ko.virtualElements.setDomNodeChildren(element,clonedNodesArray);}\nfunction createViewModel(componentDefinition,componentParams,componentInfo){var componentViewModelFactory=componentDefinition['createViewModel'];return componentViewModelFactory?componentViewModelFactory.call(componentDefinition,componentParams,componentInfo):componentParams;}})();var attrHtmlToJavaScriptMap={'class':'className','for':'htmlFor'};ko.bindingHandlers['attr']={'update':function(element,valueAccessor,allBindings){var value=ko.utils.unwrapObservable(valueAccessor())||{};ko.utils.objectForEach(value,function(attrName,attrValue){attrValue=ko.utils.unwrapObservable(attrValue);var prefixLen=attrName.indexOf(':');var namespace=\"lookupNamespaceURI\"in element&&prefixLen>0&&element.lookupNamespaceURI(attrName.substr(0,prefixLen));var toRemove=(attrValue===false)||(attrValue===null)||(attrValue===undefined);if(toRemove){namespace?element.removeAttributeNS(namespace,attrName):element.removeAttribute(attrName);}else{attrValue=attrValue.toString();}\nif(ko.utils.ieVersion<=8&&attrName in attrHtmlToJavaScriptMap){attrName=attrHtmlToJavaScriptMap[attrName];if(toRemove)\nelement.removeAttribute(attrName);else\nelement[attrName]=attrValue;}else if(!toRemove){namespace?element.setAttributeNS(namespace,attrName,attrValue):element.setAttribute(attrName,attrValue);}\nif(attrName===\"name\"){ko.utils.setElementName(element,toRemove?\"\":attrValue);}});}};(function(){ko.bindingHandlers['checked']={'after':['value','attr'],'init':function(element,valueAccessor,allBindings){var checkedValue=ko.pureComputed(function(){if(allBindings['has']('checkedValue')){return ko.utils.unwrapObservable(allBindings.get('checkedValue'));}else if(useElementValue){if(allBindings['has']('value')){return ko.utils.unwrapObservable(allBindings.get('value'));}else{return element.value;}}});function updateModel(){var isChecked=element.checked,elemValue=checkedValue();if(ko.computedContext.isInitial()){return;}\nif(!isChecked&&(isRadio||ko.computedContext.getDependenciesCount())){return;}\nvar modelValue=ko.dependencyDetection.ignore(valueAccessor);if(valueIsArray){var writableValue=rawValueIsNonArrayObservable?modelValue.peek():modelValue,saveOldValue=oldElemValue;oldElemValue=elemValue;if(saveOldValue!==elemValue){if(isChecked){ko.utils.addOrRemoveItem(writableValue,elemValue,true);ko.utils.addOrRemoveItem(writableValue,saveOldValue,false);}}else{ko.utils.addOrRemoveItem(writableValue,elemValue,isChecked);}\nif(rawValueIsNonArrayObservable&&ko.isWriteableObservable(modelValue)){modelValue(writableValue);}}else{if(isCheckbox){if(elemValue===undefined){elemValue=isChecked;}else if(!isChecked){elemValue=undefined;}}\nko.expressionRewriting.writeValueToProperty(modelValue,allBindings,'checked',elemValue,true);}};function updateView(){var modelValue=ko.utils.unwrapObservable(valueAccessor()),elemValue=checkedValue();if(valueIsArray){element.checked=ko.utils.arrayIndexOf(modelValue,elemValue)>=0;oldElemValue=elemValue;}else if(isCheckbox&&elemValue===undefined){element.checked=!!modelValue;}else{element.checked=(checkedValue()===modelValue);}};var isCheckbox=element.type==\"checkbox\",isRadio=element.type==\"radio\";if(!isCheckbox&&!isRadio){return;}\nvar rawValue=valueAccessor(),valueIsArray=isCheckbox&&(ko.utils.unwrapObservable(rawValue)instanceof Array),rawValueIsNonArrayObservable=!(valueIsArray&&rawValue.push&&rawValue.splice),useElementValue=isRadio||valueIsArray,oldElemValue=valueIsArray?checkedValue():undefined;if(isRadio&&!element.name)\nko.bindingHandlers['uniqueName']['init'](element,function(){return true});ko.computed(updateModel,null,{disposeWhenNodeIsRemoved:element});ko.utils.registerEventHandler(element,\"click\",updateModel);ko.computed(updateView,null,{disposeWhenNodeIsRemoved:element});rawValue=undefined;}};ko.expressionRewriting.twoWayBindings['checked']=true;ko.bindingHandlers['checkedValue']={'update':function(element,valueAccessor){element.value=ko.utils.unwrapObservable(valueAccessor());}};})();var classesWrittenByBindingKey='__ko__cssValue';ko.bindingHandlers['class']={'update':function(element,valueAccessor){var value=ko.utils.stringTrim(ko.utils.unwrapObservable(valueAccessor()));ko.utils.toggleDomNodeCssClass(element,element[classesWrittenByBindingKey],false);element[classesWrittenByBindingKey]=value;ko.utils.toggleDomNodeCssClass(element,value,true);}};ko.bindingHandlers['css']={'update':function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor());if(value!==null&&typeof value==\"object\"){ko.utils.objectForEach(value,function(className,shouldHaveClass){shouldHaveClass=ko.utils.unwrapObservable(shouldHaveClass);ko.utils.toggleDomNodeCssClass(element,className,shouldHaveClass);});}else{ko.bindingHandlers['class']['update'](element,valueAccessor);}}};ko.bindingHandlers['enable']={'update':function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor());if(value&&element.disabled)\nelement.removeAttribute(\"disabled\");else if((!value)&&(!element.disabled))\nelement.disabled=true;}};ko.bindingHandlers['disable']={'update':function(element,valueAccessor){ko.bindingHandlers['enable']['update'](element,function(){return!ko.utils.unwrapObservable(valueAccessor())});}};function makeEventHandlerShortcut(eventName){ko.bindingHandlers[eventName]={'init':function(element,valueAccessor,allBindings,viewModel,bindingContext){var newValueAccessor=function(){var result={};result[eventName]=valueAccessor();return result;};return ko.bindingHandlers['event']['init'].call(this,element,newValueAccessor,allBindings,viewModel,bindingContext);}}}\nko.bindingHandlers['event']={'init':function(element,valueAccessor,allBindings,viewModel,bindingContext){var eventsToHandle=valueAccessor()||{};ko.utils.objectForEach(eventsToHandle,function(eventName){if(typeof eventName==\"string\"){ko.utils.registerEventHandler(element,eventName,function(event){var handlerReturnValue;var handlerFunction=valueAccessor()[eventName];if(!handlerFunction)\nreturn;try{var argsForHandler=ko.utils.makeArray(arguments);viewModel=bindingContext['$data'];argsForHandler.unshift(viewModel);handlerReturnValue=handlerFunction.apply(viewModel,argsForHandler);}finally{if(handlerReturnValue!==true){if(event.preventDefault)\nevent.preventDefault();else\nevent.returnValue=false;}}\nvar bubble=allBindings.get(eventName+'Bubble')!==false;if(!bubble){event.cancelBubble=true;if(event.stopPropagation)\nevent.stopPropagation();}});}});}};ko.bindingHandlers['foreach']={makeTemplateValueAccessor:function(valueAccessor){return function(){var modelValue=valueAccessor(),unwrappedValue=ko.utils.peekObservable(modelValue);if((!unwrappedValue)||typeof unwrappedValue.length==\"number\")\nreturn{'foreach':modelValue,'templateEngine':ko.nativeTemplateEngine.instance};ko.utils.unwrapObservable(modelValue);return{'foreach':unwrappedValue['data'],'as':unwrappedValue['as'],'noChildContext':unwrappedValue['noChildContext'],'includeDestroyed':unwrappedValue['includeDestroyed'],'afterAdd':unwrappedValue['afterAdd'],'beforeRemove':unwrappedValue['beforeRemove'],'afterRender':unwrappedValue['afterRender'],'beforeMove':unwrappedValue['beforeMove'],'afterMove':unwrappedValue['afterMove'],'templateEngine':ko.nativeTemplateEngine.instance};};},'init':function(element,valueAccessor,allBindings,viewModel,bindingContext){return ko.bindingHandlers['template']['init'](element,ko.bindingHandlers['foreach'].makeTemplateValueAccessor(valueAccessor));},'update':function(element,valueAccessor,allBindings,viewModel,bindingContext){return ko.bindingHandlers['template']['update'](element,ko.bindingHandlers['foreach'].makeTemplateValueAccessor(valueAccessor),allBindings,viewModel,bindingContext);}};ko.expressionRewriting.bindingRewriteValidators['foreach']=false;ko.virtualElements.allowedBindings['foreach']=true;var hasfocusUpdatingProperty='__ko_hasfocusUpdating';var hasfocusLastValue='__ko_hasfocusLastValue';ko.bindingHandlers['hasfocus']={'init':function(element,valueAccessor,allBindings){var handleElementFocusChange=function(isFocused){element[hasfocusUpdatingProperty]=true;var ownerDoc=element.ownerDocument;if(\"activeElement\"in ownerDoc){var active;try{active=ownerDoc.activeElement;}catch(e){active=ownerDoc.body;}\nisFocused=(active===element);}\nvar modelValue=valueAccessor();ko.expressionRewriting.writeValueToProperty(modelValue,allBindings,'hasfocus',isFocused,true);element[hasfocusLastValue]=isFocused;element[hasfocusUpdatingProperty]=false;};var handleElementFocusIn=handleElementFocusChange.bind(null,true);var handleElementFocusOut=handleElementFocusChange.bind(null,false);ko.utils.registerEventHandler(element,\"focus\",handleElementFocusIn);ko.utils.registerEventHandler(element,\"focusin\",handleElementFocusIn);ko.utils.registerEventHandler(element,\"blur\",handleElementFocusOut);ko.utils.registerEventHandler(element,\"focusout\",handleElementFocusOut);element[hasfocusLastValue]=false;},'update':function(element,valueAccessor){var value=!!ko.utils.unwrapObservable(valueAccessor());if(!element[hasfocusUpdatingProperty]&&element[hasfocusLastValue]!==value){value?element.focus():element.blur();if(!value&&element[hasfocusLastValue]){element.ownerDocument.body.focus();}\nko.dependencyDetection.ignore(ko.utils.triggerEvent,null,[element,value?\"focusin\":\"focusout\"]);}}};ko.expressionRewriting.twoWayBindings['hasfocus']=true;ko.bindingHandlers['hasFocus']=ko.bindingHandlers['hasfocus'];ko.expressionRewriting.twoWayBindings['hasFocus']='hasfocus';ko.bindingHandlers['html']={'init':function(){return{'controlsDescendantBindings':true};},'update':function(element,valueAccessor){ko.utils.setHtml(element,valueAccessor());}};(function(){function makeWithIfBinding(bindingKey,isWith,isNot){ko.bindingHandlers[bindingKey]={'init':function(element,valueAccessor,allBindings,viewModel,bindingContext){var didDisplayOnLastUpdate,savedNodes,contextOptions={},completeOnRender,needAsyncContext,renderOnEveryChange;if(isWith){var as=allBindings.get('as'),noChildContext=allBindings.get('noChildContext');renderOnEveryChange=!(as&&noChildContext);contextOptions={'as':as,'noChildContext':noChildContext,'exportDependencies':renderOnEveryChange};}\ncompleteOnRender=allBindings.get(\"completeOn\")==\"render\";needAsyncContext=completeOnRender||allBindings['has'](ko.bindingEvent.descendantsComplete);ko.computed(function(){var value=ko.utils.unwrapObservable(valueAccessor()),shouldDisplay=!isNot!==!value,isInitial=!savedNodes,childContext;if(!renderOnEveryChange&&shouldDisplay===didDisplayOnLastUpdate){return;}\nif(needAsyncContext){bindingContext=ko.bindingEvent.startPossiblyAsyncContentBinding(element,bindingContext);}\nif(shouldDisplay){if(!isWith||renderOnEveryChange){contextOptions['dataDependency']=ko.computedContext.computed();}\nif(isWith){childContext=bindingContext['createChildContext'](typeof value==\"function\"?value:valueAccessor,contextOptions);}else if(ko.computedContext.getDependenciesCount()){childContext=bindingContext['extend'](null,contextOptions);}else{childContext=bindingContext;}}\nif(isInitial&&ko.computedContext.getDependenciesCount()){savedNodes=ko.utils.cloneNodes(ko.virtualElements.childNodes(element),true);}\nif(shouldDisplay){if(!isInitial){ko.virtualElements.setDomNodeChildren(element,ko.utils.cloneNodes(savedNodes));}\nko.applyBindingsToDescendants(childContext,element);}else{ko.virtualElements.emptyNode(element);if(!completeOnRender){ko.bindingEvent.notify(element,ko.bindingEvent.childrenComplete);}}\ndidDisplayOnLastUpdate=shouldDisplay;},null,{disposeWhenNodeIsRemoved:element});return{'controlsDescendantBindings':true};}};ko.expressionRewriting.bindingRewriteValidators[bindingKey]=false;ko.virtualElements.allowedBindings[bindingKey]=true;}\nmakeWithIfBinding('if');makeWithIfBinding('ifnot',false,true);makeWithIfBinding('with',true);})();ko.bindingHandlers['let']={'init':function(element,valueAccessor,allBindings,viewModel,bindingContext){var innerContext=bindingContext['extend'](valueAccessor);ko.applyBindingsToDescendants(innerContext,element);return{'controlsDescendantBindings':true};}};ko.virtualElements.allowedBindings['let']=true;var captionPlaceholder={};ko.bindingHandlers['options']={'init':function(element){if(ko.utils.tagNameLower(element)!==\"select\")\nthrow new Error(\"options binding applies only to SELECT elements\");while(element.length>0){element.remove(0);}\nreturn{'controlsDescendantBindings':true};},'update':function(element,valueAccessor,allBindings){function selectedOptions(){return ko.utils.arrayFilter(element.options,function(node){return node.selected;});}\nvar selectWasPreviouslyEmpty=element.length==0,multiple=element.multiple,previousScrollTop=(!selectWasPreviouslyEmpty&&multiple)?element.scrollTop:null,unwrappedArray=ko.utils.unwrapObservable(valueAccessor()),valueAllowUnset=allBindings.get('valueAllowUnset')&&allBindings['has']('value'),includeDestroyed=allBindings.get('optionsIncludeDestroyed'),arrayToDomNodeChildrenOptions={},captionValue,filteredArray,previousSelectedValues=[];if(!valueAllowUnset){if(multiple){previousSelectedValues=ko.utils.arrayMap(selectedOptions(),ko.selectExtensions.readValue);}else if(element.selectedIndex>=0){previousSelectedValues.push(ko.selectExtensions.readValue(element.options[element.selectedIndex]));}}\nif(unwrappedArray){if(typeof unwrappedArray.length==\"undefined\")\nunwrappedArray=[unwrappedArray];filteredArray=ko.utils.arrayFilter(unwrappedArray,function(item){return includeDestroyed||item===undefined||item===null||!ko.utils.unwrapObservable(item['_destroy']);});if(allBindings['has']('optionsCaption')){captionValue=ko.utils.unwrapObservable(allBindings.get('optionsCaption'));if(captionValue!==null&&captionValue!==undefined){filteredArray.unshift(captionPlaceholder);}}}else{}\nfunction applyToObject(object,predicate,defaultValue){var predicateType=typeof predicate;if(predicateType==\"function\")\nreturn predicate(object);else if(predicateType==\"string\")\nreturn object[predicate];else\nreturn defaultValue;}\nvar itemUpdate=false;function optionForArrayItem(arrayEntry,index,oldOptions){if(oldOptions.length){previousSelectedValues=!valueAllowUnset&&oldOptions[0].selected?[ko.selectExtensions.readValue(oldOptions[0])]:[];itemUpdate=true;}\nvar option=element.ownerDocument.createElement(\"option\");if(arrayEntry===captionPlaceholder){ko.utils.setTextContent(option,allBindings.get('optionsCaption'));ko.selectExtensions.writeValue(option,undefined);}else{var optionValue=applyToObject(arrayEntry,allBindings.get('optionsValue'),arrayEntry);ko.selectExtensions.writeValue(option,ko.utils.unwrapObservable(optionValue));var optionText=applyToObject(arrayEntry,allBindings.get('optionsText'),optionValue);ko.utils.setTextContent(option,optionText);}\nreturn[option];}\narrayToDomNodeChildrenOptions['beforeRemove']=function(option){element.removeChild(option);};function setSelectionCallback(arrayEntry,newOptions){if(itemUpdate&&valueAllowUnset){ko.bindingEvent.notify(element,ko.bindingEvent.childrenComplete);}else if(previousSelectedValues.length){var isSelected=ko.utils.arrayIndexOf(previousSelectedValues,ko.selectExtensions.readValue(newOptions[0]))>=0;ko.utils.setOptionNodeSelectionState(newOptions[0],isSelected);if(itemUpdate&&!isSelected){ko.dependencyDetection.ignore(ko.utils.triggerEvent,null,[element,\"change\"]);}}}\nvar callback=setSelectionCallback;if(allBindings['has']('optionsAfterRender')&&typeof allBindings.get('optionsAfterRender')==\"function\"){callback=function(arrayEntry,newOptions){setSelectionCallback(arrayEntry,newOptions);ko.dependencyDetection.ignore(allBindings.get('optionsAfterRender'),null,[newOptions[0],arrayEntry!==captionPlaceholder?arrayEntry:undefined]);}}\nko.utils.setDomNodeChildrenFromArrayMapping(element,filteredArray,optionForArrayItem,arrayToDomNodeChildrenOptions,callback);if(!valueAllowUnset){var selectionChanged;if(multiple){selectionChanged=previousSelectedValues.length&&selectedOptions().length<previousSelectedValues.length;}else{selectionChanged=(previousSelectedValues.length&&element.selectedIndex>=0)?(ko.selectExtensions.readValue(element.options[element.selectedIndex])!==previousSelectedValues[0]):(previousSelectedValues.length||element.selectedIndex>=0);}\nif(selectionChanged){ko.dependencyDetection.ignore(ko.utils.triggerEvent,null,[element,\"change\"]);}}\nif(valueAllowUnset||ko.computedContext.isInitial()){ko.bindingEvent.notify(element,ko.bindingEvent.childrenComplete);}\nko.utils.ensureSelectElementIsRenderedCorrectly(element);if(previousScrollTop&&Math.abs(previousScrollTop-element.scrollTop)>20)\nelement.scrollTop=previousScrollTop;}};ko.bindingHandlers['options'].optionValueDomDataKey=ko.utils.domData.nextKey();ko.bindingHandlers['selectedOptions']={'init':function(element,valueAccessor,allBindings){function updateFromView(){var value=valueAccessor(),valueToWrite=[];ko.utils.arrayForEach(element.getElementsByTagName(\"option\"),function(node){if(node.selected)\nvalueToWrite.push(ko.selectExtensions.readValue(node));});ko.expressionRewriting.writeValueToProperty(value,allBindings,'selectedOptions',valueToWrite);}\nfunction updateFromModel(){var newValue=ko.utils.unwrapObservable(valueAccessor()),previousScrollTop=element.scrollTop;if(newValue&&typeof newValue.length==\"number\"){ko.utils.arrayForEach(element.getElementsByTagName(\"option\"),function(node){var isSelected=ko.utils.arrayIndexOf(newValue,ko.selectExtensions.readValue(node))>=0;if(node.selected!=isSelected){ko.utils.setOptionNodeSelectionState(node,isSelected);}});}\nelement.scrollTop=previousScrollTop;}\nif(ko.utils.tagNameLower(element)!=\"select\"){throw new Error(\"selectedOptions binding applies only to SELECT elements\");}\nvar updateFromModelComputed;ko.bindingEvent.subscribe(element,ko.bindingEvent.childrenComplete,function(){if(!updateFromModelComputed){ko.utils.registerEventHandler(element,\"change\",updateFromView);updateFromModelComputed=ko.computed(updateFromModel,null,{disposeWhenNodeIsRemoved:element});}else{updateFromView();}},null,{'notifyImmediately':true});},'update':function(){}};ko.expressionRewriting.twoWayBindings['selectedOptions']=true;ko.bindingHandlers['style']={'update':function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor()||{});ko.utils.objectForEach(value,function(styleName,styleValue){styleValue=ko.utils.unwrapObservable(styleValue);if(styleValue===null||styleValue===undefined||styleValue===false){styleValue=\"\";}\nif(jQueryInstance){jQueryInstance(element)['css'](styleName,styleValue);}else if(/^--/.test(styleName)){element.style.setProperty(styleName,styleValue);}else{styleName=styleName.replace(/-(\\w)/g,function(all,letter){return letter.toUpperCase();});var previousStyle=element.style[styleName];element.style[styleName]=styleValue;if(styleValue!==previousStyle&&element.style[styleName]==previousStyle&&!isNaN(styleValue)){element.style[styleName]=styleValue+\"px\";}}});}};ko.bindingHandlers['submit']={'init':function(element,valueAccessor,allBindings,viewModel,bindingContext){if(typeof valueAccessor()!=\"function\")\nthrow new Error(\"The value for a submit binding must be a function\");ko.utils.registerEventHandler(element,\"submit\",function(event){var handlerReturnValue;var value=valueAccessor();try{handlerReturnValue=value.call(bindingContext['$data'],element);}\nfinally{if(handlerReturnValue!==true){if(event.preventDefault)\nevent.preventDefault();else\nevent.returnValue=false;}}});}};ko.bindingHandlers['text']={'init':function(){return{'controlsDescendantBindings':true};},'update':function(element,valueAccessor){ko.utils.setTextContent(element,valueAccessor());}};ko.virtualElements.allowedBindings['text']=true;(function(){if(window&&window.navigator){var parseVersion=function(matches){if(matches){return parseFloat(matches[1]);}};var userAgent=window.navigator.userAgent,operaVersion,chromeVersion,safariVersion,firefoxVersion,ieVersion,edgeVersion;(operaVersion=window.opera&&window.opera.version&&parseInt(window.opera.version()))||(edgeVersion=parseVersion(userAgent.match(/Edge\\/([^ ]+)$/)))||(chromeVersion=parseVersion(userAgent.match(/Chrome\\/([^ ]+)/)))||(safariVersion=parseVersion(userAgent.match(/Version\\/([^ ]+) Safari/)))||(firefoxVersion=parseVersion(userAgent.match(/Firefox\\/([^ ]+)/)))||(ieVersion=ko.utils.ieVersion||parseVersion(userAgent.match(/MSIE ([^ ]+)/)))||(ieVersion=parseVersion(userAgent.match(/rv:([^ )]+)/)));}\nif(ieVersion>=8&&ieVersion<10){var selectionChangeRegisteredName=ko.utils.domData.nextKey(),selectionChangeHandlerName=ko.utils.domData.nextKey();var selectionChangeHandler=function(event){var target=this.activeElement,handler=target&&ko.utils.domData.get(target,selectionChangeHandlerName);if(handler){handler(event);}};var registerForSelectionChangeEvent=function(element,handler){var ownerDoc=element.ownerDocument;if(!ko.utils.domData.get(ownerDoc,selectionChangeRegisteredName)){ko.utils.domData.set(ownerDoc,selectionChangeRegisteredName,true);ko.utils.registerEventHandler(ownerDoc,'selectionchange',selectionChangeHandler);}\nko.utils.domData.set(element,selectionChangeHandlerName,handler);};}\nko.bindingHandlers['textInput']={'init':function(element,valueAccessor,allBindings){var previousElementValue=element.value,timeoutHandle,elementValueBeforeEvent;var updateModel=function(event){clearTimeout(timeoutHandle);elementValueBeforeEvent=timeoutHandle=undefined;var elementValue=element.value;if(previousElementValue!==elementValue){if(DEBUG&&event)element['_ko_textInputProcessedEvent']=event.type;previousElementValue=elementValue;ko.expressionRewriting.writeValueToProperty(valueAccessor(),allBindings,'textInput',elementValue);}};var deferUpdateModel=function(event){if(!timeoutHandle){elementValueBeforeEvent=element.value;var handler=DEBUG?updateModel.bind(element,{type:event.type}):updateModel;timeoutHandle=ko.utils.setTimeout(handler,4);}};var ieUpdateModel=ko.utils.ieVersion==9?deferUpdateModel:updateModel,ourUpdate=false;var updateView=function(){var modelValue=ko.utils.unwrapObservable(valueAccessor());if(modelValue===null||modelValue===undefined){modelValue='';}\nif(elementValueBeforeEvent!==undefined&&modelValue===elementValueBeforeEvent){ko.utils.setTimeout(updateView,4);return;}\nif(element.value!==modelValue){ourUpdate=true;element.value=modelValue;ourUpdate=false;previousElementValue=element.value;}};var onEvent=function(event,handler){ko.utils.registerEventHandler(element,event,handler);};if(DEBUG&&ko.bindingHandlers['textInput']['_forceUpdateOn']){ko.utils.arrayForEach(ko.bindingHandlers['textInput']['_forceUpdateOn'],function(eventName){if(eventName.slice(0,5)=='after'){onEvent(eventName.slice(5),deferUpdateModel);}else{onEvent(eventName,updateModel);}});}else{if(ieVersion){onEvent('keypress',updateModel);}\nif(ieVersion<11){onEvent('propertychange',function(event){if(!ourUpdate&&event.propertyName==='value'){ieUpdateModel(event);}});}\nif(ieVersion==8){onEvent('keyup',updateModel);onEvent('keydown',updateModel);}\nif(registerForSelectionChangeEvent){registerForSelectionChangeEvent(element,ieUpdateModel);onEvent('dragend',deferUpdateModel);}\nif(!ieVersion||ieVersion>=9){onEvent('input',ieUpdateModel);}\nif(safariVersion<5&&ko.utils.tagNameLower(element)===\"textarea\"){onEvent('keydown',deferUpdateModel);onEvent('paste',deferUpdateModel);onEvent('cut',deferUpdateModel);}else if(operaVersion<11){onEvent('keydown',deferUpdateModel);}else if(firefoxVersion<4.0){onEvent('DOMAutoComplete',updateModel);onEvent('dragdrop',updateModel);onEvent('drop',updateModel);}else if(edgeVersion&&element.type===\"number\"){onEvent('keydown',deferUpdateModel);}}\nonEvent('change',updateModel);onEvent('blur',updateModel);ko.computed(updateView,null,{disposeWhenNodeIsRemoved:element});}};ko.expressionRewriting.twoWayBindings['textInput']=true;ko.bindingHandlers['textinput']={'preprocess':function(value,name,addBinding){addBinding('textInput',value);}};})();ko.bindingHandlers['uniqueName']={'init':function(element,valueAccessor){if(valueAccessor()){var name=\"ko_unique_\"+(++ko.bindingHandlers['uniqueName'].currentIndex);ko.utils.setElementName(element,name);}}};ko.bindingHandlers['uniqueName'].currentIndex=0;ko.bindingHandlers['using']={'init':function(element,valueAccessor,allBindings,viewModel,bindingContext){var options;if(allBindings['has']('as')){options={'as':allBindings.get('as'),'noChildContext':allBindings.get('noChildContext')};}\nvar innerContext=bindingContext['createChildContext'](valueAccessor,options);ko.applyBindingsToDescendants(innerContext,element);return{'controlsDescendantBindings':true};}};ko.virtualElements.allowedBindings['using']=true;ko.bindingHandlers['value']={'init':function(element,valueAccessor,allBindings){var tagName=ko.utils.tagNameLower(element),isInputElement=tagName==\"input\";if(isInputElement&&(element.type==\"checkbox\"||element.type==\"radio\")){ko.applyBindingAccessorsToNode(element,{'checkedValue':valueAccessor});return;}\nvar eventsToCatch=[];var requestedEventsToCatch=allBindings.get(\"valueUpdate\");var propertyChangedFired=false;var elementValueBeforeEvent=null;if(requestedEventsToCatch){if(typeof requestedEventsToCatch==\"string\"){eventsToCatch=[requestedEventsToCatch];}else{eventsToCatch=ko.utils.arrayGetDistinctValues(requestedEventsToCatch);}\nko.utils.arrayRemoveItem(eventsToCatch,\"change\");}\nvar valueUpdateHandler=function(){elementValueBeforeEvent=null;propertyChangedFired=false;var modelValue=valueAccessor();var elementValue=ko.selectExtensions.readValue(element);ko.expressionRewriting.writeValueToProperty(modelValue,allBindings,'value',elementValue);}\nvar ieAutoCompleteHackNeeded=ko.utils.ieVersion&&isInputElement&&element.type==\"text\"&&element.autocomplete!=\"off\"&&(!element.form||element.form.autocomplete!=\"off\");if(ieAutoCompleteHackNeeded&&ko.utils.arrayIndexOf(eventsToCatch,\"propertychange\")==-1){ko.utils.registerEventHandler(element,\"propertychange\",function(){propertyChangedFired=true});ko.utils.registerEventHandler(element,\"focus\",function(){propertyChangedFired=false});ko.utils.registerEventHandler(element,\"blur\",function(){if(propertyChangedFired){valueUpdateHandler();}});}\nko.utils.arrayForEach(eventsToCatch,function(eventName){var handler=valueUpdateHandler;if(ko.utils.stringStartsWith(eventName,\"after\")){handler=function(){elementValueBeforeEvent=ko.selectExtensions.readValue(element);ko.utils.setTimeout(valueUpdateHandler,0);};eventName=eventName.substring(\"after\".length);}\nko.utils.registerEventHandler(element,eventName,handler);});var updateFromModel;if(isInputElement&&element.type==\"file\"){updateFromModel=function(){var newValue=ko.utils.unwrapObservable(valueAccessor());if(newValue===null||newValue===undefined||newValue===\"\"){element.value=\"\";}else{ko.dependencyDetection.ignore(valueUpdateHandler);}}}else{updateFromModel=function(){var newValue=ko.utils.unwrapObservable(valueAccessor());var elementValue=ko.selectExtensions.readValue(element);if(elementValueBeforeEvent!==null&&newValue===elementValueBeforeEvent){ko.utils.setTimeout(updateFromModel,0);return;}\nvar valueHasChanged=newValue!==elementValue;if(valueHasChanged||elementValue===undefined){if(tagName===\"select\"){var allowUnset=allBindings.get('valueAllowUnset');ko.selectExtensions.writeValue(element,newValue,allowUnset);if(!allowUnset&&newValue!==ko.selectExtensions.readValue(element)){ko.dependencyDetection.ignore(valueUpdateHandler);}}else{ko.selectExtensions.writeValue(element,newValue);}}};}\nif(tagName===\"select\"){var updateFromModelComputed;ko.bindingEvent.subscribe(element,ko.bindingEvent.childrenComplete,function(){if(!updateFromModelComputed){ko.utils.registerEventHandler(element,\"change\",valueUpdateHandler);updateFromModelComputed=ko.computed(updateFromModel,null,{disposeWhenNodeIsRemoved:element});}else if(allBindings.get('valueAllowUnset')){updateFromModel();}else{valueUpdateHandler();}},null,{'notifyImmediately':true});}else{ko.utils.registerEventHandler(element,\"change\",valueUpdateHandler);ko.computed(updateFromModel,null,{disposeWhenNodeIsRemoved:element});}},'update':function(){}};ko.expressionRewriting.twoWayBindings['value']=true;ko.bindingHandlers['visible']={'update':function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor());var isCurrentlyVisible=!(element.style.display==\"none\");if(value&&!isCurrentlyVisible)\nelement.style.display=\"\";else if((!value)&&isCurrentlyVisible)\nelement.style.display=\"none\";}};ko.bindingHandlers['hidden']={'update':function(element,valueAccessor){ko.bindingHandlers['visible']['update'](element,function(){return!ko.utils.unwrapObservable(valueAccessor())});}};makeEventHandlerShortcut('click');ko.templateEngine=function(){};ko.templateEngine.prototype['renderTemplateSource']=function(templateSource,bindingContext,options,templateDocument){throw new Error(\"Override renderTemplateSource\");};ko.templateEngine.prototype['createJavaScriptEvaluatorBlock']=function(script){throw new Error(\"Override createJavaScriptEvaluatorBlock\");};ko.templateEngine.prototype['makeTemplateSource']=function(template,templateDocument){if(typeof template==\"string\"){templateDocument=templateDocument||document;var elem=templateDocument.getElementById(template);if(!elem)\nthrow new Error(\"Cannot find template with ID \"+template);return new ko.templateSources.domElement(elem);}else if((template.nodeType==1)||(template.nodeType==8)){return new ko.templateSources.anonymousTemplate(template);}else\nthrow new Error(\"Unknown template type: \"+template);};ko.templateEngine.prototype['renderTemplate']=function(template,bindingContext,options,templateDocument){var templateSource=this['makeTemplateSource'](template,templateDocument);return this['renderTemplateSource'](templateSource,bindingContext,options,templateDocument);};ko.templateEngine.prototype['isTemplateRewritten']=function(template,templateDocument){if(this['allowTemplateRewriting']===false)\nreturn true;return this['makeTemplateSource'](template,templateDocument)['data'](\"isRewritten\");};ko.templateEngine.prototype['rewriteTemplate']=function(template,rewriterCallback,templateDocument){var templateSource=this['makeTemplateSource'](template,templateDocument);var rewritten=rewriterCallback(templateSource['text']());templateSource['text'](rewritten);templateSource['data'](\"isRewritten\",true);};ko.exportSymbol('templateEngine',ko.templateEngine);ko.templateRewriting=(function(){var memoizeDataBindingAttributeSyntaxRegex=/(<([a-z]+\\d*)(?:\\s+(?!data-bind\\s*=\\s*)[a-z0-9\\-]+(?:=(?:\\\"[^\\\"]*\\\"|\\'[^\\']*\\'|[^>]*))?)*\\s+)data-bind\\s*=\\s*([\"'])([\\s\\S]*?)\\3/gi;var memoizeVirtualContainerBindingSyntaxRegex=/<!--\\s*ko\\b\\s*([\\s\\S]*?)\\s*-->/g;function validateDataBindValuesForRewriting(keyValueArray){var allValidators=ko.expressionRewriting.bindingRewriteValidators;for(var i=0;i<keyValueArray.length;i++){var key=keyValueArray[i]['key'];if(Object.prototype.hasOwnProperty.call(allValidators,key)){var validator=allValidators[key];if(typeof validator===\"function\"){var possibleErrorMessage=validator(keyValueArray[i]['value']);if(possibleErrorMessage)\nthrow new Error(possibleErrorMessage);}else if(!validator){throw new Error(\"This template engine does not support the '\"+key+\"' binding within its templates\");}}}}\nfunction constructMemoizedTagReplacement(dataBindAttributeValue,tagToRetain,nodeName,templateEngine){var dataBindKeyValueArray=ko.expressionRewriting.parseObjectLiteral(dataBindAttributeValue);validateDataBindValuesForRewriting(dataBindKeyValueArray);var rewrittenDataBindAttributeValue=ko.expressionRewriting.preProcessBindings(dataBindKeyValueArray,{'valueAccessors':true});var applyBindingsToNextSiblingScript=\"ko.__tr_ambtns(function($context,$element){return(function(){return{ \"+rewrittenDataBindAttributeValue+\" } })()},'\"+nodeName.toLowerCase()+\"')\";return templateEngine['createJavaScriptEvaluatorBlock'](applyBindingsToNextSiblingScript)+tagToRetain;}\nreturn{ensureTemplateIsRewritten:function(template,templateEngine,templateDocument){if(!templateEngine['isTemplateRewritten'](template,templateDocument))\ntemplateEngine['rewriteTemplate'](template,function(htmlString){return ko.templateRewriting.memoizeBindingAttributeSyntax(htmlString,templateEngine);},templateDocument);},memoizeBindingAttributeSyntax:function(htmlString,templateEngine){return htmlString.replace(memoizeDataBindingAttributeSyntaxRegex,function(){return constructMemoizedTagReplacement(arguments[4],arguments[1],arguments[2],templateEngine);}).replace(memoizeVirtualContainerBindingSyntaxRegex,function(){return constructMemoizedTagReplacement(arguments[1],\"<!-- ko -->\",\"#comment\",templateEngine);});},applyMemoizedBindingsToNextSibling:function(bindings,nodeName){return ko.memoization.memoize(function(domNode,bindingContext){var nodeToBind=domNode.nextSibling;if(nodeToBind&&nodeToBind.nodeName.toLowerCase()===nodeName){ko.applyBindingAccessorsToNode(nodeToBind,bindings,bindingContext);}});}}})();ko.exportSymbol('__tr_ambtns',ko.templateRewriting.applyMemoizedBindingsToNextSibling);(function(){ko.templateSources={};var templateScript=1,templateTextArea=2,templateTemplate=3,templateElement=4;ko.templateSources.domElement=function(element){this.domElement=element;if(element){var tagNameLower=ko.utils.tagNameLower(element);this.templateType=tagNameLower===\"script\"?templateScript:tagNameLower===\"textarea\"?templateTextArea:tagNameLower==\"template\"&&element.content&&element.content.nodeType===11?templateTemplate:templateElement;}}\nko.templateSources.domElement.prototype['text']=function(){var elemContentsProperty=this.templateType===templateScript?\"text\":this.templateType===templateTextArea?\"value\":\"innerHTML\";if(arguments.length==0){return this.domElement[elemContentsProperty];}else{var valueToWrite=arguments[0];if(elemContentsProperty===\"innerHTML\")\nko.utils.setHtml(this.domElement,valueToWrite);else\nthis.domElement[elemContentsProperty]=valueToWrite;}};var dataDomDataPrefix=ko.utils.domData.nextKey()+\"_\";ko.templateSources.domElement.prototype['data']=function(key){if(arguments.length===1){return ko.utils.domData.get(this.domElement,dataDomDataPrefix+key);}else{ko.utils.domData.set(this.domElement,dataDomDataPrefix+key,arguments[1]);}};var templatesDomDataKey=ko.utils.domData.nextKey();function getTemplateDomData(element){return ko.utils.domData.get(element,templatesDomDataKey)||{};}\nfunction setTemplateDomData(element,data){ko.utils.domData.set(element,templatesDomDataKey,data);}\nko.templateSources.domElement.prototype['nodes']=function(){var element=this.domElement;if(arguments.length==0){var templateData=getTemplateDomData(element),nodes=templateData.containerData||(this.templateType===templateTemplate?element.content:this.templateType===templateElement?element:undefined);if(!nodes||templateData.alwaysCheckText){var text=this['text']();if(text&&text!==templateData.textData){nodes=ko.utils.parseHtmlForTemplateNodes(text,element.ownerDocument);setTemplateDomData(element,{containerData:nodes,textData:text,alwaysCheckText:true});}}\nreturn nodes;}else{var valueToWrite=arguments[0];if(this.templateType!==undefined){this['text'](\"\");}\nsetTemplateDomData(element,{containerData:valueToWrite});}};ko.templateSources.anonymousTemplate=function(element){this.domElement=element;}\nko.templateSources.anonymousTemplate.prototype=new ko.templateSources.domElement();ko.templateSources.anonymousTemplate.prototype.constructor=ko.templateSources.anonymousTemplate;ko.templateSources.anonymousTemplate.prototype['text']=function(){if(arguments.length==0){var templateData=getTemplateDomData(this.domElement);if(templateData.textData===undefined&&templateData.containerData)\ntemplateData.textData=templateData.containerData.innerHTML;return templateData.textData;}else{var valueToWrite=arguments[0];setTemplateDomData(this.domElement,{textData:valueToWrite});}};ko.exportSymbol('templateSources',ko.templateSources);ko.exportSymbol('templateSources.domElement',ko.templateSources.domElement);ko.exportSymbol('templateSources.anonymousTemplate',ko.templateSources.anonymousTemplate);})();(function(){var _templateEngine;ko.setTemplateEngine=function(templateEngine){if((templateEngine!=undefined)&&!(templateEngine instanceof ko.templateEngine))\nthrow new Error(\"templateEngine must inherit from ko.templateEngine\");_templateEngine=templateEngine;}\nfunction invokeForEachNodeInContinuousRange(firstNode,lastNode,action){var node,nextInQueue=firstNode,firstOutOfRangeNode=ko.virtualElements.nextSibling(lastNode);while(nextInQueue&&((node=nextInQueue)!==firstOutOfRangeNode)){nextInQueue=ko.virtualElements.nextSibling(node);action(node,nextInQueue);}}\nfunction activateBindingsOnContinuousNodeArray(continuousNodeArray,bindingContext){if(continuousNodeArray.length){var firstNode=continuousNodeArray[0],lastNode=continuousNodeArray[continuousNodeArray.length-1],parentNode=firstNode.parentNode,provider=ko.bindingProvider['instance'],preprocessNode=provider['preprocessNode'];if(preprocessNode){invokeForEachNodeInContinuousRange(firstNode,lastNode,function(node,nextNodeInRange){var nodePreviousSibling=node.previousSibling;var newNodes=preprocessNode.call(provider,node);if(newNodes){if(node===firstNode)\nfirstNode=newNodes[0]||nextNodeInRange;if(node===lastNode)\nlastNode=newNodes[newNodes.length-1]||nodePreviousSibling;}});continuousNodeArray.length=0;if(!firstNode){return;}\nif(firstNode===lastNode){continuousNodeArray.push(firstNode);}else{continuousNodeArray.push(firstNode,lastNode);ko.utils.fixUpContinuousNodeArray(continuousNodeArray,parentNode);}}\ninvokeForEachNodeInContinuousRange(firstNode,lastNode,function(node){if(node.nodeType===1||node.nodeType===8)\nko.applyBindings(bindingContext,node);});invokeForEachNodeInContinuousRange(firstNode,lastNode,function(node){if(node.nodeType===1||node.nodeType===8)\nko.memoization.unmemoizeDomNodeAndDescendants(node,[bindingContext]);});ko.utils.fixUpContinuousNodeArray(continuousNodeArray,parentNode);}}\nfunction getFirstNodeFromPossibleArray(nodeOrNodeArray){return nodeOrNodeArray.nodeType?nodeOrNodeArray:nodeOrNodeArray.length>0?nodeOrNodeArray[0]:null;}\nfunction executeTemplate(targetNodeOrNodeArray,renderMode,template,bindingContext,options){options=options||{};var firstTargetNode=targetNodeOrNodeArray&&getFirstNodeFromPossibleArray(targetNodeOrNodeArray);var templateDocument=(firstTargetNode||template||{}).ownerDocument;var templateEngineToUse=(options['templateEngine']||_templateEngine);ko.templateRewriting.ensureTemplateIsRewritten(template,templateEngineToUse,templateDocument);var renderedNodesArray=templateEngineToUse['renderTemplate'](template,bindingContext,options,templateDocument);if((typeof renderedNodesArray.length!=\"number\")||(renderedNodesArray.length>0&&typeof renderedNodesArray[0].nodeType!=\"number\"))\nthrow new Error(\"Template engine must return an array of DOM nodes\");var haveAddedNodesToParent=false;switch(renderMode){case\"replaceChildren\":ko.virtualElements.setDomNodeChildren(targetNodeOrNodeArray,renderedNodesArray);haveAddedNodesToParent=true;break;case\"replaceNode\":ko.utils.replaceDomNodes(targetNodeOrNodeArray,renderedNodesArray);haveAddedNodesToParent=true;break;case\"ignoreTargetNode\":break;default:throw new Error(\"Unknown renderMode: \"+renderMode);}\nif(haveAddedNodesToParent){activateBindingsOnContinuousNodeArray(renderedNodesArray,bindingContext);if(options['afterRender']){ko.dependencyDetection.ignore(options['afterRender'],null,[renderedNodesArray,bindingContext[options['as']||'$data']]);}\nif(renderMode==\"replaceChildren\"){ko.bindingEvent.notify(targetNodeOrNodeArray,ko.bindingEvent.childrenComplete);}}\nreturn renderedNodesArray;}\nfunction resolveTemplateName(template,data,context){if(ko.isObservable(template)){return template();}else if(typeof template==='function'){return template(data,context);}else{return template;}}\nko.renderTemplate=function(template,dataOrBindingContext,options,targetNodeOrNodeArray,renderMode){options=options||{};if((options['templateEngine']||_templateEngine)==undefined)\nthrow new Error(\"Set a template engine before calling renderTemplate\");renderMode=renderMode||\"replaceChildren\";if(targetNodeOrNodeArray){var firstTargetNode=getFirstNodeFromPossibleArray(targetNodeOrNodeArray);var whenToDispose=function(){return(!firstTargetNode)||!ko.utils.domNodeIsAttachedToDocument(firstTargetNode);};var activelyDisposeWhenNodeIsRemoved=(firstTargetNode&&renderMode==\"replaceNode\")?firstTargetNode.parentNode:firstTargetNode;return ko.dependentObservable(function(){var bindingContext=(dataOrBindingContext&&(dataOrBindingContext instanceof ko.bindingContext))?dataOrBindingContext:new ko.bindingContext(dataOrBindingContext,null,null,null,{\"exportDependencies\":true});var templateName=resolveTemplateName(template,bindingContext['$data'],bindingContext),renderedNodesArray=executeTemplate(targetNodeOrNodeArray,renderMode,templateName,bindingContext,options);if(renderMode==\"replaceNode\"){targetNodeOrNodeArray=renderedNodesArray;firstTargetNode=getFirstNodeFromPossibleArray(targetNodeOrNodeArray);}},null,{disposeWhen:whenToDispose,disposeWhenNodeIsRemoved:activelyDisposeWhenNodeIsRemoved});}else{return ko.memoization.memoize(function(domNode){ko.renderTemplate(template,dataOrBindingContext,options,domNode,\"replaceNode\");});}};ko.renderTemplateForEach=function(template,arrayOrObservableArray,options,targetNode,parentBindingContext){var arrayItemContext,asName=options['as'];var executeTemplateForArrayItem=function(arrayValue,index){arrayItemContext=parentBindingContext['createChildContext'](arrayValue,{'as':asName,'noChildContext':options['noChildContext'],'extend':function(context){context['$index']=index;if(asName){context[asName+\"Index\"]=index;}}});var templateName=resolveTemplateName(template,arrayValue,arrayItemContext);return executeTemplate(targetNode,\"ignoreTargetNode\",templateName,arrayItemContext,options);};var activateBindingsCallback=function(arrayValue,addedNodesArray,index){activateBindingsOnContinuousNodeArray(addedNodesArray,arrayItemContext);if(options['afterRender'])\noptions['afterRender'](addedNodesArray,arrayValue);arrayItemContext=null;};var setDomNodeChildrenFromArrayMapping=function(newArray,changeList){ko.dependencyDetection.ignore(ko.utils.setDomNodeChildrenFromArrayMapping,null,[targetNode,newArray,executeTemplateForArrayItem,options,activateBindingsCallback,changeList]);ko.bindingEvent.notify(targetNode,ko.bindingEvent.childrenComplete);};var shouldHideDestroyed=(options['includeDestroyed']===false)||(ko.options['foreachHidesDestroyed']&&!options['includeDestroyed']);if(!shouldHideDestroyed&&!options['beforeRemove']&&ko.isObservableArray(arrayOrObservableArray)){setDomNodeChildrenFromArrayMapping(arrayOrObservableArray.peek());var subscription=arrayOrObservableArray.subscribe(function(changeList){setDomNodeChildrenFromArrayMapping(arrayOrObservableArray(),changeList);},null,\"arrayChange\");subscription.disposeWhenNodeIsRemoved(targetNode);return subscription;}else{return ko.dependentObservable(function(){var unwrappedArray=ko.utils.unwrapObservable(arrayOrObservableArray)||[];if(typeof unwrappedArray.length==\"undefined\")\nunwrappedArray=[unwrappedArray];if(shouldHideDestroyed){unwrappedArray=ko.utils.arrayFilter(unwrappedArray,function(item){return item===undefined||item===null||!ko.utils.unwrapObservable(item['_destroy']);});}\nsetDomNodeChildrenFromArrayMapping(unwrappedArray);},null,{disposeWhenNodeIsRemoved:targetNode});}};var templateComputedDomDataKey=ko.utils.domData.nextKey();function disposeOldComputedAndStoreNewOne(element,newComputed){var oldComputed=ko.utils.domData.get(element,templateComputedDomDataKey);if(oldComputed&&(typeof(oldComputed.dispose)=='function'))\noldComputed.dispose();ko.utils.domData.set(element,templateComputedDomDataKey,(newComputed&&(!newComputed.isActive||newComputed.isActive()))?newComputed:undefined);}\nvar cleanContainerDomDataKey=ko.utils.domData.nextKey();ko.bindingHandlers['template']={'init':function(element,valueAccessor){var bindingValue=ko.utils.unwrapObservable(valueAccessor());if(typeof bindingValue==\"string\"||'name'in bindingValue){ko.virtualElements.emptyNode(element);}else if('nodes'in bindingValue){var nodes=bindingValue['nodes']||[];if(ko.isObservable(nodes)){throw new Error('The \"nodes\" option must be a plain, non-observable array.');}\nvar container=nodes[0]&&nodes[0].parentNode;if(!container||!ko.utils.domData.get(container,cleanContainerDomDataKey)){container=ko.utils.moveCleanedNodesToContainerElement(nodes);ko.utils.domData.set(container,cleanContainerDomDataKey,true);}\nnew ko.templateSources.anonymousTemplate(element)['nodes'](container);}else{var templateNodes=ko.virtualElements.childNodes(element);if(templateNodes.length>0){var container=ko.utils.moveCleanedNodesToContainerElement(templateNodes);new ko.templateSources.anonymousTemplate(element)['nodes'](container);}else{throw new Error(\"Anonymous template defined, but no template content was provided\");}}\nreturn{'controlsDescendantBindings':true};},'update':function(element,valueAccessor,allBindings,viewModel,bindingContext){var value=valueAccessor(),options=ko.utils.unwrapObservable(value),shouldDisplay=true,templateComputed=null,template;if(typeof options==\"string\"){template=value;options={};}else{template='name'in options?options['name']:element;if('if'in options)\nshouldDisplay=ko.utils.unwrapObservable(options['if']);if(shouldDisplay&&'ifnot'in options)\nshouldDisplay=!ko.utils.unwrapObservable(options['ifnot']);if(shouldDisplay&&!template){shouldDisplay=false;}}\nif('foreach'in options){var dataArray=(shouldDisplay&&options['foreach'])||[];templateComputed=ko.renderTemplateForEach(template,dataArray,options,element,bindingContext);}else if(!shouldDisplay){ko.virtualElements.emptyNode(element);}else{var innerBindingContext=bindingContext;if('data'in options){innerBindingContext=bindingContext['createChildContext'](options['data'],{'as':options['as'],'noChildContext':options['noChildContext'],'exportDependencies':true});}\ntemplateComputed=ko.renderTemplate(template,innerBindingContext,options,element);}\ndisposeOldComputedAndStoreNewOne(element,templateComputed);}};ko.expressionRewriting.bindingRewriteValidators['template']=function(bindingValue){var parsedBindingValue=ko.expressionRewriting.parseObjectLiteral(bindingValue);if((parsedBindingValue.length==1)&&parsedBindingValue[0]['unknown'])\nreturn null;if(ko.expressionRewriting.keyValueArrayContainsKey(parsedBindingValue,\"name\"))\nreturn null;return\"This template engine does not support anonymous templates nested within its templates\";};ko.virtualElements.allowedBindings['template']=true;})();ko.exportSymbol('setTemplateEngine',ko.setTemplateEngine);ko.exportSymbol('renderTemplate',ko.renderTemplate);ko.utils.findMovesInArrayComparison=function(left,right,limitFailedCompares){if(left.length&&right.length){var failedCompares,l,r,leftItem,rightItem;for(failedCompares=l=0;(!limitFailedCompares||failedCompares<limitFailedCompares)&&(leftItem=left[l]);++l){for(r=0;rightItem=right[r];++r){if(leftItem['value']===rightItem['value']){leftItem['moved']=rightItem['index'];rightItem['moved']=leftItem['index'];right.splice(r,1);failedCompares=r=0;break;}}\nfailedCompares+=r;}}};ko.utils.compareArrays=(function(){var statusNotInOld='added',statusNotInNew='deleted';function compareArrays(oldArray,newArray,options){options=(typeof options==='boolean')?{'dontLimitMoves':options}:(options||{});oldArray=oldArray||[];newArray=newArray||[];if(oldArray.length<newArray.length)\nreturn compareSmallArrayToBigArray(oldArray,newArray,statusNotInOld,statusNotInNew,options);else\nreturn compareSmallArrayToBigArray(newArray,oldArray,statusNotInNew,statusNotInOld,options);}\nfunction compareSmallArrayToBigArray(smlArray,bigArray,statusNotInSml,statusNotInBig,options){var myMin=Math.min,myMax=Math.max,editDistanceMatrix=[],smlIndex,smlIndexMax=smlArray.length,bigIndex,bigIndexMax=bigArray.length,compareRange=(bigIndexMax-smlIndexMax)||1,maxDistance=smlIndexMax+bigIndexMax+1,thisRow,lastRow,bigIndexMaxForRow,bigIndexMinForRow;for(smlIndex=0;smlIndex<=smlIndexMax;smlIndex++){lastRow=thisRow;editDistanceMatrix.push(thisRow=[]);bigIndexMaxForRow=myMin(bigIndexMax,smlIndex+compareRange);bigIndexMinForRow=myMax(0,smlIndex-1);for(bigIndex=bigIndexMinForRow;bigIndex<=bigIndexMaxForRow;bigIndex++){if(!bigIndex)\nthisRow[bigIndex]=smlIndex+1;else if(!smlIndex)\nthisRow[bigIndex]=bigIndex+1;else if(smlArray[smlIndex-1]===bigArray[bigIndex-1])\nthisRow[bigIndex]=lastRow[bigIndex-1];else{var northDistance=lastRow[bigIndex]||maxDistance;var westDistance=thisRow[bigIndex-1]||maxDistance;thisRow[bigIndex]=myMin(northDistance,westDistance)+1;}}}\nvar editScript=[],meMinusOne,notInSml=[],notInBig=[];for(smlIndex=smlIndexMax,bigIndex=bigIndexMax;smlIndex||bigIndex;){meMinusOne=editDistanceMatrix[smlIndex][bigIndex]-1;if(bigIndex&&meMinusOne===editDistanceMatrix[smlIndex][bigIndex-1]){notInSml.push(editScript[editScript.length]={'status':statusNotInSml,'value':bigArray[--bigIndex],'index':bigIndex});}else if(smlIndex&&meMinusOne===editDistanceMatrix[smlIndex-1][bigIndex]){notInBig.push(editScript[editScript.length]={'status':statusNotInBig,'value':smlArray[--smlIndex],'index':smlIndex});}else{--bigIndex;--smlIndex;if(!options['sparse']){editScript.push({'status':\"retained\",'value':bigArray[bigIndex]});}}}\nko.utils.findMovesInArrayComparison(notInBig,notInSml,!options['dontLimitMoves']&&smlIndexMax*10);return editScript.reverse();}\nreturn compareArrays;})();ko.exportSymbol('utils.compareArrays',ko.utils.compareArrays);(function(){function mapNodeAndRefreshWhenChanged(containerNode,mapping,valueToMap,callbackAfterAddingNodes,index){var mappedNodes=[];var dependentObservable=ko.dependentObservable(function(){var newMappedNodes=mapping(valueToMap,index,ko.utils.fixUpContinuousNodeArray(mappedNodes,containerNode))||[];if(mappedNodes.length>0){ko.utils.replaceDomNodes(mappedNodes,newMappedNodes);if(callbackAfterAddingNodes)\nko.dependencyDetection.ignore(callbackAfterAddingNodes,null,[valueToMap,newMappedNodes,index]);}\nmappedNodes.length=0;ko.utils.arrayPushAll(mappedNodes,newMappedNodes);},null,{disposeWhenNodeIsRemoved:containerNode,disposeWhen:function(){return!ko.utils.anyDomNodeIsAttachedToDocument(mappedNodes);}});return{mappedNodes:mappedNodes,dependentObservable:(dependentObservable.isActive()?dependentObservable:undefined)};}\nvar lastMappingResultDomDataKey=ko.utils.domData.nextKey(),deletedItemDummyValue=ko.utils.domData.nextKey();ko.utils.setDomNodeChildrenFromArrayMapping=function(domNode,array,mapping,options,callbackAfterAddingNodes,editScript){array=array||[];if(typeof array.length==\"undefined\")\narray=[array];options=options||{};var lastMappingResult=ko.utils.domData.get(domNode,lastMappingResultDomDataKey);var isFirstExecution=!lastMappingResult;var newMappingResult=[];var lastMappingResultIndex=0;var currentArrayIndex=0;var nodesToDelete=[];var itemsToMoveFirstIndexes=[];var itemsForBeforeRemoveCallbacks=[];var itemsForMoveCallbacks=[];var itemsForAfterAddCallbacks=[];var mapData;var countWaitingForRemove=0;function itemAdded(value){mapData={arrayEntry:value,indexObservable:ko.observable(currentArrayIndex++)};newMappingResult.push(mapData);if(!isFirstExecution){itemsForAfterAddCallbacks.push(mapData);}}\nfunction itemMovedOrRetained(oldPosition){mapData=lastMappingResult[oldPosition];if(currentArrayIndex!==mapData.indexObservable.peek())\nitemsForMoveCallbacks.push(mapData);mapData.indexObservable(currentArrayIndex++);ko.utils.fixUpContinuousNodeArray(mapData.mappedNodes,domNode);newMappingResult.push(mapData);}\nfunction callCallback(callback,items){if(callback){for(var i=0,n=items.length;i<n;i++){ko.utils.arrayForEach(items[i].mappedNodes,function(node){callback(node,i,items[i].arrayEntry);});}}}\nif(isFirstExecution){ko.utils.arrayForEach(array,itemAdded);}else{if(!editScript||(lastMappingResult&&lastMappingResult['_countWaitingForRemove'])){var lastArray=ko.utils.arrayMap(lastMappingResult,function(x){return x.arrayEntry;}),compareOptions={'dontLimitMoves':options['dontLimitMoves'],'sparse':true};editScript=ko.utils.compareArrays(lastArray,array,compareOptions);}\nfor(var i=0,editScriptItem,movedIndex,itemIndex;editScriptItem=editScript[i];i++){movedIndex=editScriptItem['moved'];itemIndex=editScriptItem['index'];switch(editScriptItem['status']){case\"deleted\":while(lastMappingResultIndex<itemIndex){itemMovedOrRetained(lastMappingResultIndex++);}\nif(movedIndex===undefined){mapData=lastMappingResult[lastMappingResultIndex];if(mapData.dependentObservable){mapData.dependentObservable.dispose();mapData.dependentObservable=undefined;}\nif(ko.utils.fixUpContinuousNodeArray(mapData.mappedNodes,domNode).length){if(options['beforeRemove']){newMappingResult.push(mapData);countWaitingForRemove++;if(mapData.arrayEntry===deletedItemDummyValue){mapData=null;}else{itemsForBeforeRemoveCallbacks.push(mapData);}}\nif(mapData){nodesToDelete.push.apply(nodesToDelete,mapData.mappedNodes);}}}\nlastMappingResultIndex++;break;case\"added\":while(currentArrayIndex<itemIndex){itemMovedOrRetained(lastMappingResultIndex++);}\nif(movedIndex!==undefined){itemsToMoveFirstIndexes.push(newMappingResult.length);itemMovedOrRetained(movedIndex);}else{itemAdded(editScriptItem['value']);}\nbreak;}}\nwhile(currentArrayIndex<array.length){itemMovedOrRetained(lastMappingResultIndex++);}\nnewMappingResult['_countWaitingForRemove']=countWaitingForRemove;}\nko.utils.domData.set(domNode,lastMappingResultDomDataKey,newMappingResult);callCallback(options['beforeMove'],itemsForMoveCallbacks);ko.utils.arrayForEach(nodesToDelete,options['beforeRemove']?ko.cleanNode:ko.removeNode);var i,j,lastNode,nodeToInsert,mappedNodes,activeElement;try{activeElement=domNode.ownerDocument.activeElement;}catch(e){}\nif(itemsToMoveFirstIndexes.length){while((i=itemsToMoveFirstIndexes.shift())!=undefined){mapData=newMappingResult[i];for(lastNode=undefined;i;){if((mappedNodes=newMappingResult[--i].mappedNodes)&&mappedNodes.length){lastNode=mappedNodes[mappedNodes.length-1];break;}}\nfor(j=0;nodeToInsert=mapData.mappedNodes[j];lastNode=nodeToInsert,j++){ko.virtualElements.insertAfter(domNode,nodeToInsert,lastNode);}}}\nfor(i=0;mapData=newMappingResult[i];i++){if(!mapData.mappedNodes)\nko.utils.extend(mapData,mapNodeAndRefreshWhenChanged(domNode,mapping,mapData.arrayEntry,callbackAfterAddingNodes,mapData.indexObservable));for(j=0;nodeToInsert=mapData.mappedNodes[j];lastNode=nodeToInsert,j++){ko.virtualElements.insertAfter(domNode,nodeToInsert,lastNode);}\nif(!mapData.initialized&&callbackAfterAddingNodes){callbackAfterAddingNodes(mapData.arrayEntry,mapData.mappedNodes,mapData.indexObservable);mapData.initialized=true;lastNode=mapData.mappedNodes[mapData.mappedNodes.length-1];}}\nif(activeElement&&domNode.ownerDocument.activeElement!=activeElement){activeElement.focus();}\ncallCallback(options['beforeRemove'],itemsForBeforeRemoveCallbacks);for(i=0;i<itemsForBeforeRemoveCallbacks.length;++i){itemsForBeforeRemoveCallbacks[i].arrayEntry=deletedItemDummyValue;}\ncallCallback(options['afterMove'],itemsForMoveCallbacks);callCallback(options['afterAdd'],itemsForAfterAddCallbacks);}})();ko.exportSymbol('utils.setDomNodeChildrenFromArrayMapping',ko.utils.setDomNodeChildrenFromArrayMapping);ko.nativeTemplateEngine=function(){this['allowTemplateRewriting']=false;}\nko.nativeTemplateEngine.prototype=new ko.templateEngine();ko.nativeTemplateEngine.prototype.constructor=ko.nativeTemplateEngine;ko.nativeTemplateEngine.prototype['renderTemplateSource']=function(templateSource,bindingContext,options,templateDocument){var useNodesIfAvailable=!(ko.utils.ieVersion<9),templateNodesFunc=useNodesIfAvailable?templateSource['nodes']:null,templateNodes=templateNodesFunc?templateSource['nodes']():null;if(templateNodes){return ko.utils.makeArray(templateNodes.cloneNode(true).childNodes);}else{var templateText=templateSource['text']();return ko.utils.parseHtmlFragment(templateText,templateDocument);}};ko.nativeTemplateEngine.instance=new ko.nativeTemplateEngine();ko.setTemplateEngine(ko.nativeTemplateEngine.instance);ko.exportSymbol('nativeTemplateEngine',ko.nativeTemplateEngine);(function(){ko.jqueryTmplTemplateEngine=function(){var jQueryTmplVersion=this.jQueryTmplVersion=(function(){if(!jQueryInstance||!(jQueryInstance['tmpl']))\nreturn 0;try{if(jQueryInstance['tmpl']['tag']['tmpl']['open'].toString().indexOf('__')>=0){return 2;}}catch(ex){}\nreturn 1;})();function ensureHasReferencedJQueryTemplates(){if(jQueryTmplVersion<2)\nthrow new Error(\"Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.\");}\nfunction executeTemplate(compiledTemplate,data,jQueryTemplateOptions){return jQueryInstance['tmpl'](compiledTemplate,data,jQueryTemplateOptions);}\nthis['renderTemplateSource']=function(templateSource,bindingContext,options,templateDocument){templateDocument=templateDocument||document;options=options||{};ensureHasReferencedJQueryTemplates();var precompiled=templateSource['data']('precompiled');if(!precompiled){var templateText=templateSource['text']()||\"\";templateText=\"{{ko_with $item.koBindingContext}}\"+templateText+\"{{/ko_with}}\";precompiled=jQueryInstance['template'](null,templateText);templateSource['data']('precompiled',precompiled);}\nvar data=[bindingContext['$data']];var jQueryTemplateOptions=jQueryInstance['extend']({'koBindingContext':bindingContext},options['templateOptions']);var resultNodes=executeTemplate(precompiled,data,jQueryTemplateOptions);resultNodes['appendTo'](templateDocument.createElement(\"div\"));jQueryInstance['fragments']={};return resultNodes;};this['createJavaScriptEvaluatorBlock']=function(script){return\"{{ko_code ((function() { return \"+script+\" })()) }}\";};this['addTemplate']=function(templateName,templateMarkup){document.write(\"<script type='text/html' id='\"+templateName+\"'>\"+templateMarkup+\"<\"+\"/script>\");};if(jQueryTmplVersion>0){jQueryInstance['tmpl']['tag']['ko_code']={open:\"__.push($1 || '');\"};jQueryInstance['tmpl']['tag']['ko_with']={open:\"with($1) {\",close:\"} \"};}};ko.jqueryTmplTemplateEngine.prototype=new ko.templateEngine();ko.jqueryTmplTemplateEngine.prototype.constructor=ko.jqueryTmplTemplateEngine;var jqueryTmplTemplateEngineInstance=new ko.jqueryTmplTemplateEngine();if(jqueryTmplTemplateEngineInstance.jQueryTmplVersion>0)\nko.setTemplateEngine(jqueryTmplTemplateEngineInstance);ko.exportSymbol('jqueryTmplTemplateEngine',ko.jqueryTmplTemplateEngine);})();}));}());})();","knockoutjs/knockout-es5.min.js":"/*!\n * Knockout ES5 plugin - https://github.com/SteveSanderson/knockout-es5\n * Copyright (c) Steve Sanderson\n * MIT license\n */\n(function(global,undefined){'use strict';var ko;function track(obj,propertyNamesOrSettings){if(!obj||typeof obj!=='object'){throw new Error('When calling ko.track, you must pass an object as the first parameter.');}\nvar propertyNames;if(isPlainObject(propertyNamesOrSettings)){propertyNamesOrSettings.deep=propertyNamesOrSettings.deep||false;propertyNamesOrSettings.fields=propertyNamesOrSettings.fields||Object.getOwnPropertyNames(obj);propertyNamesOrSettings.lazy=propertyNamesOrSettings.lazy||false;wrap(obj,propertyNamesOrSettings.fields,propertyNamesOrSettings);}else{propertyNames=propertyNamesOrSettings||Object.getOwnPropertyNames(obj);wrap(obj,propertyNames,{});}\nreturn obj;}\nvar rFunctionName=/^function\\s*([^\\s(]+)/;function getFunctionName(ctor){if(ctor.name){return ctor.name;}\nreturn(ctor.toString().trim().match(rFunctionName)||[])[1];}\nfunction canTrack(obj){return obj&&typeof obj==='object'&&getFunctionName(obj.constructor)==='Object';}\nfunction createPropertyDescriptor(originalValue,prop,map){var isObservable=ko.isObservable(originalValue);var isArray=!isObservable&&Array.isArray(originalValue);var observable=isObservable?originalValue:isArray?ko.observableArray(originalValue):ko.observable(originalValue);map[prop]=function(){return observable;};if(isArray||(isObservable&&'push'in observable)){notifyWhenPresentOrFutureArrayValuesMutate(ko,observable);}\nreturn{configurable:true,enumerable:true,get:observable,set:ko.isWriteableObservable(observable)?observable:undefined};}\nfunction createLazyPropertyDescriptor(originalValue,prop,map){if(ko.isObservable(originalValue)){return createPropertyDescriptor(originalValue,prop,map);}\nvar observable;function getOrCreateObservable(value,writing){if(observable){return writing?observable(value):observable;}\nif(Array.isArray(value)){observable=ko.observableArray(value);notifyWhenPresentOrFutureArrayValuesMutate(ko,observable);return observable;}\nreturn(observable=ko.observable(value));}\nmap[prop]=function(){return getOrCreateObservable(originalValue);};return{configurable:true,enumerable:true,get:function(){return getOrCreateObservable(originalValue)();},set:function(value){getOrCreateObservable(value,true);}};}\nfunction wrap(obj,props,options){if(!props.length){return;}\nvar allObservablesForObject=getAllObservablesForObject(obj,true);var descriptors={};props.forEach(function(prop){if(prop in allObservablesForObject){return;}\nif(Object.getOwnPropertyDescriptor(obj,prop).configurable===false){return;}\nvar originalValue=obj[prop];descriptors[prop]=(options.lazy?createLazyPropertyDescriptor:createPropertyDescriptor)\n(originalValue,prop,allObservablesForObject);if(options.deep&&canTrack(originalValue)){wrap(originalValue,Object.keys(originalValue),options);}});Object.defineProperties(obj,descriptors);}\nfunction isPlainObject(obj){return!!obj&&typeof obj==='object'&&obj.constructor===Object;}\nvar objectToObservableMap;function getAllObservablesForObject(obj,createIfNotDefined){if(!objectToObservableMap){objectToObservableMap=weakMapFactory();}\nvar result=objectToObservableMap.get(obj);if(!result&&createIfNotDefined){result={};objectToObservableMap.set(obj,result);}\nreturn result;}\nfunction untrack(obj,propertyNames){if(!objectToObservableMap){return;}\nif(arguments.length===1){objectToObservableMap['delete'](obj);}else{var allObservablesForObject=getAllObservablesForObject(obj,false);if(allObservablesForObject){propertyNames.forEach(function(propertyName){delete allObservablesForObject[propertyName];});}}}\nfunction defineComputedProperty(obj,propertyName,evaluatorOrOptions){var ko=this,computedOptions={owner:obj,deferEvaluation:true};if(typeof evaluatorOrOptions==='function'){computedOptions.read=evaluatorOrOptions;}else{if('value'in evaluatorOrOptions){throw new Error('For ko.defineProperty, you must not specify a \"value\" for the property. '+'You must provide a \"get\" function.');}\nif(typeof evaluatorOrOptions.get!=='function'){throw new Error('For ko.defineProperty, the third parameter must be either an evaluator function, '+'or an options object containing a function called \"get\".');}\ncomputedOptions.read=evaluatorOrOptions.get;computedOptions.write=evaluatorOrOptions.set;}\nobj[propertyName]=ko.computed(computedOptions);track.call(ko,obj,[propertyName]);return obj;}\nfunction notifyWhenPresentOrFutureArrayValuesMutate(ko,observable){var watchingArraySubscription=null;ko.computed(function(){if(watchingArraySubscription){watchingArraySubscription.dispose();watchingArraySubscription=null;}\nvar newArrayInstance=observable();if(newArrayInstance instanceof Array){watchingArraySubscription=startWatchingArrayInstance(ko,observable,newArrayInstance);}});}\nfunction startWatchingArrayInstance(ko,observable,arrayInstance){var subscribable=getSubscribableForArray(ko,arrayInstance);return subscribable.subscribe(observable);}\nvar arraySubscribablesMap;function getSubscribableForArray(ko,arrayInstance){if(!arraySubscribablesMap){arraySubscribablesMap=weakMapFactory();}\nvar subscribable=arraySubscribablesMap.get(arrayInstance);if(!subscribable){subscribable=new ko.subscribable();arraySubscribablesMap.set(arrayInstance,subscribable);var notificationPauseSignal={};wrapStandardArrayMutators(arrayInstance,subscribable,notificationPauseSignal);addKnockoutArrayMutators(ko,arrayInstance,subscribable,notificationPauseSignal);}\nreturn subscribable;}\nfunction wrapStandardArrayMutators(arrayInstance,subscribable,notificationPauseSignal){['pop','push','reverse','shift','sort','splice','unshift'].forEach(function(fnName){var origMutator=arrayInstance[fnName];arrayInstance[fnName]=function(){var result=origMutator.apply(this,arguments);if(notificationPauseSignal.pause!==true){subscribable.notifySubscribers(this);}\nreturn result;};});}\nfunction addKnockoutArrayMutators(ko,arrayInstance,subscribable,notificationPauseSignal){['remove','removeAll','destroy','destroyAll','replace'].forEach(function(fnName){Object.defineProperty(arrayInstance,fnName,{enumerable:false,value:function(){var result;notificationPauseSignal.pause=true;try{result=ko.observableArray.fn[fnName].apply(ko.observableArray(arrayInstance),arguments);}\nfinally{notificationPauseSignal.pause=false;}\nsubscribable.notifySubscribers(arrayInstance);return result;}});});}\nfunction getObservable(obj,propertyName){if(!obj||typeof obj!=='object'){return null;}\nvar allObservablesForObject=getAllObservablesForObject(obj,false);if(allObservablesForObject&&propertyName in allObservablesForObject){return allObservablesForObject[propertyName]();}\nreturn null;}\nfunction isTracked(obj,propertyName){if(!obj||typeof obj!=='object'){return false;}\nvar allObservablesForObject=getAllObservablesForObject(obj,false);return!!allObservablesForObject&&propertyName in allObservablesForObject;}\nfunction valueHasMutated(obj,propertyName){var observable=getObservable(obj,propertyName);if(observable){observable.valueHasMutated();}}\nvar weakMapFactory;function attachToKo(ko){ko.track=track;ko.untrack=untrack;ko.getObservable=getObservable;ko.valueHasMutated=valueHasMutated;ko.defineProperty=defineComputedProperty;ko.es5={getAllObservablesForObject:getAllObservablesForObject,notifyWhenPresentOrFutureArrayValuesMutate:notifyWhenPresentOrFutureArrayValuesMutate,isTracked:isTracked};}\nfunction prepareExports(){if(typeof exports==='object'&&typeof module==='object'){ko=require('knockout');var WM=require('../lib/weakmap');attachToKo(ko);weakMapFactory=function(){return new WM();};module.exports=ko;}else if(typeof define==='function'&&define.amd){define(['knockout'],function(koModule){ko=koModule;attachToKo(koModule);weakMapFactory=function(){return new global.WeakMap();};return koModule;});}else if('ko'in global){ko=global.ko;attachToKo(global.ko);weakMapFactory=function(){return new global.WeakMap();};}}\nprepareExports();})(this);","knockoutjs/knockout-repeat.min.js":"(function(factory){if(typeof define==='function'&&define.amd){define(['knockout'],factory);}else if(typeof exports==='object'){factory(require('knockout'));}else{factory(window.ko);}})(function(ko){if(!ko.virtualElements)\nthrow Error('Repeat requires at least Knockout 2.1');var ko_bindingFlags=ko.bindingFlags||{};var ko_unwrap=ko.utils.unwrapObservable;var koProtoName='__ko_proto__';if(ko.version>=\"3.0.0\"){var provider=ko.bindingProvider.instance,previousPreprocessFn=provider.preprocessNode;provider.preprocessNode=function(node){var newNodes,nodeBinding;if(!previousPreprocessFn||!(newNodes=previousPreprocessFn.call(this,node))){if(node.nodeType===1&&(nodeBinding=node.getAttribute('data-bind'))){if(/^\\s*repeat\\s*:/.test(nodeBinding)){var leadingComment=node.ownerDocument.createComment('ko '+nodeBinding),trailingComment=node.ownerDocument.createComment('/ko');node.parentNode.insertBefore(leadingComment,node);node.parentNode.insertBefore(trailingComment,node.nextSibling);node.removeAttribute('data-bind');newNodes=[leadingComment,node,trailingComment];}}}\nreturn newNodes;};}\nko.virtualElements.allowedBindings.repeat=true;ko.bindingHandlers.repeat={flags:ko_bindingFlags.contentBind|ko_bindingFlags.canUseVirtual,init:function(element,valueAccessor,allBindingsAccessor,xxx,bindingContext){var repeatParam=ko_unwrap(valueAccessor());if(repeatParam&&typeof repeatParam=='object'&&!('length'in repeatParam)){var repeatIndex=repeatParam.index,repeatData=repeatParam.item,repeatStep=repeatParam.step,repeatReversed=repeatParam.reverse,repeatBind=repeatParam.bind,repeatInit=repeatParam.init,repeatUpdate=repeatParam.update;}\nrepeatIndex=repeatIndex||'$index';repeatData=repeatData||ko.bindingHandlers.repeat.itemName||'$item';repeatStep=repeatStep||1;repeatReversed=repeatReversed||false;var parent=element.parentNode,placeholder;if(element.nodeType==8){var childNodes=ko.utils.arrayFilter(ko.virtualElements.childNodes(element),function(node){return node.nodeType==1;});if(childNodes.length!==1){throw Error(\"Repeat binding requires a single element to repeat\");}\nko.virtualElements.emptyNode(element);placeholder=repeatReversed?element:element.nextSibling;element=childNodes[0];}else{var origBindString=element.getAttribute('data-bind');ko.cleanNode(element);element.removeAttribute('data-bind');placeholder=element.ownerDocument.createComment('ko_repeatplaceholder '+origBindString);parent.replaceChild(placeholder,element);}\nif(!repeatBind){repeatBind=element.getAttribute('data-repeat-bind');if(repeatBind){element.removeAttribute('data-repeat-bind');}}\nvar cleanNode=element.cloneNode(true);if(typeof repeatBind==\"string\"){cleanNode.setAttribute('data-bind',repeatBind);repeatBind=null;}\nvar lastRepeatCount=0,notificationObservable=ko.observable(),repeatArray,arrayObservable;if(repeatInit){repeatInit(parent);}\nvar subscribable=ko.computed(function(){function makeArrayItemAccessor(index){var f=function(newValue){var item=repeatArray[index];if(!arguments.length){notificationObservable();return ko_unwrap(item);}\nif(ko.isObservable(item)){item(newValue);}else if(arrayObservable&&arrayObservable.splice){arrayObservable.splice(index,1,newValue);}else{repeatArray[index]=newValue;}\nreturn this;};f[koProtoName]=ko.observable;return f;}\nfunction makeBinding(item,index,context){return repeatArray?function(){return repeatBind.call(bindingContext.$data,item,index,context);}:function(){return repeatBind.call(bindingContext.$data,index,context);}}\nvar paramObservable=valueAccessor(),repeatParam=ko_unwrap(paramObservable),repeatCount=0;if(repeatParam&&typeof repeatParam=='object'){if('length'in repeatParam){repeatArray=repeatParam;repeatCount=repeatArray.length;}else{if('foreach'in repeatParam){repeatArray=ko_unwrap(paramObservable=repeatParam.foreach);if(repeatArray&&typeof repeatArray=='object'&&'length'in repeatArray){repeatCount=repeatArray.length||0;}else{repeatCount=repeatArray||0;repeatArray=null;}}\nif('count'in repeatParam)\nrepeatCount=ko_unwrap(repeatParam.count)||repeatCount;if('limit'in repeatParam)\nrepeatCount=Math.min(repeatCount,ko_unwrap(repeatParam.limit))||repeatCount;}\narrayObservable=repeatArray&&ko.isObservable(paramObservable)?paramObservable:null;}else{repeatCount=repeatParam||0;}\nfor(;lastRepeatCount>repeatCount;lastRepeatCount-=repeatStep){ko.removeNode(repeatReversed?placeholder.nextSibling:placeholder.previousSibling);}\nnotificationObservable.notifySubscribers();for(;lastRepeatCount<repeatCount;lastRepeatCount+=repeatStep){var newNode=cleanNode.cloneNode(true);parent.insertBefore(newNode,repeatReversed?placeholder.nextSibling:placeholder);newNode.setAttribute('data-repeat-index',lastRepeatCount);if(repeatArray&&repeatData=='$data'){var newContext=bindingContext.createChildContext(makeArrayItemAccessor(lastRepeatCount));}else{var newContext=bindingContext.extend();if(repeatArray)\nnewContext[repeatData]=makeArrayItemAccessor(lastRepeatCount);}\nnewContext[repeatIndex]=lastRepeatCount;if(repeatBind){var result=ko.applyBindingsToNode(newNode,makeBinding(newContext[repeatData],lastRepeatCount,newContext),newContext,true),shouldBindDescendants=result&&result.shouldBindDescendants;}\nif(!repeatBind||(result&&shouldBindDescendants!==false)){ko.applyBindings(newContext,newNode);}}\nif(repeatUpdate){repeatUpdate(parent);}},null,{disposeWhenNodeIsRemoved:placeholder});return{controlsDescendantBindings:true,subscribable:subscribable};}};});","knockoutjs/knockout-fast-foreach.min.js":"/*!\n  Knockout Fast Foreach v0.4.1 (2015-07-17T14:06:15.974Z)\n  By: Brian M Hunt (C) 2015\n  License: MIT\n\n  Adds `fastForEach` to `ko.bindingHandlers`.\n*/\n(function(root,factory){if(typeof define==='function'&&define.amd){define(['knockout'],factory);}else if(typeof exports==='object'){module.exports=factory(require('knockout'));}else{root.KnockoutFastForeach=factory(root.ko);}}(this,function(ko){\"use strict\";function isPlainObject(o){return!!o&&typeof o==='object'&&o.constructor===Object;}\nvar commentNodesHaveTextProperty=document&&document.createComment(\"test\").text===\"<!--test-->\";var startCommentRegex=commentNodesHaveTextProperty?/^<!--\\s*ko(?:\\s+([\\s\\S]+))?\\s*-->$/:/^\\s*ko(?:\\s+([\\s\\S]+))?\\s*$/;var supportsDocumentFragment=document&&typeof document.createDocumentFragment===\"function\";function isVirtualNode(node){return(node.nodeType===8)&&startCommentRegex.test(commentNodesHaveTextProperty?node.text:node.nodeValue);}\nfunction makeTemplateNode(sourceNode){var container=document.createElement(\"div\");var parentNode;if(sourceNode.content){parentNode=sourceNode.content;}else if(sourceNode.tagName==='SCRIPT'){parentNode=document.createElement(\"div\");parentNode.innerHTML=sourceNode.text;}else{parentNode=sourceNode;}\nko.utils.arrayForEach(ko.virtualElements.childNodes(parentNode),function(child){if(child){container.insertBefore(child.cloneNode(true),null);}});return container;}\nfunction insertAllAfter(containerNode,nodeOrNodeArrayToInsert,insertAfterNode){var frag,len,i;if(typeof nodeOrNodeArrayToInsert.nodeType!==\"undefined\"&&typeof nodeOrNodeArrayToInsert.length===\"undefined\"){throw new Error(\"Expected a single node or a node array\");}\nif(typeof nodeOrNodeArrayToInsert.nodeType!==\"undefined\"){ko.virtualElements.insertAfter(containerNode,nodeOrNodeArrayToInsert,insertAfterNode);return;}\nif(nodeOrNodeArrayToInsert.length===1){ko.virtualElements.insertAfter(containerNode,nodeOrNodeArrayToInsert[0],insertAfterNode);return;}\nif(supportsDocumentFragment){frag=document.createDocumentFragment();for(i=0,len=nodeOrNodeArrayToInsert.length;i!==len;++i){frag.appendChild(nodeOrNodeArrayToInsert[i]);}\nko.virtualElements.insertAfter(containerNode,frag,insertAfterNode);}else{for(i=nodeOrNodeArrayToInsert.length-1;i>=0;--i){var child=nodeOrNodeArrayToInsert[i];if(!child){return;}\nko.virtualElements.insertAfter(containerNode,child,insertAfterNode);}}}\nfunction valueToChangeAddItem(value,index){return{status:'added',value:value,index:index};}\nfunction isAdditionAdjacentToLast(changeIndex,arrayChanges){return changeIndex>0&&changeIndex<arrayChanges.length&&arrayChanges[changeIndex].status===\"added\"&&arrayChanges[changeIndex-1].status===\"added\"&&arrayChanges[changeIndex-1].index===arrayChanges[changeIndex].index-1;}\nfunction FastForEach(spec){this.element=spec.element;this.container=isVirtualNode(this.element)?this.element.parentNode:this.element;this.$context=spec.$context;this.data=spec.data;this.as=spec.as;this.noContext=spec.noContext;this.templateNode=makeTemplateNode(spec.name?document.getElementById(spec.name).cloneNode(true):spec.element);this.afterQueueFlush=spec.afterQueueFlush;this.beforeQueueFlush=spec.beforeQueueFlush;this.changeQueue=[];this.lastNodesList=[];this.indexesToDelete=[];this.rendering_queued=false;ko.virtualElements.emptyNode(this.element);var primeData=ko.unwrap(this.data);if(primeData.map){this.onArrayChange(primeData.map(valueToChangeAddItem));}\nif(ko.isObservable(this.data)){if(!this.data.indexOf){this.data=this.data.extend({trackArrayChanges:true});}\nthis.changeSubs=this.data.subscribe(this.onArrayChange,this,'arrayChange');}}\nFastForEach.animateFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(cb){return window.setTimeout(cb,1000 / 60);};FastForEach.prototype.dispose=function(){if(this.changeSubs){this.changeSubs.dispose();}};FastForEach.prototype.onArrayChange=function(changeSet){var self=this;var changeMap={added:[],deleted:[]};for(var i=0,len=changeSet.length;i<len;i++){if(isAdditionAdjacentToLast(i,changeSet)){var batchValues=changeMap.added[changeMap.added.length-1].values;if(!batchValues){var lastAddition=changeMap.added.pop();var batchAddition={isBatch:true,status:'added',index:lastAddition.index,values:[lastAddition.value]};batchValues=batchAddition.values;changeMap.added.push(batchAddition);}\nbatchValues.push(changeSet[i].value);}else{changeMap[changeSet[i].status].push(changeSet[i]);}}\nif(changeMap.deleted.length>0){this.changeQueue.push.apply(this.changeQueue,changeMap.deleted);this.changeQueue.push({status:'clearDeletedIndexes'});}\nthis.changeQueue.push.apply(this.changeQueue,changeMap.added);if(this.changeQueue.length>0&&!this.rendering_queued){this.rendering_queued=true;FastForEach.animateFrame.call(window,function(){self.processQueue();});}};FastForEach.prototype.processQueue=function(){var self=this;if(typeof this.beforeQueueFlush==='function'){this.beforeQueueFlush(this.changeQueue);}\nko.utils.arrayForEach(this.changeQueue,function(changeItem){self[changeItem.status](changeItem);});this.rendering_queued=false;if(typeof this.afterQueueFlush==='function'){this.afterQueueFlush(this.changeQueue);}\nthis.changeQueue=[];};FastForEach.prototype.added=function(changeItem){var index=changeItem.index;var valuesToAdd=changeItem.isBatch?changeItem.values:[changeItem.value];var referenceElement=this.lastNodesList[index-1]||null;var allChildNodes=[];for(var i=0,len=valuesToAdd.length;i<len;++i){var templateClone=this.templateNode.cloneNode(true);var childContext;if(this.noContext){childContext=this.$context.extend({'$item':valuesToAdd[i]});}else{childContext=this.$context.createChildContext(valuesToAdd[i],this.as||null);}\nko.applyBindingsToDescendants(childContext,templateClone);var childNodes=ko.virtualElements.childNodes(templateClone);allChildNodes.push.apply(allChildNodes,Array.prototype.slice.call(childNodes));this.lastNodesList.splice(index+i,0,childNodes[childNodes.length-1]);}\ninsertAllAfter(this.element,allChildNodes,referenceElement);};FastForEach.prototype.deleted=function(changeItem){var index=changeItem.index;var ptr=this.lastNodesList[index],lastNode=this.lastNodesList[index-1]||this.element;do{ptr=ptr.previousSibling;ko.removeNode((ptr&&ptr.nextSibling)||ko.virtualElements.firstChild(this.element));}while(ptr&&ptr!==lastNode);this.lastNodesList[index]=this.lastNodesList[index-1];this.indexesToDelete.push(index);};FastForEach.prototype.clearDeletedIndexes=function(){for(var i=this.indexesToDelete.length-1;i>=0;--i){this.lastNodesList.splice(this.indexesToDelete[i],1);}\nthis.indexesToDelete=[];};ko.bindingHandlers.fastForEach={init:function init(element,valueAccessor,bindings,vm,context){var value=valueAccessor(),ffe;if(isPlainObject(value)){value.element=value.element||element;value.$context=context;ffe=new FastForEach(value);}else{ffe=new FastForEach({element:element,data:ko.unwrap(context.$rawData)===value?context.$rawData:value,$context:context});}\nko.utils.domNodeDisposal.addDisposeCallback(element,function(){ffe.dispose();});return{controlsDescendantBindings:true};},FastForEach:FastForEach};ko.virtualElements.allowedBindings.fastForEach=true;}));","Magento_Dhl/js/model/shipping-rates-validator.min.js":"define(['jquery','mageUtils','Magento_Dhl/js/model/shipping-rates-validation-rules','mage/translate'],function($,utils,validationRules,$t){'use strict';return{validationErrors:[],validate:function(address){var self=this;this.validationErrors=[];$.each(validationRules.getRules(),function(field,rule){var message;if(rule.required&&utils.isEmpty(address[field])){message=$t('Field ')+field+$t(' is required.');self.validationErrors.push(message);}});return!this.validationErrors.length;}};});","Magento_Dhl/js/model/shipping-rates-validation-rules.min.js":"define([],function(){'use strict';return{getRules:function(){return{'postcode':{'required':true},'country_id':{'required':true},'city':{'required':true}};}};});","Magento_Dhl/js/view/shipping-rates-validation.min.js":"define(['uiComponent','Magento_Checkout/js/model/shipping-rates-validator','Magento_Checkout/js/model/shipping-rates-validation-rules','Magento_Dhl/js/model/shipping-rates-validator','Magento_Dhl/js/model/shipping-rates-validation-rules'],function(Component,defaultShippingRatesValidator,defaultShippingRatesValidationRules,dhlShippingRatesValidator,dhlShippingRatesValidationRules){'use strict';defaultShippingRatesValidator.registerValidator('dhl',dhlShippingRatesValidator);defaultShippingRatesValidationRules.registerRules('dhl',dhlShippingRatesValidationRules);return Component;});","Magento_Fedex/js/view/shipping-rates-validation.min.js":"define(['uiComponent','Magento_Checkout/js/model/shipping-rates-validator','Magento_Checkout/js/model/shipping-rates-validation-rules','Magento_Fedex/js/model/shipping-rates-validator','Magento_Fedex/js/model/shipping-rates-validation-rules'],function(Component,defaultShippingRatesValidator,defaultShippingRatesValidationRules,fedexShippingRatesValidator,fedexShippingRatesValidationRules){'use strict';defaultShippingRatesValidator.registerValidator('fedex',fedexShippingRatesValidator);defaultShippingRatesValidationRules.registerRules('fedex',fedexShippingRatesValidationRules);return Component;});","Magento_Fedex/js/model/shipping-rates-validator.min.js":"define(['jquery','mageUtils','Magento_Fedex/js/model/shipping-rates-validation-rules','mage/translate'],function($,utils,validationRules,$t){'use strict';return{validationErrors:[],validate:function(address){var self=this;this.validationErrors=[];$.each(validationRules.getRules(),function(field,rule){var message;if(rule.required&&utils.isEmpty(address[field])){message=$t('Field ')+field+$t(' is required.');self.validationErrors.push(message);}});return!this.validationErrors.length;}};});","Magento_Fedex/js/model/shipping-rates-validation-rules.min.js":"define([],function(){'use strict';return{getRules:function(){return{'postcode':{'required':true},'country_id':{'required':true},'city':{'required':true}};}};});","Magento_PageCache/js/page-cache.min.js":"define(['jquery','domReady','consoleLogger','Magento_PageCache/js/form-key-provider','jquery-ui-modules/widget','mage/cookies'],function($,domReady,consoleLogger,formKeyInit){'use strict';function generateRandomString(chars,length){var result='';length=length>0?length:1;while(length--){result+=chars[Math.round(Math.random()*(chars.length-1))];}\nreturn result;}\n$.fn.comments=function(){var elements=[],contents,elementContents;(function lookup(element){var iframeHostName;if($(element).prop('tagName')==='IFRAME'){iframeHostName=$('<a>').prop('href',$(element).prop('src')).prop('hostname');if(window.location.hostname!==iframeHostName){return[];}}\ncontents=function(elem){return $.map(elem,function(el){try{return el.nodeName.toLowerCase()==='iframe'?el.contentDocument||(el.contentWindow?el.contentWindow.document:[]):$.merge([],el.childNodes);}catch(e){consoleLogger.error(e);return[];}});};elementContents=contents($(element));$.each(elementContents,function(index,el){switch(el.nodeType){case 1:lookup(el);break;case 8:elements.push(el);break;case 9:lookup($(el).find('body'));break;}});})(this);return elements;};$.widget('mage.formKey',{options:{inputSelector:'input[name=\"form_key\"]',allowedCharacters:'0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ',length:16},_create:function(){var formKey=$.mage.cookies.get('form_key'),options={secure:window.cookiesConfig?window.cookiesConfig.secure:false};if(!formKey){formKey=generateRandomString(this.options.allowedCharacters,this.options.length);$.mage.cookies.set('form_key',formKey,options);}\n$(this.options.inputSelector).val(formKey);}});$.widget('mage.pageCache',{options:{url:'/',patternPlaceholderOpen:/^ BLOCK (.+) $/,patternPlaceholderClose:/^ \\/BLOCK (.+) $/,versionCookieName:'private_content_version',handles:[]},_create:function(){var placeholders,version=$.mage.cookies.get(this.options.versionCookieName);if(!version){return;}\nplaceholders=this._searchPlaceholders(this.element.comments());if(placeholders&&placeholders.length){this._ajax(placeholders,version);}},_searchPlaceholders:function(elements){var placeholders=[],tmp={},ii,len,el,matches,name;if(!(elements&&elements.length)){return placeholders;}\nfor(ii=0,len=elements.length;ii<len;ii++){el=elements[ii];matches=this.options.patternPlaceholderOpen.exec(el.nodeValue);name=null;if(matches){name=matches[1];tmp[name]={name:name,openElement:el};}else{matches=this.options.patternPlaceholderClose.exec(el.nodeValue);if(matches){name=matches[1];if(tmp[name]){tmp[name].closeElement=el;placeholders.push(tmp[name]);delete tmp[name];}}}}\nreturn placeholders;},_replacePlaceholder:function(placeholder,html){var startReplacing=false,prevSibling=null,parent,contents,yy,len,element;if(!placeholder||!html){return;}\nparent=$(placeholder.openElement).parent();contents=parent.contents();for(yy=0,len=contents.length;yy<len;yy++){element=contents[yy];if(element==placeholder.openElement){startReplacing=true;}\nif(startReplacing){$(element).remove();}else if(element.nodeType!=8){prevSibling=element;}\nif(element==placeholder.closeElement){break;}}\nif(prevSibling){$(prevSibling).after(html);}else{$(parent).prepend(html);}\n$(parent).trigger('contentUpdated');},_ajax:function(placeholders,version){var ii,data={blocks:[],handles:this.options.handles,originalRequest:this.options.originalRequest,version:version};for(ii=0;ii<placeholders.length;ii++){data.blocks.push(placeholders[ii].name);}\ndata.blocks=JSON.stringify(data.blocks.sort());data.handles=JSON.stringify(data.handles);data.originalRequest=JSON.stringify(data.originalRequest);$.ajax({url:this.options.url,data:data,type:'GET',cache:true,dataType:'json',context:this,success:function(response){var placeholder,i;for(i=0;i<placeholders.length;i++){placeholder=placeholders[i];if(response.hasOwnProperty(placeholder.name)){this._replacePlaceholder(placeholder,response[placeholder.name]);}}}});}});domReady(function(){formKeyInit();});return{'pageCache':$.mage.pageCache,'formKey':$.mage.formKey};});","Magento_PageCache/js/form-key-provider.min.js":"define(function(){'use strict';return function(settings){var formKey,inputElements,inputSelector='input[name=\"form_key\"]';function setFormKeyCookie(value){var expires,secure,date=new Date(),cookiesConfig=window.cookiesConfig||{},isSecure=!!cookiesConfig.secure,samesite=cookiesConfig.samesite||'lax';date.setTime(date.getTime()+86400000);expires='; expires='+date.toUTCString();secure=isSecure?'; secure':'';samesite='; samesite='+samesite;document.cookie='form_key='+(value||'')+expires+secure+'; path=/'+samesite;}\nfunction getFormKeyCookie(){var cookie,i,nameEQ='form_key=',cookieArr=document.cookie.split(';');for(i=0;i<cookieArr.length;i++){cookie=cookieArr[i];while(cookie.charAt(0)===' '){cookie=cookie.substring(1,cookie.length);}\nif(cookie.indexOf(nameEQ)===0){return cookie.substring(nameEQ.length,cookie.length);}}\nreturn null;}\nfunction getFormKeyFromUI(){return document.querySelector(inputSelector).value;}\nfunction generateFormKeyString(){var result='',length=16,chars='0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';while(length--){result+=chars[Math.round(Math.random()*(chars.length-1))];}\nreturn result;}\nfunction initFormKey(){formKey=getFormKeyCookie();if(settings&&settings.isPaginationCacheEnabled&&!formKey){formKey=getFormKeyFromUI();setFormKeyCookie(formKey);}\nif(!formKey){formKey=generateFormKeyString();setFormKeyCookie(formKey);}\ninputElements=document.querySelectorAll(inputSelector);if(inputElements.length){Array.prototype.forEach.call(inputElements,function(element){element.setAttribute('value',formKey);});}}\ninitFormKey();};});","js-cookie/js.cookie.min.js":"/*! js-cookie v3.0.1 | MIT */;(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory():typeof define==='function'&&define.amd?define(factory):(global=global||self,(function(){var current=global.Cookies;var exports=global.Cookies=factory();exports.noConflict=function(){global.Cookies=current;return exports;};}()));}(this,(function(){'use strict';function assign(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){target[key]=source[key];}}\nreturn target}\nvar defaultConverter={read:function(value){if(value[0]==='\"'){value=value.slice(1,-1);}\nreturn value.replace(/(%[\\dA-F]{2})+/gi,decodeURIComponent)},write:function(value){return encodeURIComponent(value).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function init(converter,defaultAttributes){function set(key,value,attributes){if(typeof document==='undefined'){return}\nattributes=assign({},defaultAttributes,attributes);if(typeof attributes.expires==='number'){attributes.expires=new Date(Date.now()+attributes.expires*864e5);}\nif(attributes.expires){attributes.expires=attributes.expires.toUTCString();}\nkey=encodeURIComponent(key).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var stringifiedAttributes='';for(var attributeName in attributes){if(!attributes[attributeName]){continue}\nstringifiedAttributes+='; '+attributeName;if(attributes[attributeName]===true){continue}\nstringifiedAttributes+='='+attributes[attributeName].split(';')[0];}\nreturn(document.cookie=key+'='+converter.write(value,key)+stringifiedAttributes)}\nfunction get(key){if(typeof document==='undefined'||(arguments.length&&!key)){return}\nvar cookies=document.cookie?document.cookie.split('; '):[];var jar={};for(var i=0;i<cookies.length;i++){var parts=cookies[i].split('=');var value=parts.slice(1).join('=');try{var foundKey=decodeURIComponent(parts[0]);jar[foundKey]=converter.read(value,foundKey);if(key===foundKey){break}}catch(e){}}\nreturn key?jar[key]:jar}\nreturn Object.create({set:set,get:get,remove:function(key,attributes){set(key,'',assign({},attributes,{expires:-1}));},withAttributes:function(attributes){return init(this.converter,assign({},this.attributes,attributes))},withConverter:function(converter){return init(assign({},this.converter,converter),this.attributes)}},{attributes:{value:Object.freeze(defaultAttributes)},converter:{value:Object.freeze(converter)}})}\nvar api=init(defaultConverter,{path:'/'});return api;})));","js-cookie/cookie-wrapper.min.js":"define(['jquery','js-cookie/js.cookie'],function($,cookie){'use strict';window.Cookies=window.Cookies||cookie;var config=$.cookie=function(key,value,options){if(value!==undefined){options=$.extend({},config.defaults,options);return cookie.set(key,value,options);}\nvar result=key?undefined:{},cookies=document.cookie?document.cookie.split('; '):[],i;for(i=0;i<cookies.length;i++){var parts=cookies[i].split('='),name=config.raw?parts.shift():decodeURIComponent(parts.shift()),cookieValue=parts.join('=');if(key&&key===name){result=decodeURIComponent(cookieValue.replace('/\\\\+/g',' '));break;}\nif(!key&&(cookieValue=decodeURIComponent(cookieValue.replace('/\\\\+/g',' ')))!==undefined){result[name]=cookieValue;}}\nreturn result;};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)===undefined){return false;}\n$.cookie(key,'',$.extend({},options,{expires:-1}));return!$.cookie(key);};});","Magento_Weee/js/tax-toggle.min.js":"define(['jquery'],function($){'use strict';function onToggle(config,e){var elem=$(e.currentTarget),expandedClassName=config.expandedClassName||'cart-tax-total-expanded';elem.toggleClass(expandedClassName);$(config.itemTaxId).toggle();}\nreturn function(data,el){$(el).on('click',onToggle.bind(null,data));};});","Magento_Weee/js/price/adjustment.min.js":"define(['Magento_Ui/js/grid/columns/column'],function(Element){'use strict';return Element.extend({defaults:{bodyTmpl:'Magento_Weee/price/adjustment',dataSource:'${ $.parentName }.provider',inclFptWithDesc:1,inclFpt:0,exclFpt:2,bothFptPrices:3},getWeeeAttributes:function(row){return row['price_info']['extension_attributes']['weee_attributes'];},getWeeeTaxWithoutTax:function(taxAmount){return taxAmount['amount_excl_tax'];},getWeeeTaxWithoutTaxUnsanitizedHtml:function(taxAmount){return this.getWeeeTaxWithoutTax(taxAmount);},getWeeeTaxWithTax:function(taxAmount){return taxAmount['tax_amount_incl_tax'];},getWeeeTaxWithTaxUnsanitizedHtml:function(taxAmount){return this.getWeeeTaxWithTax(taxAmount);},getWeeTaxAttributeName:function(taxAmount){return taxAmount['attribute_code'];},setPriceType:function(priceType){this.taxPriceType=priceType;return this;},isShown:function(row){return row['price_info']['extension_attributes']['weee_attributes'].length;},getWeeeAdjustment:function(row){return row['price_info']['extension_attributes']['weee_adjustment'];},getWeeeAdjustmentUnsanitizedHtml:function(row){return this.getWeeeAdjustment(row);},displayPriceInclFpt:function(){return+this.source.data.displayWeee===this.inclFpt;},displayPriceInclFptDescr:function(){return+this.source.data.displayWeee===this.inclFptWithDesc;},displayPriceExclFptDescr:function(){return+this.source.data.displayWeee===this.exclFpt;},displayPriceExclFpt:function(){return+this.source.data.displayWeee===this.bothFptPrices;},displayPriceExclTax:function(){return+this.source.data.displayTaxes===this.inclFptWithDesc;},displayPriceInclTax:function(){return+this.source.data.displayTaxes===this.exclFpt;},displayBothPricesTax:function(){return+this.source.data.displayTaxes===this.bothFptPrices;}});});","Magento_Weee/js/view/cart/totals/weee.min.js":"define(['Magento_Weee/js/view/checkout/summary/weee'],function(Component){'use strict';return Component.extend({isFullMode:function(){return true;}});});","Magento_Weee/js/view/checkout/summary/weee.min.js":"define(['Magento_Checkout/js/view/summary/abstract-total','Magento_Checkout/js/model/quote','Magento_Checkout/js/model/totals','Magento_Catalog/js/price-utils'],function(Component,quote,totals){'use strict';return Component.extend({defaults:{template:'Magento_Weee/checkout/summary/weee'},isIncludedInSubtotal:window.checkoutConfig.isIncludedInSubtotal,totals:totals.totals,getWeeeTaxSegment:function(){var weee=totals.getSegment('weee_tax')||totals.getSegment('weee');if(weee!==null&&weee.hasOwnProperty('value')){return weee.value;}\nreturn 0;},getValue:function(){return this.getFormattedPrice(this.getWeeeTaxSegment());},isDisplayed:function(){return this.isFullMode()&&this.getWeeeTaxSegment()>0;}});});","Magento_Weee/js/view/checkout/summary/item/price/row_incl_tax.min.js":"define(['Magento_Weee/js/view/checkout/summary/item/price/weee'],function(weee){'use strict';return weee.extend({defaults:{template:'Magento_Weee/checkout/summary/item/price/row_incl_tax',displayArea:'row_incl_tax'},getFinalRowDisplayPriceInclTax:function(item){var rowTotalInclTax=parseFloat(item['row_total_incl_tax']);if(!window.checkoutConfig.getIncludeWeeeFlag){rowTotalInclTax+=this.getRowWeeeTaxInclTax(item);}\nreturn rowTotalInclTax;},getRowDisplayPriceInclTax:function(item){var rowTotalInclTax=parseFloat(item['row_total_incl_tax']);if(window.checkoutConfig.getIncludeWeeeFlag){rowTotalInclTax+=this.getRowWeeeTaxInclTax(item);}\nreturn rowTotalInclTax;},getRowWeeeTaxInclTax:function(item){var totalWeeeTaxInclTaxApplied=0,weeeTaxAppliedAmounts;if(item['weee_tax_applied']){weeeTaxAppliedAmounts=JSON.parse(item['weee_tax_applied']);weeeTaxAppliedAmounts.forEach(function(weeeTaxAppliedAmount){totalWeeeTaxInclTaxApplied+=parseFloat(Math.max(weeeTaxAppliedAmount['row_amount_incl_tax'],0));});}\nreturn totalWeeeTaxInclTaxApplied;}});});","Magento_Weee/js/view/checkout/summary/item/price/row_excl_tax.min.js":"define(['Magento_Weee/js/view/checkout/summary/item/price/weee'],function(weee){'use strict';return weee.extend({defaults:{template:'Magento_Weee/checkout/summary/item/price/row_excl_tax'},getFinalRowDisplayPriceExclTax:function(item){var rowTotalExclTax=parseFloat(item['row_total']);if(!window.checkoutConfig.getIncludeWeeeFlag){rowTotalExclTax+=parseFloat(item['qty'])*parseFloat(item['weee_tax_applied_amount']);}\nreturn rowTotalExclTax;},getRowDisplayPriceExclTax:function(item){var rowTotalExclTax=parseFloat(item['row_total']);if(window.checkoutConfig.getIncludeWeeeFlag){rowTotalExclTax+=this.getRowWeeeTaxExclTax(item);}\nreturn rowTotalExclTax;},getRowWeeeTaxExclTax:function(item){var totalWeeeTaxExclTaxApplied=0,weeeTaxAppliedAmounts;if(item['weee_tax_applied']){weeeTaxAppliedAmounts=JSON.parse(item['weee_tax_applied']);weeeTaxAppliedAmounts.forEach(function(weeeTaxAppliedAmount){totalWeeeTaxExclTaxApplied+=parseFloat(Math.max(weeeTaxAppliedAmount['row_amount'],0));});}\nreturn totalWeeeTaxExclTaxApplied;}});});","Magento_Weee/js/view/checkout/summary/item/price/weee.min.js":"define(['Magento_Checkout/js/view/summary/abstract-total','Magento_Checkout/js/model/quote'],function(Component){'use strict';return Component.extend({isDisplayPriceWithWeeeDetails:function(item){if(!parseFloat(item['weee_tax_applied_amount'])||parseFloat(item['weee_tax_applied_amount']<=0)){return false;}\nreturn window.checkoutConfig.isDisplayPriceWithWeeeDetails;},isDisplayFinalPrice:function(item){if(!parseFloat(item['weee_tax_applied_amount'])){return false;}\nreturn window.checkoutConfig.isDisplayFinalPrice;},getWeeeTaxApplied:function(item){if(item['weee_tax_applied']){return JSON.parse(item['weee_tax_applied']);}\nreturn[];}});});"}
}});
